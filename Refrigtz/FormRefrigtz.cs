/***********************************************************************************************
 * Main class of Form Inherited of Form Main in the C#.*****************************************
 * Ramin Edjlal*******************************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Mouse Event Handling Error*****************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Some Soldiers Loos Location  And Virutuallization at Click*********************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Some Codes Lines Frizes********************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Hit things Abnormal behaviour**************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Virtualization Things Error****************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * No Reason Logically For Equality of 'SoldierP' and 'Soldier'*******************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Problem of Sameness of Hit Enemys Solved.No Reason For Equality of 'Soldier' and 'SoldierP'RS--************(-+)
 * No Problem For Hiting**********************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Castles of Gray Color Conversion to Kings Brown********************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Castles Conversion To King Brown Abnormally no Reasonably**********************************CU*****0.88**1**Risk Control************************(*)
 * Color Conversion In Virtualization Hit Enemy***********************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Need To Find Enemy Detection on Current OrderPlate*****************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * CheckMate an Check Dosn't Work*******************************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * No Movments By Computer********************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Illegal Virtualization. The Thinking By 'Alice' (My Computer) RefrigtzDLL.ChessRules Misleading********RS*****0.12**4**Managements and Cuation Programing**(+)
 * permutative Constant Huristic Results******************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * In Existence of Adding Suported Huristic Constant Huristic Result Detection****************RS*****0.12**4**Managements and Cuation Programing**(+)
 * OrderPlate Not Configured******************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Non Color Hourse Hit Assignment Misleading(Abnormal)***************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Undetected Error Table Content Malfunction*************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * MalFunction Movments Greate than 5 by 'Alice'.*********************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * 'Check' Second Time 'Alice' MalFanction*****************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * 'Check' 'Alice' Mechnisam Failure***********************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 '* CheckMate' of Unsatisfied in 'Alice'***********************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * CheckMate Dosn't Recognized.********************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Virtualization Filed (Not Responding) at Indpencdency State********************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Unable To Draw Refrigtz.Timer  Content at Tow Picture Box*******************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Refrigtz.Timer Working Hardly.**********************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Dead lock In Drawing Images.***************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Misleading Thread OrderPlate And Time Sharing**********************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Thinkings Taking a lot of Time.************************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * AntiVirus Protextion and Existance Caused to Reduce Speed of Thinking and lead to Lose.****RS*****0.12**4**Managements and Cuation Programing**(+)
 * No Programatically Reason For Speed Reduction.*********************************************RS*****0.12**4**Managements and Cuation Programing**(+) 
 * Mybe Windows Filrewall Has no been correctly Arranges to reduce speed.*********************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Method on Leave not Work.******************************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * OrderPlate Reader Table MalFunction.*******************************************************RS*****0.12**4**Managements and Cuation Programing**(+)
 * Wrong Sysntax To Read.*********************************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Some Tables of Hitting Tow Person Are Missing.*********************************************__**************(_)
 * Some Syntaxes at Table Read Are Missing.***************************************************__**************(_)
 * Chess Refregitz Sometimes Not Responding due to Cpu Power Non Ability.*********************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Chess Refregitz Sometimes stop working.****************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * 1395/1/16**********************************************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * OrderPlate MalFunction.********************************************************************RS*****0.12**4**Managements and Cuation Programing**{+}
 * Virtualization Error.No Reason For MalFunctionla Operation of Program at Sysntax and Orde.*CU*****0.88**1**Risk Control************************{*}QC-OK.
 * Cause Sensitive Problems of 'Check' And 'CheckMate By 'Alice' is borring at StateCP.*************CU*****0.88**1**Risk Control************************{*}QC-OK.
 * Table Content Misleading.******************************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Documentation Faulting On Removing Detials.************************************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Loading Games  to Continue failed Unreasonly.**********************************************CU*****0.88**1**Risk Control************************<*>QC-OK.
 * "Thread is dead.The state can not be accessed.".*******************************************CU*****0.88**1**Risk Control************************{*}QC-OK.
 * Illegal Syntax Mechanisam Detection By Genetic Algorithm.**********************************CU*****0.88**1**Risk Control************************<*>QC-Ok.
 * 'MaxCurrentMovmentsNumber' Changes Illegal to Reduced.*************************************CU*****0.88**1**Risk Control************************{*}QC-OK.
 * Arranagment Up-Down Changes caused to Born of Some Objects UnSupported Attractively.*******CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Table TableListAction Genetic Algorithm MalFunctionally Illegal Data.**********************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Castles King Insertion Overllaping Previous Enemy Movments of Person Movments.*************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Statisticer Loader and Acter Castles King Overview Failed.*********************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Castles King Continue With Illegal Movments at Statisticer.********************************CU*****0.88**1**Risk Control************************(*)QC-OK.
 * Calling of All Events From Pressing a Single Button.Mal Function of Database Leading.******CU*****0.88**1**Risk Control************************<*>QC_OK
 * Proccess Calling of Stockfish8 not run Comlpetely.*********************************************************************************************(*)QC_OK
 * Can not Send Arguments via Foriegn Sites Studies. Problem Misleading.**************************************************************************(*)QC_OK
 * Serialization and Deserialization Wrong Config vars conflict.**********************************************************************************(*)QC_OK
 * MalFunctionally break heart of Access Database Configuration Table.****************************************************************************(*)QC_OK
 * Parallleism occured Misfaulting in all Opetions of this work.**********************************************************************************(*)QC_BAD
 * Mal Function in Drawing some part of objects in somthings of games.****************************************************************************(*)QC_BAD
 * ***********************************************************************************************************
 * ***********************************************************************************************************
 */

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using System.Threading;
using System.Data.OleDb;
using System.Media;
using System.IO;
using System.Threading.Tasks;

namespace Refrigtz
{
    [Serializable]
    //Constructor
    public partial class FormRefrigtz : Form
    {
        bool ExitM = false;
        public static int AllDrawKind = 0;//0,1,2,3,4,5,6
        public static String AllDrawKindString = "";

        bool MenueSelecte = false;
        String path3 = @"temp";       
        String AllDrawReplacement = "";
        bool Sugar = false;
        public bool Quantum = false;
        Double Store = 0;
        Double Count = 1;
        Int64 TimeElapsed = DateTime.Now.Hour * 3600000 + DateTime.Now.Minute * 60000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
        Int64 FirstTime = DateTime.Now.Hour * 3600000 + DateTime.Now.Minute * 60000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;

        //Variables That to be Included at RefregitzDLL

        //Initiate Variables.
        String Out = "";
        bool LoadedDLL = false;
        bool WaitOn = true;
        String comboBoxMaxLevelText = "";
        bool RemoveUncomStock = false;
        const string PieceToChar = "kqrnbp PBNRQK";
        int StockMoveBase = 0;
        int FenCastling = -1;//0 for small castling 1 for big castling -1 for non castling.
        int StockMove = 1;
        //Initiate Global Variable.
        //public bool DisableTemporarlyTimerUpdate = false;
        public bool ConvertWait = false;
        public double MaxHuristicx = Double.MinValue;
        public bool MovementsAStarGreedyHuristicFound = false;
        public bool IInoreSelfObjects = false;
        public bool UsePenaltyRegardMechnisam = false;
        public bool PredictHuristic = false;
        public bool OnlySelf = false;
        public bool AStarGreedyHuristic = false;
        public bool BestMovments = false;

        bool FullGame = false;
        static int GrayCountHiiting = 1;
        static int BrownCountHiiting = 17;
        List<PictureBox> ApList = new List<PictureBox>();
        public static int X1 = 0, Y1 = 0;
        public static int X2 = 0, Y2 = 0;
        public static bool Stockfish = false;
        bool SettingPRFALSE = false;
        public static bool ProfesionalWithComputer = false;
        public bool TimersSet = true;
        public static bool GameStarted = false;
        public bool ArrangmentsChanged = true;
        public static int MaxCurrentMovmentsNumber = 1;
        public static bool ErrorTrueMonitorFalse = true;
        Thread tM = null;
        bool Clicked = true;
        public static int MaxAStarGreedyHuristicProgress = 0;
        public static String Root = System.IO.Path.GetDirectoryName(Environment.GetCommandLineArgs()[0]);
        public bool MouseClicked = false;
        public static bool Blitz = false;
        DateTime PreviousTime;
        static bool LoadAG = false;
        static bool _1 = false;
        static bool _2 = false;
        static bool _3 = false;
        static bool _4 = false;
        public FormSelect Sec = new FormSelect();
        bool AllDrawLoad = false;
        Thread AllOperate = null;
        static bool PaintingPaused = false;
        //static bool PaintedPaused = false;
        //static bool UpdateConfigurationTableVal = false;
        static bool NewTable = false;
        OleDbConnection bookConn;
        OleDbCommand oleDbCmd = new OleDbCommand();
        private OleDbCommand oleDbCmdUser = new OleDbCommand();
        //Image TimerImage = null;
        Graphics g1 = null;
        //Image TimerImage1 = null;
        Graphics g2 = null;
        Graphics g = null;
        Image ChessTable = null;
        public static int LastRow = -1;
        public static int LastColumn = -1;
        public static int NextRow = -1;
        public static int NextColumn = -1;
        Thread t1 = null;
        Thread t2 = null;
        Thread t3 = null;
        Thread t4 = null;
        //Thread TTimerSet;
        public static bool LoadedTable = false;
        bool GrayWinner = false;
        bool BrownWiner = false;
        public Refrigtz.Timer TimerText = null;
        public Refrigtz.Timer GrayTimer = null;
        public Refrigtz.Timer BrownTimer = null;
        public static int MovmentsNumber = 0;
        public static int MovmentsNumberMax = 0;
        public static bool EndOfGame = false;
        bool Maximize = false;
        static int RowP = 0, ColP = 0, RowSource = 0, ColumnSource = 0;
        bool BobSection = false;
        bool AliceSection = false;
        public static bool Person = false;
        static int CurrentKind = 0;
        public static bool StateCC = false;//Computer With Computer
        public static bool StateCP = true;//Person With Computer
        public static bool StateGe = false;//For Genetic Games.
        public RefrigtzDLL.AllDraw Draw;
        public static int OrderPlate = 1;
        // int RefrigtzDLL.AllDraw.MouseClick;
        int Soldier;
        int Elefant;
        int Hourse;
        int Castle;
        int Minister;
        int King;
        float RowClickP = -1, ColumnClickP = -1;
        int RowClick = -1, ColumnClick = -1;
        float RowRealesedP = -1, ColumnRealeasedP = -1;
        float RowRealesed = -1, ColumnRealeased = -1;
        public int[,] Table ={
            { -4, -1, 0, 0, 0, 0, 1, 4 },
            { -3, -1, 0, 0, 0, 0, 1, 3 },
            { -2, -1, 0, 0, 0, 0, 1, 2 },
            { -5, -1, 0, 0, 0, 0, 1, 5 },
            { -6, -1, 0, 0, 0, 0, 1, 6 },
            { -2, -1, 0, 0, 0, 0, 1, 2 },
            { -3, -1, 0, 0, 0, 0, 1, 3 },
            { -4, -1, 0, 0, 0, 0, 1, 4 }
            };
        List<char> fenS = new List<char>("position fen rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1\0");

        //FormRefrigtz THIs = null;
        String connParam = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + Root + "\\" + "Database\\CurrentBank.accdb;;Persist Security Info=False; Jet OLEDB:Database Password='!HN#BGHHN&N$G$V4'";
        public bool LoadTree = false;
        //Thread tttt = null;
        //Thread ttt = null;
        public QuantumRefrigiz.AllDraw DrawQ = null;
        Process proc = new Process();

        //private System.Timers.Timer queueManagementTimer;
        //private System.Timers.Timer queueManagementTimerMove;
        //private System.Timers.Timer queueManagementTimerSetRefrigitDLL;
        //private System.Timers.Timer queueManagementTimerSetNodesCount;
        //private System.Timers.Timer queueManagementTimerSetTimer;


        bool AllDo = false;
        bool AllMove = false;
        bool SetDLL = false;
        bool SetNode = false;
        bool SetTimer = false;

        /*private void worker_DoWork()
        {
            queueManagementTimer = new System.Timers.Timer(500); 
            queueManagementTimer.Elapsed += OnQueueManagementTimerElapsed;
            queueManagementTimer.Enabled = true;
            queueManagementTimer.AutoReset = true;

        }
        private void worker_DoWorkMove()
        {
            queueManagementTimerMove = new System.Timers.Timer(500); 
            queueManagementTimerMove.Elapsed += OnQueueManagementTimerElapsedMove;
            queueManagementTimerMove.Enabled = true;
            queueManagementTimerMove.AutoReset = true;

        }
        private void worker_DoWorkDLL()
        {
            queueManagementTimerSetRefrigitDLL = new System.Timers.Timer(1); 
            queueManagementTimerSetRefrigitDLL.Elapsed += OnQueueManagementTimerElapsedSetRefrigitDLL;
            queueManagementTimerSetRefrigitDLL.Enabled = true;
            queueManagementTimerSetRefrigitDLL.AutoReset = true;

        }
        private void worker_DoWorkNodesCount()
        {
            queueManagementTimerSetNodesCount = new System.Timers.Timer(1); 
            queueManagementTimerSetNodesCount.Elapsed += OnQueueManagementTimerElapsedSetNodesCount;
            queueManagementTimerSetNodesCount.Enabled = true;
            queueManagementTimerSetNodesCount.AutoReset = true;

        }
        
        private void worker_DoWorkTimer()
        {
            queueManagementTimerSetTimer = new System.Timers.Timer(1); 
            queueManagementTimerSetTimer.Elapsed += OnQueueManagementTimerElapsedSetTimer;
            queueManagementTimerSetTimer.Enabled = true;
            queueManagementTimerSetTimer.AutoReset = true;

        }
        */
        /*  private void OnQueueManagementTimerElapsed(Object source, System.Timers.ElapsedEventArgs e)
          {
              if (!AllDo)
              {
                  AllDo = true;
                  System.Threading.Thread t = new Thread(new ThreadStart(AllOp));
                  t.Start();
              }

          }
          private void OnQueueManagementTimerElapsedMove(Object source, System.Timers.ElapsedEventArgs e)
          {

              if (!AllMove)
              {
                  System.Threading.Thread t = new Thread(new ThreadStart(Movements));
                  t.Start();
                  t.Join();
              }


          }
          private void OnQueueManagementTimerElapsedSetRefrigitDLL(Object source, System.Timers.ElapsedEventArgs e)
          {

               if (!SetDLL)
              {
                  System.Threading.Thread t = new Thread(new ThreadStart(SetRefregitzDLL));
                  t.Start();
                  t.Join();
              }


          }
          private void OnQueueManagementTimerElapsedSetNodesCount(Object source, System.Timers.ElapsedEventArgs e)
          {

              if (!SetNode)
              {
                  System.Threading.Thread t = new Thread(new ThreadStart(SetNodesCount));
                  t.Start();
                  t.Join();
              }
          }
          private void OnQueueManagementTimerElapsedSetTimer(Object source, System.Timers.ElapsedEventArgs e)
          {

              if (!SetTimer)
              {
                  System.Threading.Thread t = new Thread(new ThreadStart(SetTimerDLL));
                  t.Start();
                  t.Join();
              }


          }
      */
        void AllOp()
        {
            while (!LoadedTable || (!MenueSelecte)) { Thread.Sleep(1000); }
        
            //if (RefrigtzDLL.AllDraw.THISDummy != null)
            // RefrigtzDLL.AllDraw.THISDummy.Clone(Draw);
            if (!Quantum)
            {
                if (MovmentsNumber == 1)
                {
                   
                    /*   if (Stockfish)
                       {
                           GrayTimer.Sign = 1;
                           BrownTimer.Sign = 1;
                           if (OrderPlate == 1)
                           {
                               GrayTimer.StartTime("GrayTimer");
                               BrownTimer.StopTime();
                               BobSection = true;
                               AliceSection = false;
                               GrayTimer.StartTime("GrayTimer");
                           }
                           else
                           {
                               BrownTimer.StartTime("BrownTimer");
                               GrayTimer.StopTime();
                               BobSection = false;
                               AliceSection = true;
                               BrownTimer.StartTime("BrownTimer");
                           }




                       }*/
                }

                RefrigtzDLL.AllDraw.SyntaxToWrite = "";
                try
                {

                    if (RefrigtzDLL.AllDraw.TableListAction.Count > 0)
                    {
                        if (RefrigtzDLL.ChessGeneticAlgorithm.NoGameFounf)
                        {
                            SetBoxText("No Game Could be continued!");
                            RefreshBoxText();

                        }
                        if (RefrigtzDLL.AllDraw.MouseClick == 0 && !RefrigtzDLL.ThinkingChess.ThinkingRun)
                        {
                            RefrigtzDLL.ChessRules A = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                            Color a = Color.Gray;
                            if (OrderPlate == -1)
                                a = Color.Brown;
                            RefrigtzDLL.ChessRules AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, OrderPlate);

                            //if (!UsePenaltyRegardMechnisam)
                            if (AA.CheckMate(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], OrderPlate))
                            {
                                if (OrderPlate == 1 && AA.CheckMateGray)
                                {
                                    EndOfGame = true;
                                    return;
                                }
                                else
                                    if (OrderPlate == -1 && AA.CheckMateBrown)
                                {
                                    EndOfGame = true;
                                    return;
                                }
                            }

                            if (A.CheckMate(Table, OrderPlate) || A.Pat(Table, OrderPlate, a))
                            {
                                if (A.CheckMateGray || A.CheckMateBrown || EndOfGame || A.PatkGray || A.PatBrown)
                                {
                                    StateCC = false;
                                    StateCP = false;
                                    Person = false;
                                    if (A.CheckMateGray || A.CheckMateBrown)
                                        SetBoxText("\r\nCheckMate!");
                                    else if (A.PatkGray || A.PatBrown)
                                        SetBoxText("\r\nPat!");
                                    RefreshBoxText();
                                    //if (AllOperate.IsAlive)
                                    //new Syncronization(AllOperate, 1);




                                }
                                else
                                {
                                    if (A.CheckMateGray && OrderPlate == 1)


                                        if (A.CheckGray || A.CheckBrown)
                                        {
                                            if (OrderPlate == 1)

                                                SetBoxText("\r\nGray OrderPlate!Check!");
                                            else
                                                SetBoxText("\r\nBrown OrderPlate!Check!");

                                        }
                                }
                            }
                        }
                    }
                    if (Sec.radioButtonGrayOrder.Checked)
                    {
                        if (StateCC)
                        {

                            if (Stockfish)
                            {
                                if (ArrangmentsChanged)
                                {
                                    if (Blitz)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {
                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            
                                        {
                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }
                                    }
                                    else
                                        if (FullGame)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {
                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            
                                        {
                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }
                                    }
                                }
                                else
                                    MessageBox.Show("Mirror Objects Please!");
                            }
                            else//Not Stockfish
                            {
                                if (Blitz)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();
                                        AllDo = false;


                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();
                                            AllDo = false;

                                        }
                                    }
                                }
                                else
                                    if (FullGame)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();
                                        AllDo = false;


                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();
                                            AllDo = false;

                                        }
                                    }
                                }
                            }
                        }

                        else
                            if (StateCP)
                        {
                            if (Stockfish)
                            {

                                if (ArrangmentsChanged)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        Clicked = true;
                                        GrayTimer.StartTime("GrayTimer");
                                        BrownTimer.StopTime();
                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;
                                        //
                                        //
                                        //                                        
                                        RefrigtzDLL.AllDraw.MouseClick = 0;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        Color a = Color.Brown;

                                        bool FOUND = false;
                                        RefrigtzDLL.AllDraw THIS = null;

                                        SetDrawFounding(ref FOUND, ref THIS, false);

                                        if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                        {
                                            FenCastling = 1;
                                        }
                                        else
                                                if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                        {
                                            FenCastling = 0;
                                        }
                                        else
                                            FenCastling = -1;

                                        String fens = Fen();
                                        if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                        {
                                            RefrigtzDLL.ChessRules.BigKingCastleGray = false;
                                        }
                                        else
                                            if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                        {
                                            RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
                                        }
                                        StreamWriter sw = proc.StandardInput;
                                        string input = fens + "\r\n";
                                        sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
                                        sw.Flush();
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        //Thread.Sleep(1500);
                                        BobSection = false;
                                        
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");
                                        AllDo = false;


                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                        MessageBox.Show("No Knowledge!");
                                }
                                else
                                    MessageBox.Show("Mirror the Objects please!");
                            }
                            else
                            {
                                if (Blitz)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {


                                        bool SCC = StateCC;
                                        bool SCP = StateCP;
                                        bool SCG = StateGe;

                                        RefrigtzDLL.AllDraw.FoundATable = false;
                                        Clicked = true;
                                        RefrigtzDLL.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;

                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;
                                        //
                                        //
                                        //                                        
                                        RefrigtzDLL.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        Color a = Color.Brown;
                                        bool FOUND = false;
                                        RefrigtzDLL.AllDraw THIS = null;


                                        //SetDrawFounding(ref FOUND, ref THIS, true);

                                        BobSection = false;
                                        StateCC = SCC;
                                        StateCP = SCP;
                                        StateGe = SCG;
                                        AllDo = false;
                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                    {
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");

                                        if (tM != null)
                                        {
                                            try
                                            {
                                                tM.Abort();
                                                tM.Join();
                                                tM = null;
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        Person = true;

                                        AliceWithPerson();

                                        BobSection = true;

                                        AllDo = false;
                                    }
                                }
                                else
                                    if (FullGame)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {



                                        RefrigtzDLL.AllDraw.FoundATable = false;
                                        Clicked = true;
                                        RefrigtzDLL.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;

                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;
                                        //
                                        //
                                        //

                                        RefrigtzDLL.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                        Draw.TableList.Clear();
                                        Draw.TableList.Add(Table);
                                        Draw.SetRowColumn(0);
                                        BobSection = false;
                                        AllDo = false;
                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                    {
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");

                                        if (tM != null)
                                        {
                                            try
                                            {
                                                tM.Abort();
                                                tM.Join();
                                                tM = null;
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        Person = true;

                                        AliceWithPerson();

                                        BobSection = true;

                                        AllDo = false;
                                    }
                                }
                            }

                        }
                        else
                                if (StateGe)
                        {
                            if (Blitz)
                            {
                                GeneticAction();

                                AllDo = false;
                            }
                            else
                                if (FullGame)
                            {
                                GeneticAction();

                                AllDo = false;

                            }
                        }
                    }
                    else
                        if (Sec.radioButtonBrownOrder.Checked)
                    {

                        if (StateCC)
                        {
                            if (Stockfish)
                            {
                                if (ArrangmentsChanged)
                                {
                                    if (Blitz)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {
                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            
                                        {
                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }
                                    }
                                    else
                                        if (FullGame)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {


                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            

                                        {

                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }

                                    }
                                }
                                else
                                    MessageBox.Show("Mirror Objects Please!");
                            }
                            else//Not Stockfish
                            {
                                if (Blitz)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        BrownTimer.StopTime();
                                        GrayTimer.StartTime("GrayTimer");

                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();

                                        AllDo = false;

                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            GrayTimer.StopTime();
                                            BrownTimer.StartTime("BrownTimer");
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();

                                            AllDo = false;
                                        }
                                    }
                                }
                                else
                                    if (FullGame)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        BrownTimer.StopTime();
                                        GrayTimer.StartTime("GrayTimer");

                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();

                                        AllDo = false;


                                    }
                                    else
                                    {
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");

                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();

                                            AllDo = false;
                                        }
                                    }
                                }
                            }
                        }

                        else
                            if (StateCP)
                        {
                            if (Stockfish)
                            {

                                if (ArrangmentsChanged)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        Clicked = true;
                                        GrayTimer.StartTime("GrayTimer");
                                        BrownTimer.StopTime();
                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;


                                        RefrigtzDLL.AllDraw.MouseClick = 0;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                        Draw.TableList.Clear();
                                        Draw.TableList.Add(Table);
                                        Draw.SetRowColumn(0);
                                        if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                        {
                                            FenCastling = 1;
                                        }
                                        else
                                            if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                        {
                                            FenCastling = 0;
                                        }
                                        else
                                            FenCastling = -1;

                                        String fens = Fen();
                                        if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                        {
                                            RefrigtzDLL.ChessRules.BigKingCastleGray = false;
                                        }
                                        else
                                            if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                        {
                                            RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
                                        }
                                        StreamWriter sw = proc.StandardInput;
                                        string input = fens + "\r\n";
                                        sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
                                        sw.Flush();
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        //Thread.Sleep(1500);
                                        BobSection = false;
                                        
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");

                                        AllDo = false;

                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                        MessageBox.Show("No Knowledge!");
                                }
                                else
                                    MessageBox.Show("Mirror the Objects please!");
                            }
                            else
                                if (Blitz)
                            {
                                if (!BobSection && OrderPlate == -1)
                                {
                                    RefrigtzDLL.AllDraw.FoundATable = false;
                                    Clicked = true;
                                    RefrigtzDLL.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;

                                    if (tM == null)
                                        tM = new Thread(new ThreadStart(Movements));
                                    if (!tM.IsAlive)
                                    {
                                        tM.Start();
                                    }
                                    Wait();
                                    Clicked = false;


                                    RefrigtzDLL.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;
                                    SetBoxText("\r\nObject Cleared.");
                                    RefreshBoxText();
                                    SetBoxText("\r\nYour Ready!");
                                    RefreshBoxText();
                                    //Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                    //Draw.TableList.Clear();
                                    //Draw.TableList.Add(Table);
                                    //Draw.SetRowColumn(0);
                                    BobSection = true;

                                    AllDo = false;
                                }
                                else
                                    if (BobSection && OrderPlate == 1)
                                {
                                    BrownTimer.StopTime();
                                    GrayTimer.StartTime("GrayTimer");


                                    if (tM != null)
                                    {
                                        try
                                        {
                                            tM.Abort();
                                            tM.Join();
                                            tM = null;
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    Person = true;

                                    BobWithPerson();

                                    BobSection = false;

                                    AllDo = false;

                                }

                            }
                            else
                                    if (FullGame)
                            {
                                if (!BobSection && OrderPlate == -1)
                                {
                                    RefrigtzDLL.AllDraw.FoundATable = false;
                                    Clicked = true;
                                    RefrigtzDLL.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;

                                    if (tM == null)
                                        tM = new Thread(new ThreadStart(Movements));
                                    if (!tM.IsAlive)
                                    {
                                        tM.Start();
                                    }
                                    Wait();
                                    Clicked = false;


                                    RefrigtzDLL.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;
                                    SetBoxText("\r\nObject Cleared.");
                                    RefreshBoxText();
                                    SetBoxText("\r\nYour Ready!");
                                    RefreshBoxText();
                                    Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                    Draw.TableList.Clear();
                                    Draw.TableList.Add(Table);
                                    Draw.SetRowColumn(0);
                                    BobSection = true;
                                    AllDo = false;
                                }
                                else
                                    if (BobSection && OrderPlate == 1)
                                { GrayTimer.StartTime("GrayTimer");
                                        BrownTimer.StopTime();
                                     

                                    if (tM != null)
                                    {
                                        try
                                        {
                                            tM.Abort();
                                            tM.Join();
                                            tM = null;
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    Person = true;

                                    AliceWithPerson();

                                    BobSection = false;

                                    AllDo = false;

                                }
                            }

                        }
                        else
                                if (StateGe)
                        {
                            if (Blitz)
                            {
                                GeneticAction();
                                AllDo = false;

                            }
                            else
                                if (FullGame)
                            {
                                GeneticAction();

                                AllDo = false;
                            }
                        }
                    }


                    /* if (((StateCP) || Person || Blitz) && (!StateCC))
                     {


                         try
                         {
                             Color a = Color.Gray;
                             if (OrderPlate == -1)
                                 a = Color.Brown;
                             bool[,] Tab = new bool[8, 8];
                             if (RowClickP != -1 && ColumnClickP != -1)
                                 Tab = VeryFye(Table, OrderPlate, a);
                             if ((RowRealesed >= 0) && (RowRealesed < 8) && (ColumnRealeased >= 0) && (ColumnRealeased < 8) && ((int)(this.pictureBoxRefrigtz.Width / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Width / 8) < 8) && ((int)(this.pictureBoxRefrigtz.Height / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Height / 8) < 8))
                             {
                                 if ((RowRealesed + ColumnRealeased) % 2 == 0)
                                     g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle((int)RowRealesed, (int)ColumnRealeased, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                                 else
                                     g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle((int)RowRealesed, (int)ColumnRealeased, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                             }

                         }
                         catch (Exception t)
                         { //RunInFront();
                             Log(t);
                         }

                         int Or = 1;
                         if (Sec.radioButtonBrownOrder.Checked)
                             Or = -1;
                         if (Sec.radioButtonGrayOrder.Checked)
                         {
                             if (!Stockfish)
                             {
                                 if ((StateCP || Blitz) && (OrderPlate == Or))
                                 {


                                     RefrigtzDLL.AllDraw.FoundATable = false;
                                     Clicked = true;
                                     RefrigtzDLL.AllDraw.MouseClick = 0;
                                     RowClick = -1;
                                     ColumnClick = -1;
                                     RowClickP = -1;
                                     ColumnClickP = -1;
                                     RowRealesed = -1;
                                     ColumnRealeased = -1;

                                     {
                                         if (tM == null)
                                             tM = new Thread(new ThreadStart(Movements));
                                         if (!tM.IsAlive)
                                         {
                                             tM.Start();
                                         }
                                         Wait();
                                         Clicked = false;


                                         RefrigtzDLL.AllDraw.MouseClick = 0;
                                         RowClick = -1;
                                         ColumnClick = -1;
                                         RowClickP = -1;
                                         ColumnClickP = -1;
                                         RowRealesed = -1;
                                         ColumnRealeased = -1;
                                         SetBoxText("\r\nObject Cleared.");
                                         RefreshBoxText();
                                         SetBoxText("\r\nYour Ready!");
                                         RefreshBoxText();
                                         Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                         Draw.TableList.Clear();
                                         Draw.TableList.Add(Table);
                                         Draw.SetRowColumn(0);


                                     }
                                 }
                                 else
                                 {

                                     if (tM != null)
                                     {
                                         try
                                         {
                                             tM.Abort();
                                             tM.Join();
                                             tM = null;
                                         }
                                         catch (Exception t)
                                         {
                                             Log(t);
                                         }
                                     }
                                     if ((StateCP) || Blitz)
                                     {
                                         if (Sec.radioButtonGrayOrder.Checked && OrderPlate == -1)
                                         {
                                             Person = true;

                                             AliceWithPerson();
                                         }
                                     }
                                 }
                             }
                             else//Stockfish with Person 
                             {
                                 if (ArrangmentsChanged)
                                 {
                                     if (BobSection)
                                     {
                                         Clicked = true;
                                         GrayTimer.StartTime("GrayTimer");
                                         BrownTimer.StopTime();
                                         if (tM == null)
                                             tM = new Thread(new ThreadStart(Movements));
                                         if (!tM.IsAlive)
                                         {
                                             tM.Start();
                                         }
                                         Wait();
                                         Clicked = false;


                                         RefrigtzDLL.AllDraw.MouseClick = 0;
                                         SetBoxText("\r\nObject Cleared.");
                                         RefreshBoxText();
                                         SetBoxText("\r\nYour Ready!");
                                         RefreshBoxText();
                                         Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                         Draw.TableList.Clear();
                                         Draw.TableList.Add(Table);
                                         Draw.SetRowColumn(0);
                                         if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                         {
                                             FenCastling = 1;
                                         }
                                         else
                                             if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                             {
                                                 FenCastling = 0;
                                             }
                                             else
                                                 FenCastling = -1;

                                         String fens = Fen();
                                         if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                         {
                                             RefrigtzDLL.ChessRules.BigKingCastleGray = false;
                                         }
                                         else
                                             if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                             {
                                                 RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
                                             }
                                         StreamWriter sw = proc.StandardInput;
                                         string input = fens + "\r\n";
                                         sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                         sw.Flush();
                                         RowClickP = -1;
                                         ColumnClickP = -1;
                                         RowRealesed = -1;
                                         ColumnRealeased = -1;
                                         //Thread.Sleep(1500);
                                         BobSection = false;
                                         
                                         GrayTimer.StopTime();
                                         BrownTimer.StartTime("BrownTimer");




                                     }
                                     else
                                         if (!BobSection)
                                         {
                                         }

                                 }
                                 else
                                 {
                                     Stockfish = false;
                                     StateCC = false;
                                     StateCP = false;
                                     MessageBox.Show("Mirror Objects please!");
                                 }

                             }
                         }
                         else if (Sec.radioButtonBrownOrder.Checked)
                         {


                             if ((StateCP || Blitz) && (OrderPlate == Or))
                             {

                                 Person = false;
                                 RefrigtzDLL.AllDraw.FoundATable = false;
                                 Clicked = true;
                                 RefrigtzDLL.AllDraw.MouseClick = 0;
                                 RowClick = -1;
                                 ColumnClick = -1;
                                 RowClickP = -1;
                                 ColumnClickP = -1;
                                 RowRealesed = -1;
                                 ColumnRealeased = -1;

                                 {
                                     if (tM == null)
                                         tM = new Thread(new ThreadStart(Movements));
                                     if (!tM.IsAlive)
                                     {
                                         tM.Start();
                                     }
                                     Wait();
                                     Clicked = false;


                                     RefrigtzDLL.AllDraw.MouseClick = 0;
                                     RowClick = -1;
                                     ColumnClick = -1;
                                     RowClickP = -1;
                                     ColumnClickP = -1;
                                     RowRealesed = -1;
                                     ColumnRealeased = -1;
                                     SetBoxText("\r\nObject Cleared.");
                                     RefreshBoxText();
                                     SetBoxText("\r\nYour Ready!");
                                     RefreshBoxText();


                                 }
                             }
                             else
                             {

                                 if (tM != null)
                                 {
                                     try
                                     {
                                         tM.Abort();
                                         tM.Join();
                                         tM = null;
                                     }
                                     catch (Exception t)
                                     {
                                         Log(t);
                                     }
                                 }
                                 if ((StateCP) || Blitz)
                                 {
                                     if (Sec.radioButtonBrownOrder.Checked && OrderPlate == 1)
                                     {
                                         Person = true;
                                         BobWithPerson();



                                     }
                                 }
                             }

                         }
                     }
                     else
                         if (StateCC)
                         {
                             if (!Stockfish)
                             {
                                 if (Sec.radioButtonGrayOrder.Checked)
                                 {
                                     if (BobSection)
                                     {
                                         Clicked = true;
                                              BobAction();



                                     }
                                     else
                                     {
                                         Clicked = true;
                                         if (AliceSection)
                                         {
                                             if (t2.IsAlive) new Syncronization(t2, 1);
                                             AliceSection = false;
                                             BobSection = true;
                                                   AliceAction();


                                         }
                                     }
                                 }
                                 else
                                     if (Sec.radioButtonBrownOrder.Checked)
                                     {
                                         if (AliceSection)
                                         {
                                             Clicked = true;
                                                 AliceAction();
                                             AliceSection = false;
                                             BobSection = true;



                                         }
                                         else
                                             if (BobSection)
                                             {
                                                 AliceSection = true;
                                                 BobSection = false;
                                                     BobAction();


                                             }
                                     }
                             }
                             else
                             {
                                 if (ArrangmentsChanged)
                                 {
                                     if (Sec.radioButtonGrayOrder.Checked)
                                     {
                                         if (RefregitzisCurrent && BobSection)
                                         {
                                             if (t3.IsAlive) new Syncronization(t3, 1);

                                             BobAction();

                                             if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                             {
                                                 FenCastling = 1;
                                             }
                                             else
                                                 if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                                 {
                                                     FenCastling = 0;
                                                 }
                                                 else
                                                     FenCastling = -1;

                                             RowClickP = FormRefrigtz.LastRow;
                                             ColumnClickP = FormRefrigtz.LastColumn;
                                             RowRealesed = FormRefrigtz.NextRow;
                                             ColumnRealeased = FormRefrigtz.NextColumn;
                                             String fens = Fen();
                                             if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                             {
                                                 RefrigtzDLL.ChessRules.BigKingCastleGray = false;
                                             }
                                             else
                                                 if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                                 {
                                                     RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
                                                 }
                                             StreamWriter sw = proc.StandardInput;
                                             string input = fens + "\r\n";
                                             sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                             sw.Flush();
                                             RowClickP = -1;
                                             ColumnClickP = -1;
                                             RowRealesed = -1;
                                             ColumnRealeased = -1;
                                             //Thread.Sleep(1500);
                                             BobSection = false;
                                             
                                             GrayTimer.StopTime();
                                             BrownTimer.StartTime("BrownTimer");





                                         }
                                         else if (!BobSection)
                                         {


                                             if (OrderPlate == 1)
                                             {
                                                 SetBoxText("\r\nStockfish Number " + MovmentsNumber + " By Bob!");
                                                 RefreshBoxText();
                                             }
                                             else
                                             {
                                                 SetBoxText("\r\nStockfish Number " + MovmentsNumber + " By Alice!");
                                                 RefreshBoxText();
                                             }

                                             // RefregitzisCurrent = false;

                                             String Pre = "";
                                             if (File.Exists("output.txt"))
                                                 Pre = File.ReadAllText("output.txt");
                                             StreamWriter sw = proc.StandardInput;
                                             string input = "go depth " + comboBoxMaxLevelText + "\r\n";
                                             sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                             sw.Flush();
                                             WaitOn = true;
                                             do
                                             {
                                                 try
                                                 {
                                                     Thread.Sleep(1000);
                                                     input = "wr" + "\r\n";
                                                     sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                                     sw.Flush();
                                                     WaitOn = WaitOnMovmentOccured(Pre);
                                                 }
                                                 catch (Exception t)
                                                 {
                                                     Log(t);
                                                 }
                                             } while (WaitOn);

                                             while (WaitOn) { Thread.Sleep(100); }

                                             String wr = File.ReadAllText("output.txt");
                                             if (wr == "e8c8")
                                             {
                                                 FenCastling = 1;
                                                 RefrigtzDLL.ChessRules.BigKingCastleBrown = true;
                                             }
                                             else
                                                 if (wr == "e8g8")
                                                 {
                                                     RefrigtzDLL.ChessRules.SmallKingCastleBrown = true;
                                                     FenCastling = 0;
                                                 }
                                                 else
                                                     FenCastling = -1;
                                             int Pro = 0;
                                             if (FenCastling == -1)
                                             {
                                                 Pro = SetRowColumn(wr);
                                                 if (Pro == 0)
                                                 {
                                                     Table[(int)RowRealesed, (int)ColumnRealeased] = Table[(int)RowClickP, (int)ColumnClickP];
                                                     Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                 }
                                                 else
                                                 {
                                                     Table[(int)RowRealesed, (int)ColumnRealeased] = Pro;
                                                     Table[(int)RowClickP, (int)ColumnClickP] = 0;

                                                 }
                                             }
                                             else
                                                 if (FenCastling == 1)
                                                 {
                                                     Table[0, 0] = 0;
                                                     Table[4, 0] = 0;
                                                     Table[3, 0] = -6;
                                                     Table[4, 0] = -4;
                                                 }
                                                 else
                                                     if (FenCastling == 0)
                                                     {
                                                         Table[7, 0] = 0;
                                                         Table[4, 0] = 0;
                                                         Table[6, 0] = -6;
                                                         Table[5, 0] = -4;
                                                     }
                                             if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                                             {
                                                 RefrigtzDLL.ChessRules.BigKingCastleGray = false;
                                             }
                                             else
                                                 if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                                                 {
                                                     RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
                                                 }
                                             String fens = Fen();
                                             if (FenCastling != -1)
                                             {
                                                 RefrigtzDLL.ChessRules.BigKingCastleBrown = false;
                                                 RefrigtzDLL.ChessRules.SmallKingCastleBrown = false;

                                             }
                                             RowClickP = -1;
                                             ColumnClickP = -1;
                                             RowRealesed = -1;
                                             ColumnRealeased = -1;
                                             sw = proc.StandardInput;
                                             input = fens + "\r\n";
                                             sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                             sw.Flush();
                                             RefrigtzDLL.AllDraw.TableListAction.Add(Table);
                                             Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                             Draw.TableList.Clear();
                                             Draw.TableList.Add(Table);
                                             Draw.SetRowColumn(0);
                                             this.SetBoxText("\r\nThinking Finished by Bob!");
                                             RefreshBoxText();

                                             if (RefrigtzDLL.AllDraw.TableListAction.Count >= 1)
                                             {
                                                 RefrigtzDLL.ChessGeneticAlgorithm R = new RefrigtzDLL.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                 if (R.FindGenToModified(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], RefrigtzDLL.AllDraw.TableListAction, 0, OrderPlate, true))
                                                 {
                                                     bool HitVal = false;
                                                     int Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                                                     if (Hit != 0)
                                                         HitVal = true;
                                                     bool Convert = false;
                                                     if (OrderPlate == 1)
                                                     {
                                                         if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                                                         {
                                                             if (R.CromosomColumn == 7)
                                                                 Convert = true;
                                                         }
                                                         if ((RefrigtzDLL.ChessRules.SmallKingCastleGray || RefrigtzDLL.ChessRules.BigKingCastleGray) && (!RefrigtzDLL.ChessRules.CastleActGray))
                                                             RefrigtzDLL.ChessRules.CastleActGray = true;
                                                         RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0,OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                                                     }
                                                     else
                                                     {
                                                         if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                                                         {
                                                             if (R.CromosomColumn == 0)
                                                                 Convert = true;
                                                         }
                                                         if ((RefrigtzDLL.ChessRules.SmallKingCastleBrown || RefrigtzDLL.ChessRules.BigKingCastleBrown) && (!RefrigtzDLL.ChessRules.CastleActBrown))
                                                             RefrigtzDLL.ChessRules.CastleActBrown = true;

                                                         RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0,OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActBrown, Convert);
                                                     }
                                                     SetBoxStatistic(RefrigtzDLL.AllDraw.SyntaxToWrite);
                                                     RefreshBoxStatistic();
                                                 }
                                             }
                                             using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                                             {
                                                 soundClick.Play();
                                                 soundClick.Dispose();
                                             }


                                             OrderPlate *= -1;
                                             BobSection = true;
                                             Draw.TableList.Clear();
                                             Draw.TableList.Add(Table);
                                             Draw.SetRowColumn(0);
                                             InsertTableAtDataBase(Table);
                                             GrayTimer.StartTime("GrayTimer");
                                             BrownTimer.StopTime();






                                         }

                                     }
                                 }
                                 else
                                 {
                                     Stockfish = false;
                                     StateCC = false;
                                     StateCP = false;
                                     MessageBox.Show("Mirror Objects please!");
                                 }
                             }
                         }
                         else
                             if (StateGe)
                             {
                                    GeneticAction();



                             }


                     */

                    //while ((!StateCP && !StateCC && !StateGe && !Blitz))
                    //Thread.Sleep(1000);

                    {


                        if (RefrigtzDLL.AllDraw.MouseClick == 0 && RowClickP != -1)
                        {

                            //HitRecustruct();
                            RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                            RowClick = -1;
                            ColumnClick = -1;
                            RowClickP = -1;
                            ColumnClickP = -1;
                            RowRealesed = -1;
                            ColumnRealeased = -1;
                            RowRealesedP = -1;
                            ColumnClickP = -1;

                        }
                        else
                        {
                            if (RefrigtzDLL.AllDraw.MouseClick >= 2)
                            {

                                using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                                {
                                    soundClick.Play();
                                    soundClick.Dispose();
                                }



                            }
                        }


                        RefrigtzDLL.AllDraw.RedrawTable = false;
                    }

                }
                catch (Exception t)
                {
                    Log(t);
                }

            }
            else
            {
                if (MovmentsNumber == 1)
                {
                   
                    /*            if (Stockfish)
                                {
                                    GrayTimer.Sign = 1;
                                    BrownTimer.Sign = 1;
                                    if (OrderPlate == 1)
                                    {
                                        GrayTimer.StartTime("GrayTimer");
                                        BrownTimer.StopTime();
                                        BobSection = true;
                                        AliceSection = false;
                                        GrayTimer.StartTime("GrayTimer");
                                    }
                                    else
                                    {
                                        BrownTimer.StartTime("BrownTimer");
                                        GrayTimer.StopTime();
                                        BobSection = false;
                                        AliceSection = true;
                                        BrownTimer.StartTime("BrownTimer");
                                    }




                                }*/
                }

                QuantumRefrigiz.AllDraw.SyntaxToWrite = "";
                try
                {

                    if (QuantumRefrigiz.AllDraw.TableListAction.Count > 0)
                    {

                        if (QuantumRefrigiz.ChessGeneticAlgorithm.NoGameFounf)
                        {
                            SetBoxText("No Game Could be continued!");
                            RefreshBoxText();

                        }
                        if (QuantumRefrigiz.AllDraw.MouseClick == 0 && !QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun)
                        {
                            QuantumRefrigiz.ChessRules A = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                            Color a = Color.Gray;
                            if (OrderPlate == -1)
                                a = Color.Brown;
                            QuantumRefrigiz.ChessRules AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, OrderPlate);

                            //if (!UsePenaltyRegardMechnisam)
                            if (AA.CheckMate(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1], OrderPlate))
                            {
                                if (OrderPlate == 1 && AA.CheckMateGray)
                                {
                                    EndOfGame = true;
                                    return;
                                }
                                else
                                    if (OrderPlate == -1 && AA.CheckMateBrown)
                                {
                                    EndOfGame = true;
                                    return;
                                }
                            }

                            if (A.CheckMate(Table, OrderPlate) || A.Pat(Table, OrderPlate, a))
                            {
                                if (A.CheckMateGray || A.CheckMateBrown || EndOfGame || A.PatkGray || A.PatBrown)
                                {
                                    StateCC = false;
                                    StateCP = false;
                                    Person = false;
                                    if (A.CheckMateGray || A.CheckMateBrown)
                                        SetBoxText("\r\nCheckMate!");
                                    else if (A.PatkGray || A.PatBrown)
                                        SetBoxText("\r\nPat!");
                                    RefreshBoxText();
                                    //if (AllOperate.IsAlive)
                                    //new Syncronization(AllOperate, 1);




                                }
                                else
                                {
                                    if (A.CheckMateGray && OrderPlate == 1)


                                        if (A.CheckGray || A.CheckBrown)
                                        {
                                            if (OrderPlate == 1)

                                                SetBoxText("\r\nGray OrderPlate!Check!");
                                            else
                                                SetBoxText("\r\nBrown OrderPlate!Check!");

                                        }
                                }
                            }
                        }
                    }
                    if (Sec.radioButtonGrayOrder.Checked)
                    {
                        if (StateCC)
                        {

                            if (Stockfish)
                            {
                                if (ArrangmentsChanged)
                                {
                                    if (Blitz)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {
                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            
                                        {
                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }
                                    }
                                    else
                                        if (FullGame)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {
                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            
                                        {
                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }
                                    }
                                }
                                else
                                    MessageBox.Show("Mirror Objects Please!");
                            }
                            else//Not Stockfish
                            {
                                if (Blitz)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();
                                        AllDo = false;


                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();
                                            AllDo = false;

                                        }
                                    }
                                }
                                else
                                    if (FullGame)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();
                                        AllDo = false;


                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();
                                            AllDo = false;

                                        }
                                    }
                                }
                            }
                        }

                        else
                            if (StateCP)
                        {
                            if (Stockfish)
                            {

                                if (ArrangmentsChanged)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        Clicked = true;
                                        GrayTimer.StartTime("GrayTimer");
                                        BrownTimer.StopTime();
                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;
                                        //
                                        //
                                        //                                        
                                        QuantumRefrigiz.AllDraw.MouseClick = 0;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        Color a = Color.Brown;

                                        bool FOUND = false;
                                        QuantumRefrigiz.AllDraw THIS = null;

                                        SetDrawFounding(ref FOUND, ref THIS, false);

                                        if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                        {
                                            FenCastling = 1;
                                        }
                                        else
                                                if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                        {
                                            FenCastling = 0;
                                        }
                                        else
                                            FenCastling = -1;

                                        String fens = Fen();
                                        if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                        {
                                            QuantumRefrigiz.ChessRules.BigKingCastleGray = false;
                                        }
                                        else
                                            if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                        {
                                            QuantumRefrigiz.ChessRules.SmallKingCastleGray = false;
                                        }
                                        StreamWriter sw = proc.StandardInput;
                                        string input = fens + "\r\n";
                                        sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
                                        sw.Flush();
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        //Thread.Sleep(1500);
                                        BobSection = false;
                                        
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");
                                        AllDo = false;


                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                        MessageBox.Show("No Knowledge!");
                                }
                                else
                                    MessageBox.Show("Mirror the Objects please!");
                            }
                            else
                            {
                                if (Blitz)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {


                                        bool SCC = StateCC;
                                        bool SCP = StateCP;
                                        bool SCG = StateGe;

                                        QuantumRefrigiz.AllDraw.FoundATable = false;
                                        Clicked = true;
                                        QuantumRefrigiz.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;

                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;
                                        //
                                        //
                                        //                                        
                                        QuantumRefrigiz.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        Color a = Color.Brown;
                                        bool FOUND = false;
                                        QuantumRefrigiz.AllDraw THIS = null;


                                        //SetDrawFounding(ref FOUND, ref THIS, true);

                                        BobSection = false;
                                        StateCC = SCC;
                                        StateCP = SCP;
                                        StateGe = SCG;
                                        AllDo = false;
                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                    {
                                        if (tM != null)
                                        {
                                            try
                                            {
                                                tM.Abort();
                                                tM.Join();
                                                tM = null;
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        Person = true;

                                        AliceWithPerson();

                                        BobSection = true;

                                        AllDo = false;
                                    }
                                }
                                else
                                    if (FullGame)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {



                                        QuantumRefrigiz.AllDraw.FoundATable = false;
                                        Clicked = true;
                                        QuantumRefrigiz.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;

                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;
                                        //
                                        //
                                        //

                                        QuantumRefrigiz.AllDraw.MouseClick = 0;
                                        RowClick = -1;
                                        ColumnClick = -1;
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                        DrawQ.TableList.Clear();
                                        DrawQ.TableList.Add(Table);
                                        DrawQ.SetRowColumn(0);
                                        BobSection = false;
                                        AllDo = false;
                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                    {
                                        if (tM != null)
                                        {
                                            try
                                            {
                                                tM.Abort();
                                                tM.Join();
                                                tM = null;
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        Person = true;

                                        AliceWithPerson();

                                        BobSection = true;

                                        AllDo = false;
                                    }
                                }
                            }

                        }
                        else
                                if (StateGe)
                        {
                            if (Blitz)
                            {
                                GeneticAction();

                                AllDo = false;
                            }
                            else
                                if (FullGame)
                            {
                                GeneticAction();

                                AllDo = false;

                            }
                        }
                    }
                    else
                        if (Sec.radioButtonBrownOrder.Checked)
                    {

                        if (StateCC)
                        {
                            if (Stockfish)
                            {
                                if (ArrangmentsChanged)
                                {
                                    if (Blitz)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {
                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            
                                        {
                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }
                                    }
                                    else
                                        if (FullGame)
                                    {
                                        if (BobSection && OrderPlate == 1)//Gray is Refregitz.                                        
                                        {


                                            ComputerByComputerBobAsRefregitz(ref proc);
                                            AllDo = false;
                                        }
                                        else
                                            if (!BobSection && OrderPlate == -1)//Brow is Stockfish.                                            

                                        {

                                            ComputerByComputerAliceAsStockFish(ref proc);
                                            AllDo = false;
                                        }

                                    }
                                }
                                else
                                    MessageBox.Show("Mirror Objects Please!");
                            }
                            else//Not Stockfish
                            {
                                if (Blitz)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();

                                        AllDo = false;

                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();

                                            AllDo = false;
                                        }
                                    }
                                }
                                else
                                    if (FullGame)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        AliceSection = true;
                                        BobSection = false;
                                        BobAction();

                                        AllDo = false;


                                    }
                                    else
                                    {
                                        Clicked = true;
                                        if (AliceSection && OrderPlate == -1)
                                        {
                                            AliceSection = false;
                                            BobSection = true;
                                            AliceAction();

                                            AllDo = false;
                                        }
                                    }
                                }
                            }
                        }

                        else
                            if (StateCP)
                        {
                            if (Stockfish)
                            {

                                if (ArrangmentsChanged)
                                {
                                    if (BobSection && OrderPlate == 1)
                                    {
                                        Clicked = true;
                                        GrayTimer.StartTime("GrayTimer");
                                        BrownTimer.StopTime();
                                        if (tM == null)
                                            tM = new Thread(new ThreadStart(Movements));
                                        if (!tM.IsAlive)
                                        {
                                            tM.Start();
                                        }
                                        Wait();
                                        Clicked = false;


                                        QuantumRefrigiz.AllDraw.MouseClick = 0;
                                        SetBoxText("\r\nObject Cleared.");
                                        RefreshBoxText();
                                        SetBoxText("\r\nYour Ready!");
                                        RefreshBoxText();
                                        DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                        DrawQ.TableList.Clear();
                                        DrawQ.TableList.Add(Table);
                                        DrawQ.SetRowColumn(0);
                                        if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                        {
                                            FenCastling = 1;
                                        }
                                        else
                                            if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                        {
                                            FenCastling = 0;
                                        }
                                        else
                                            FenCastling = -1;

                                        String fens = Fen();
                                        if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                        {
                                            QuantumRefrigiz.ChessRules.BigKingCastleGray = false;
                                        }
                                        else
                                            if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                        {
                                            QuantumRefrigiz.ChessRules.SmallKingCastleGray = false;
                                        }
                                        StreamWriter sw = proc.StandardInput;
                                        string input = fens + "\r\n";
                                        sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
                                        sw.Flush();
                                        RowClickP = -1;
                                        ColumnClickP = -1;
                                        RowRealesed = -1;
                                        ColumnRealeased = -1;
                                        //Thread.Sleep(1500);
                                        BobSection = false;
                                        
                                        GrayTimer.StopTime();
                                        BrownTimer.StartTime("BrownTimer");

                                        AllDo = false;

                                    }
                                    else
                                        if (!BobSection && OrderPlate == -1)
                                        MessageBox.Show("No Knowledge!");
                                }
                                else
                                    MessageBox.Show("Mirror the Objects please!");
                            }
                            else
                                if (Blitz)
                            {
                                if (!BobSection && OrderPlate == -1)
                                {
                                    QuantumRefrigiz.AllDraw.FoundATable = false;
                                    Clicked = true;
                                    QuantumRefrigiz.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;

                                    if (tM == null)
                                        tM = new Thread(new ThreadStart(Movements));
                                    if (!tM.IsAlive)
                                    {
                                        tM.Start();
                                    }
                                    Wait();
                                    Clicked = false;


                                    QuantumRefrigiz.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;
                                    SetBoxText("\r\nObject Cleared.");
                                    RefreshBoxText();
                                    SetBoxText("\r\nYour Ready!");
                                    RefreshBoxText();
                                    //DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                    //DrawQ.TableList.Clear();
                                    //DrawQ.TableList.Add(Table);
                                    //DrawQ.SetRowColumn(0);
                                    BobSection = true;

                                    AllDo = false;
                                }
                                else
                                    if (BobSection && OrderPlate == 1)
                                {

                                    if (tM != null)
                                    {
                                        try
                                        {
                                            tM.Abort();
                                            tM.Join();
                                            tM = null;
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    Person = true;

                                    BobWithPerson();

                                    BobSection = false;

                                    AllDo = false;

                                }

                            }
                            else
                                    if (FullGame)
                            {
                                if (!BobSection && OrderPlate == -1)
                                {
                                    QuantumRefrigiz.AllDraw.FoundATable = false;
                                    Clicked = true;
                                    QuantumRefrigiz.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;

                                    if (tM == null)
                                        tM = new Thread(new ThreadStart(Movements));
                                    if (!tM.IsAlive)
                                    {
                                        tM.Start();
                                    }
                                    Wait();
                                    Clicked = false;


                                    QuantumRefrigiz.AllDraw.MouseClick = 0;
                                    RowClick = -1;
                                    ColumnClick = -1;
                                    RowClickP = -1;
                                    ColumnClickP = -1;
                                    RowRealesed = -1;
                                    ColumnRealeased = -1;
                                    SetBoxText("\r\nObject Cleared.");
                                    RefreshBoxText();
                                    SetBoxText("\r\nYour Ready!");
                                    RefreshBoxText();
                                    DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                    DrawQ.TableList.Clear();
                                    DrawQ.TableList.Add(Table);
                                    DrawQ.SetRowColumn(0);
                                    BobSection = true;
                                    AllDo = false;
                                }
                                else
                                    if (BobSection && OrderPlate == 1)
                                {
                                    GrayTimer.StartTime("GrayTimer");
                                    BrownTimer.StopTime();


                                    if (tM != null)
                                    {
                                        try
                                        {
                                            tM.Abort();
                                            tM.Join();
                                            tM = null;
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    Person = true;

                                    AliceWithPerson();

                                    BobSection = false;

                                    AllDo = false;

                                }
                            }

                        }
                        else
                                if (StateGe)
                        {
                            if (Blitz)
                            {
                                GeneticAction();
                                AllDo = false;

                            }
                            else
                                if (FullGame)
                            {
                                GeneticAction();

                                AllDo = false;
                            }
                        }
                    }


                    /* if (((StateCP) || Person || Blitz) && (!StateCC))
                     {


                         try
                         {
                             Color a = Color.Gray;
                             if (OrderPlate == -1)
                                 a = Color.Brown;
                             bool[,] Tab = new bool[8, 8];
                             if (RowClickP != -1 && ColumnClickP != -1)
                                 Tab = VeryFye(Table, OrderPlate, a);
                             if ((RowRealesed >= 0) && (RowRealesed < 8) && (ColumnRealeased >= 0) && (ColumnRealeased < 8) && ((int)(this.pictureBoxRefrigtz.Width / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Width / 8) < 8) && ((int)(this.pictureBoxRefrigtz.Height / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Height / 8) < 8))
                             {
                                 if ((RowRealesed + ColumnRealeased) % 2 == 0)
                                     g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle((int)RowRealesed, (int)ColumnRealeased, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                                 else
                                     g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle((int)RowRealesed, (int)ColumnRealeased, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                             }

                         }
                         catch (Exception t)
                         { //RunInFront();
                             Log(t);
                         }

                         int Or = 1;
                         if (Sec.radioButtonBrownOrder.Checked)
                             Or = -1;
                         if (Sec.radioButtonGrayOrder.Checked)
                         {
                             if (!Stockfish)
                             {
                                 if ((StateCP || Blitz) && (OrderPlate == Or))
                                 {


                                     QuantumRefrigiz.AllDraw.FoundATable = false;
                                     Clicked = true;
                                     QuantumRefrigiz.AllDraw.MouseClick = 0;
                                     RowClick = -1;
                                     ColumnClick = -1;
                                     RowClickP = -1;
                                     ColumnClickP = -1;
                                     RowRealesed = -1;
                                     ColumnRealeased = -1;

                                     {
                                         if (tM == null)
                                             tM = new Thread(new ThreadStart(Movements));
                                         if (!tM.IsAlive)
                                         {
                                             tM.Start();
                                         }
                                         Wait();
                                         Clicked = false;


                                         QuantumRefrigiz.AllDraw.MouseClick = 0;
                                         RowClick = -1;
                                         ColumnClick = -1;
                                         RowClickP = -1;
                                         ColumnClickP = -1;
                                         RowRealesed = -1;
                                         ColumnRealeased = -1;
                                         SetBoxText("\r\nObject Cleared.");
                                         RefreshBoxText();
                                         SetBoxText("\r\nYour Ready!");
                                         RefreshBoxText();
                                         DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                         DrawQ.TableList.Clear();
                                         DrawQ.TableList.Add(Table);
                                         DrawQ.SetRowColumn(0);


                                     }
                                 }
                                 else
                                 {

                                     if (tM != null)
                                     {
                                         try
                                         {
                                             tM.Abort();
                                             tM.Join();
                                             tM = null;
                                         }
                                         catch (Exception t)
                                         {
                                             Log(t);
                                         }
                                     }
                                     if ((StateCP) || Blitz)
                                     {
                                         if (Sec.radioButtonGrayOrder.Checked && OrderPlate == -1)
                                         {
                                             Person = true;

                                             AliceWithPerson();
                                         }
                                     }
                                 }
                             }
                             else//Stockfish with Person 
                             {
                                 if (ArrangmentsChanged)
                                 {
                                     if (BobSection)
                                     {
                                         Clicked = true;
                                         GrayTimer.StartTime("GrayTimer");
                                         BrownTimer.StopTime();
                                         if (tM == null)
                                             tM = new Thread(new ThreadStart(Movements));
                                         if (!tM.IsAlive)
                                         {
                                             tM.Start();
                                         }
                                         Wait();
                                         Clicked = false;


                                         QuantumRefrigiz.AllDraw.MouseClick = 0;
                                         SetBoxText("\r\nObject Cleared.");
                                         RefreshBoxText();
                                         SetBoxText("\r\nYour Ready!");
                                         RefreshBoxText();
                                         DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                         DrawQ.TableList.Clear();
                                         DrawQ.TableList.Add(Table);
                                         DrawQ.SetRowColumn(0);
                                         if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                         {
                                             FenCastling = 1;
                                         }
                                         else
                                             if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                             {
                                                 FenCastling = 0;
                                             }
                                             else
                                                 FenCastling = -1;

                                         String fens = Fen();
                                         if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                         {
                                             QuantumRefrigiz.ChessRules.BigKingCastleGray = false;
                                         }
                                         else
                                             if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                             {
                                                 QuantumRefrigiz.ChessRules.SmallKingCastleGray = false;
                                             }
                                         StreamWriter sw = proc.StandardInput;
                                         string input = fens + "\r\n";
                                         sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                         sw.Flush();
                                         RowClickP = -1;
                                         ColumnClickP = -1;
                                         RowRealesed = -1;
                                         ColumnRealeased = -1;
                                         //Thread.Sleep(1500);
                                         BobSection = false;
                                         
                                         GrayTimer.StopTime();
                                         BrownTimer.StartTime("BrownTimer");




                                     }
                                     else
                                         if (!BobSection)
                                         {
                                         }

                                 }
                                 else
                                 {
                                     Stockfish = false;
                                     StateCC = false;
                                     StateCP = false;
                                     MessageBox.Show("Mirror Objects please!");
                                 }

                             }
                         }
                         else if (Sec.radioButtonBrownOrder.Checked)
                         {


                             if ((StateCP || Blitz) && (OrderPlate == Or))
                             {

                                 Person = false;
                                 QuantumRefrigiz.AllDraw.FoundATable = false;
                                 Clicked = true;
                                 QuantumRefrigiz.AllDraw.MouseClick = 0;
                                 RowClick = -1;
                                 ColumnClick = -1;
                                 RowClickP = -1;
                                 ColumnClickP = -1;
                                 RowRealesed = -1;
                                 ColumnRealeased = -1;

                                 {
                                     if (tM == null)
                                         tM = new Thread(new ThreadStart(Movements));
                                     if (!tM.IsAlive)
                                     {
                                         tM.Start();
                                     }
                                     Wait();
                                     Clicked = false;


                                     QuantumRefrigiz.AllDraw.MouseClick = 0;
                                     RowClick = -1;
                                     ColumnClick = -1;
                                     RowClickP = -1;
                                     ColumnClickP = -1;
                                     RowRealesed = -1;
                                     ColumnRealeased = -1;
                                     SetBoxText("\r\nObject Cleared.");
                                     RefreshBoxText();
                                     SetBoxText("\r\nYour Ready!");
                                     RefreshBoxText();


                                 }
                             }
                             else
                             {

                                 if (tM != null)
                                 {
                                     try
                                     {
                                         tM.Abort();
                                         tM.Join();
                                         tM = null;
                                     }
                                     catch (Exception t)
                                     {
                                         Log(t);
                                     }
                                 }
                                 if ((StateCP) || Blitz)
                                 {
                                     if (Sec.radioButtonBrownOrder.Checked && OrderPlate == 1)
                                     {
                                         Person = true;
                                         BobWithPerson();



                                     }
                                 }
                             }

                         }
                     }
                     else
                         if (StateCC)
                         {
                             if (!Stockfish)
                             {
                                 if (Sec.radioButtonGrayOrder.Checked)
                                 {
                                     if (BobSection)
                                     {
                                         Clicked = true;
                                              BobAction();



                                     }
                                     else
                                     {
                                         Clicked = true;
                                         if (AliceSection)
                                         {
                                             if (t2.IsAlive) new Syncronization(t2, 1);
                                             AliceSection = false;
                                             BobSection = true;
                                                   AliceAction();


                                         }
                                     }
                                 }
                                 else
                                     if (Sec.radioButtonBrownOrder.Checked)
                                     {
                                         if (AliceSection)
                                         {
                                             Clicked = true;
                                                 AliceAction();
                                             AliceSection = false;
                                             BobSection = true;



                                         }
                                         else
                                             if (BobSection)
                                             {
                                                 AliceSection = true;
                                                 BobSection = false;
                                                     BobAction();


                                             }
                                     }
                             }
                             else
                             {
                                 if (ArrangmentsChanged)
                                 {
                                     if (Sec.radioButtonGrayOrder.Checked)
                                     {
                                         if (RefregitzisCurrent && BobSection)
                                         {
                                             if (t3.IsAlive) new Syncronization(t3, 1);

                                             BobAction();

                                             if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                             {
                                                 FenCastling = 1;
                                             }
                                             else
                                                 if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                                 {
                                                     FenCastling = 0;
                                                 }
                                                 else
                                                     FenCastling = -1;

                                             RowClickP = FormRefrigtz.LastRow;
                                             ColumnClickP = FormRefrigtz.LastColumn;
                                             RowRealesed = FormRefrigtz.NextRow;
                                             ColumnRealeased = FormRefrigtz.NextColumn;
                                             String fens = Fen();
                                             if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                             {
                                                 QuantumRefrigiz.ChessRules.BigKingCastleGray = false;
                                             }
                                             else
                                                 if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                                 {
                                                     QuantumRefrigiz.ChessRules.SmallKingCastleGray = false;
                                                 }
                                             StreamWriter sw = proc.StandardInput;
                                             string input = fens + "\r\n";
                                             sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                             sw.Flush();
                                             RowClickP = -1;
                                             ColumnClickP = -1;
                                             RowRealesed = -1;
                                             ColumnRealeased = -1;
                                             //Thread.Sleep(1500);
                                             BobSection = false;
                                             
                                             GrayTimer.StopTime();
                                             BrownTimer.StartTime("BrownTimer");





                                         }
                                         else if (!BobSection)
                                         {


                                             if (OrderPlate == 1)
                                             {
                                                 SetBoxText("\r\nStockfish Number " + MovmentsNumber + " By Bob!");
                                                 RefreshBoxText();
                                             }
                                             else
                                             {
                                                 SetBoxText("\r\nStockfish Number " + MovmentsNumber + " By Alice!");
                                                 RefreshBoxText();
                                             }

                                             // RefregitzisCurrent = false;

                                             String Pre = "";
                                             if (File.Exists("output.txt"))
                                                 Pre = File.ReadAllText("output.txt");
                                             StreamWriter sw = proc.StandardInput;
                                             string input = "go depth " + comboBoxMaxLevelText + "\r\n";
                                             sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                             sw.Flush();
                                             WaitOn = true;
                                             do
                                             {
                                                 try
                                                 {
                                                     Thread.Sleep(1000);
                                                     input = "wr" + "\r\n";
                                                     sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                                     sw.Flush();
                                                     WaitOn = WaitOnMovmentOccured(Pre);
                                                 }
                                                 catch (Exception t)
                                                 {
                                                     Log(t);
                                                 }
                                             } while (WaitOn);

                                             while (WaitOn) { Thread.Sleep(100); }

                                             String wr = File.ReadAllText("output.txt");
                                             if (wr == "e8c8")
                                             {
                                                 FenCastling = 1;
                                                 QuantumRefrigiz.ChessRules.BigKingCastleBrown = true;
                                             }
                                             else
                                                 if (wr == "e8g8")
                                                 {
                                                     QuantumRefrigiz.ChessRules.SmallKingCastleBrown = true;
                                                     FenCastling = 0;
                                                 }
                                                 else
                                                     FenCastling = -1;
                                             int Pro = 0;
                                             if (FenCastling == -1)
                                             {
                                                 Pro = SetRowColumn(wr);
                                                 if (Pro == 0)
                                                 {
                                                     Table[(int)RowRealesed, (int)ColumnRealeased] = Table[(int)RowClickP, (int)ColumnClickP];
                                                     Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                 }
                                                 else
                                                 {
                                                     Table[(int)RowRealesed, (int)ColumnRealeased] = Pro;
                                                     Table[(int)RowClickP, (int)ColumnClickP] = 0;

                                                 }
                                             }
                                             else
                                                 if (FenCastling == 1)
                                                 {
                                                     Table[0, 0] = 0;
                                                     Table[4, 0] = 0;
                                                     Table[3, 0] = -6;
                                                     Table[4, 0] = -4;
                                                 }
                                                 else
                                                     if (FenCastling == 0)
                                                     {
                                                         Table[7, 0] = 0;
                                                         Table[4, 0] = 0;
                                                         Table[6, 0] = -6;
                                                         Table[5, 0] = -4;
                                                     }
                                             if (QuantumRefrigiz.ChessRules.BigKingCastleGray)
                                             {
                                                 QuantumRefrigiz.ChessRules.BigKingCastleGray = false;
                                             }
                                             else
                                                 if (QuantumRefrigiz.ChessRules.SmallKingCastleGray)
                                                 {
                                                     QuantumRefrigiz.ChessRules.SmallKingCastleGray = false;
                                                 }
                                             String fens = Fen();
                                             if (FenCastling != -1)
                                             {
                                                 QuantumRefrigiz.ChessRules.BigKingCastleBrown = false;
                                                 QuantumRefrigiz.ChessRules.SmallKingCastleBrown = false;

                                             }
                                             RowClickP = -1;
                                             ColumnClickP = -1;
                                             RowRealesed = -1;
                                             ColumnRealeased = -1;
                                             sw = proc.StandardInput;
                                             input = fens + "\r\n";
                                             sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                                             sw.Flush();
                                             QuantumRefrigiz.AllDraw.TableListAction.Add(Table);
                                             DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound,IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                             DrawQ.TableList.Clear();
                                             DrawQ.TableList.Add(Table);
                                             DrawQ.SetRowColumn(0);
                                             this.SetBoxText("\r\nThinking Finished by Bob!");
                                             RefreshBoxText();

                                             if (QuantumRefrigiz.AllDraw.TableListAction.Count >= 1)
                                             {
                                                 QuantumRefrigiz.ChessGeneticAlgorithm R = new QuantumRefrigiz.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                 if (R.FindGenToModified(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2], QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1], QuantumRefrigiz.AllDraw.TableListAction, 0, OrderPlate, true))
                                                 {
                                                     bool HitVal = false;
                                                     int Hit = QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                                                     if (Hit != 0)
                                                         HitVal = true;
                                                     bool Convert = false;
                                                     if (OrderPlate == 1)
                                                     {
                                                         if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                                                         {
                                                             if (R.CromosomColumn == 7)
                                                                 Convert = true;
                                                         }
                                                         if ((QuantumRefrigiz.ChessRules.SmallKingCastleGray || QuantumRefrigiz.ChessRules.BigKingCastleGray) && (!QuantumRefrigiz.ChessRules.CastleActGray))
                                                             QuantumRefrigiz.ChessRules.CastleActGray = true;
                                                         QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0,OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActGray, Convert);
                                                     }
                                                     else
                                                     {
                                                         if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                                                         {
                                                             if (R.CromosomColumn == 0)
                                                                 Convert = true;
                                                         }
                                                         if ((QuantumRefrigiz.ChessRules.SmallKingCastleBrown || QuantumRefrigiz.ChessRules.BigKingCastleBrown) && (!QuantumRefrigiz.ChessRules.CastleActBrown))
                                                             QuantumRefrigiz.ChessRules.CastleActBrown = true;

                                                         QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0,OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActBrown, Convert);
                                                     }
                                                     SetBoxStatistic(QuantumRefrigiz.AllDraw.SyntaxToWrite);
                                                     RefreshBoxStatistic();
                                                 }
                                             }
                                             using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                                             {
                                                 soundClick.Play();
                                                 soundClick.Dispose();
                                             }


                                             OrderPlate *= -1;
                                             BobSection = true;
                                             DrawQ.TableList.Clear();
                                             DrawQ.TableList.Add(Table);
                                             Draw.SetRowColumn(0);
                                             InsertTableAtDataBase(Table);
                                             GrayTimer.StartTime("GrayTimer");
                                             BrownTimer.StopTime();






                                         }

                                     }
                                 }
                                 else
                                 {
                                     Stockfish = false;
                                     StateCC = false;
                                     StateCP = false;
                                     MessageBox.Show("Mirror Objects please!");
                                 }
                             }
                         }
                         else
                             if (StateGe)
                             {
                                    GeneticAction();



                             }


                     */

                    //while ((!StateCP && !StateCC && !StateGe && !Blitz))
                    //Thread.Sleep(1000);

                    {


                        if (QuantumRefrigiz.AllDraw.MouseClick == 0 && RowClickP != -1)
                        {

                            //HitRecustruct();
                            QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                            RowClick = -1;
                            ColumnClick = -1;
                            RowClickP = -1;
                            ColumnClickP = -1;
                            RowRealesed = -1;
                            ColumnRealeased = -1;
                            RowRealesedP = -1;
                            ColumnClickP = -1;

                        }
                        else
                        {
                            if (QuantumRefrigiz.AllDraw.MouseClick >= 2)
                            {

                                using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                                {
                                    soundClick.Play();
                                    soundClick.Dispose();
                                }



                            }
                        }


                        QuantumRefrigiz.AllDraw.RedrawTable = false;
                    }

                }
                catch (Exception t)
                {
                    Log(t);
                }
            }


        }
        //Error Handling.
        static void Log(Exception ex)
        {
            try
            {
                Object a = new Object();
                lock (a)
                {
                    string stackTrace = ex.ToString();
                    File.AppendAllText(Root + "\\ErrorProgramRun.txt", stackTrace + ": On" + DateTime.Now.ToString()); // path of file where stack trace will be stored.
                }
            }
            catch (Exception t) { Log(t); }
        }
        //Constructor No2
        public FormRefrigtz(bool AllDra)
        {

            AllDrawLoad = AllDra;
            InitializeComponent();
            X1 = textBoxText.Location.X;
            Y1 = textBoxText.Location.Y - 30;
            X2 = textBoxText.Location.X;
            Y2 = textBoxText.Location.Y + 30 + textBoxText.Size.Height;
            if (!AllDrawLoad)
            {
                this.pictureBoxRefrigtz.Size = new Size((this.pictureBoxRefrigtz.Width / 8) * 8, (this.pictureBoxRefrigtz.Height / 8) * 8);

                t1 = new Thread(new ThreadStart(AliceWithPerson));
                t2 = new Thread(new ThreadStart(BobAction));
                t3 = new Thread(new ThreadStart(AliceAction));
                t4 = new Thread(new ThreadStart(GeneticAction));
                //tttt = new Thread(new ThreadStart(SetRefregitzDLL));
                //ttt = new Thread(new ThreadStart(SetNodesCount));
            }


            if (!Quantum)
            {
                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 8; j++)
                    {
                        RefrigtzDLL.AllDraw.TableVeryfy[i, j] = Table[i, j];
                        RefrigtzDLL.AllDraw.TableVeryfyConst[i, j] = Table[i, j];
                    }
                }
                RefrigtzDLL.ThinkingChess.LearniningTable = new LearningMachine.NetworkQuantumLearningKrinskyAtamata(8, 8, 8);
            }
            else
            {
                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 8; j++)
                    {
                        QuantumRefrigiz.AllDraw.TableVeryfy[i, j] = Table[i, j];
                        QuantumRefrigiz.AllDraw.TableVeryfyConst[i, j] = Table[i, j];
                    }
                }
                QuantumRefrigiz.ThinkingQuantumChess.LearniningTable = new LearningMachine.NetworkQuantumLearningKrinskyAtamata(8, 8, 8);
            }
            try
            {
                if (System.IO.File.Exists(Root + "\\Database\\CurrentBank.accdb"))
                {
                    if (bookConn != null)
                        bookConn.Close();
                    bookConn = new OleDbConnection(connParam);
                    oleDbCmd.Connection = bookConn;

                }
            }
            catch (FileNotFoundException t)
            {
                Log(t);

            }

        }

        //Acccess Point

        //Syncronization Between Class Dlls.
        private void SetTimerDLL()
        {
            SetTimer = true;
            do
            {
                //Thread.Sleep(2);
                Object O = new Object();
                lock (O)
                {
                    if (!Quantum)
                    {
                        //while (!StateCC && !StateCP && !StateGe)
                        Refrigtz.Timer.AStarGreadyFirstSearch = RefrigtzDLL.AllDraw.AStarGreadyFirstSearch;
                        Refrigtz.Timer.AStarGreedytiLevelMax = RefrigtzDLL.AllDraw.AStarGreedyiLevelMax;
                        Refrigtz.Timer.UseDoubleTime = RefrigtzDLL.AllDraw.UseDoubleTime;
                        Refrigtz.Timer.StoreAllDrawCount = RefrigtzDLL.AllDraw.StoreADraw.Count;
                    }
                    else
                    {
                        Refrigtz.Timer.AStarGreadyFirstSearch = QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch;
                        Refrigtz.Timer.AStarGreedytiLevelMax = QuantumRefrigiz.AllDraw.AStarGreedyiLevelMax;
                        Refrigtz.Timer.UseDoubleTime = QuantumRefrigiz.AllDraw.UseDoubleTime;
                        Refrigtz.Timer.StoreAllDrawCount = QuantumRefrigiz.AllDraw.StoreADraw.Count;
                    }
                }
                System.Threading.Thread.Sleep(2);
            }
            while (true);
            //SetTimer = false;

        }
        delegate void SetlableRefregitzMaxValueCalBack(Label Refregitz, String value);
        private void SetlableRefregitzMaxValue(Label Refregitz, String value)
        {
            try
            {
                Object O = new Object();
                lock (O)
                {
                    if (Refregitz.InvokeRequired)
                    {
                        SetlableRefregitzMaxValueCalBack d = new SetlableRefregitzMaxValueCalBack(SetlableRefregitzMaxValue);
                        //Refregitz.Text = "";
                        Refregitz.Invoke(new Action(() => Refregitz.Text = value));
                        //Refregitz.Text = value;
                        //SetlableRefregitzRefresh(Refregitz);
                        //Refregitz.Refresh();
                    }
                    else
                    {
                        //Refregitz.Text = "";
                        Refregitz.Text = value;
                        // SetlableRefregitzRefresh(Refregitz);
                        Refregitz.Refresh();
                    }
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }
        delegate void SetlableRefregitzRefreshCalBack(Label Refregitz);
        private void SetlableRefregitzRefresh(Label Refregitz)
        {
            try
            {
                Object O = new Object();
                lock (O)
                {
                    if (Refregitz.InvokeRequired)
                    {
                        SetlableRefregitzRefreshCalBack d = new SetlableRefregitzRefreshCalBack(SetlableRefregitzRefresh);
                        Refregitz.Refresh();
                    }
                    else
                    {

                        Refregitz.Refresh();
                    }
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }
        delegate void SetprogressBarRefregitzValueCalBack(ProgressBar Refregitz, Int32 value);
        private void SetprogressBarRefregitzValue(ProgressBar Refregitz, Int32 value)
        {
            try
            {
                if (Refregitz.InvokeRequired)
                {
                    SetprogressBarRefregitzValueCalBack d = new SetprogressBarRefregitzValueCalBack(SetprogressBarRefregitzValue);
                    Refregitz.Invoke(new Action(() => Refregitz.Value = value));
                }
                else
                {
                    Refregitz.Value = value;
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }
        delegate void SetPictureBoxRefregitzUpdateCalBack(PictureBox Refregitz);
        private void SetPrictureBoxRefregitzUpdate(PictureBox Refregitz)
        {
            try
            {
                if (Refregitz.InvokeRequired)
                {
                    SetPictureBoxRefregitzUpdateCalBack d = new SetPictureBoxRefregitzUpdateCalBack(SetPrictureBoxRefregitzUpdate);
                    Refregitz.Invoke(new Action(() => Refregitz.Update()));
                }
                else
                {
                    Refregitz.Update();
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }
        delegate void SetPictureBoxRefregitzInvalidateCalBack(PictureBox Refregitz);
        private void SetPrictureBoxRefregitzInvalidate(PictureBox Refregitz)
        {
            try
            {
                if (Refregitz.InvokeRequired)
                {
                    SetPictureBoxRefregitzInvalidateCalBack d = new SetPictureBoxRefregitzInvalidateCalBack(SetPrictureBoxRefregitzInvalidate);
                    Refregitz.Invoke(new Action(() => Refregitz.Invalidate()));
                }
                else
                {
                    Refregitz.Invalidate();
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }
        delegate void SetprogressBarRefregitzMaxValueCalBack(ProgressBar Refregitz, Int32 value);
        private void SetprogressBarRefregitzMaxValue(ProgressBar Refregitz, Int32 value)
        {
            try
            {
                if (Refregitz.InvokeRequired)
                {
                    SetprogressBarRefregitzMaxValueCalBack d = new SetprogressBarRefregitzMaxValueCalBack(SetprogressBarRefregitzMaxValue);
                    Refregitz.Invoke(new Action(() => Refregitz.Maximum = value));
                }
                else
                {
                    Refregitz.Maximum = value;
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }

        //Boolean Setting of Illustration at Slected Object Rules.
        bool[,] VeryFye(int[,] Table, int Order, Color a)
        {
            int Cdummy = 0;
            if (!Quantum)
            {
                Cdummy = RefrigtzDLL.ChessRules.CurrentOrder;
                if (OrderPlate == 1)
                    RefrigtzDLL.ChessRules.CurrentOrder = 1;
                else
                    RefrigtzDLL.ChessRules.CurrentOrder = -1;
            }
            else
            {
                Cdummy = QuantumRefrigiz.ChessRules.CurrentOrder;
                if (OrderPlate == 1)
                    QuantumRefrigiz.ChessRules.CurrentOrder = 1;
                else
                    QuantumRefrigiz.ChessRules.CurrentOrder = -1;
            }
            bool[,] Tab = new bool[8, 8];

            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 8; j++)
                {
                    if (!Quantum)
                    {
                        if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Table[(int)RowClickP, (int)ColumnClickP], Table, Order, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, i, j, a, Table[(int)RowClickP, (int)ColumnClickP]))
                            Tab[i, j] = true;
                    }
                    else
                    {
                        if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Table[(int)RowClickP, (int)ColumnClickP], Table, Order, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, i, j, a, Table[(int)RowClickP, (int)ColumnClickP]))
                            Tab[i, j] = true;
                    }

                }
            }
            if (!Quantum)
                RefrigtzDLL.ChessRules.CurrentOrder = Cdummy;
            else
                QuantumRefrigiz.ChessRules.CurrentOrder = Cdummy;
            return Tab;
        }
        //Delegate Of Form Close Visibility.
        delegate void SetCloseVisibleCallback();

        public void SetCloseVisible()
        {
            // InvokeRequired required compares the thread ID of the
            // calling thread to the thread ID of the creating thread.
            // If these threads are different, it returns true.
            if (this.InvokeRequired)
            {
                try
                {

                    SetCloseVisibleCallback d = new SetCloseVisibleCallback(SetCloseVisible);
                    this.Invoke(new Action(() => this.Close()));
                }
                catch (Exception t) { Log(t); }
            }
            else
            {
                try
                {
                    this.Close();
                }
                catch (Exception t) { Log(t); }
            }

        }
        void SetImageOfPictrueBox(ref PictureBox Ap, int
            Hit)
        {
            if (Hit > 0)
            {
                if (Hit == 1)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\SG.png");
                else
                    if (Hit == 2)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\EG.png");
                else
                        if (Hit == 3)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\HG.png");
                else
                            if (Hit == 4)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\BrG.png");
                else
                                if (Hit == 5)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\MG.png");
            }
            else
            {
                if (Hit == -1)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\SB.png");
                else
                    if (Hit == -2)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\EB.png");
                else
                        if (Hit == -3)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\HB.png");
                else
                            if (Hit == -4)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\BrB.png");
                else
                                if (Hit == -5)
                    Ap.Image = Image.FromFile(Root + "\\Images\\Fit\\Small\\MB.png");
            }
            //Ap.BringToFront();
        }
        public void SetObjectInPictureBox(int R, int C)
        {
            if (!Quantum)
            {
                int Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R, C];
                if (Hit > 0)
                {
                    if (GrayCountHiiting == 1)
                        SetImageOfPictrueBox(ref pictureBox1, Hit);
                    else
                        if (GrayCountHiiting == 2)
                        SetImageOfPictrueBox(ref pictureBox2, Hit);
                    else
                            if (GrayCountHiiting == 3)
                        SetImageOfPictrueBox(ref pictureBox3, Hit);
                    else
                                if (GrayCountHiiting == 4)
                        SetImageOfPictrueBox(ref pictureBox4, Hit);
                    else
                                    if (GrayCountHiiting == 5)
                        SetImageOfPictrueBox(ref pictureBox5, Hit);
                    else
                                        if (GrayCountHiiting == 6)
                        SetImageOfPictrueBox(ref pictureBox6, Hit);
                    else
                                            if (GrayCountHiiting == 7)
                        SetImageOfPictrueBox(ref pictureBox7, Hit);
                    else
                                                if (GrayCountHiiting == 8)
                        SetImageOfPictrueBox(ref pictureBox8, Hit);
                    else
                                                    if (GrayCountHiiting == 9)
                        SetImageOfPictrueBox(ref pictureBox9, Hit);
                    else
                                                        if (GrayCountHiiting == 10)
                        SetImageOfPictrueBox(ref pictureBox10, Hit);
                    else
                                                            if (GrayCountHiiting == 11)
                        SetImageOfPictrueBox(ref pictureBox11, Hit);
                    else
                                                                if (GrayCountHiiting == 12)
                        SetImageOfPictrueBox(ref pictureBox12, Hit);
                    else
                                                                    if (GrayCountHiiting == 13)
                        SetImageOfPictrueBox(ref pictureBox13, Hit);
                    else
                                                                        if (GrayCountHiiting == 14)
                        SetImageOfPictrueBox(ref pictureBox14, Hit);
                    else
                                                                            if (GrayCountHiiting == 15)
                        SetImageOfPictrueBox(ref pictureBox15, Hit);
                    else
                                                                                if (GrayCountHiiting == 16)
                        SetImageOfPictrueBox(ref pictureBox16, Hit);
                    GrayCountHiiting++;
                }
                else if (Hit < 0)
                {
                    if (BrownCountHiiting == 17)
                        SetImageOfPictrueBox(ref pictureBox17, Hit);
                    else
                        if (BrownCountHiiting == 18)
                        SetImageOfPictrueBox(ref pictureBox18, Hit);
                    else
                            if (BrownCountHiiting == 19)
                        SetImageOfPictrueBox(ref pictureBox19, Hit);
                    else
                                if (BrownCountHiiting == 20)
                        SetImageOfPictrueBox(ref pictureBox20, Hit);
                    else
                                    if (BrownCountHiiting == 21)
                        SetImageOfPictrueBox(ref pictureBox21, Hit);
                    else
                                        if (BrownCountHiiting == 22)
                        SetImageOfPictrueBox(ref pictureBox22, Hit);
                    else
                                            if (BrownCountHiiting == 23)
                        SetImageOfPictrueBox(ref pictureBox23, Hit);
                    else
                                                if (BrownCountHiiting == 24)
                        SetImageOfPictrueBox(ref pictureBox24, Hit);
                    else
                                                    if (BrownCountHiiting == 25)
                        SetImageOfPictrueBox(ref pictureBox25, Hit);
                    else
                                                        if (BrownCountHiiting == 26)
                        SetImageOfPictrueBox(ref pictureBox26, Hit);
                    else
                                                            if (BrownCountHiiting == 27)
                        SetImageOfPictrueBox(ref pictureBox27, Hit);
                    else
                                                                if (BrownCountHiiting == 28)
                        SetImageOfPictrueBox(ref pictureBox28, Hit);
                    else
                                                                    if (BrownCountHiiting == 29)
                        SetImageOfPictrueBox(ref pictureBox29, Hit);
                    else
                                                                        if (BrownCountHiiting == 30)
                        SetImageOfPictrueBox(ref pictureBox30, Hit);
                    else
                                                                            if (BrownCountHiiting == 31)
                        SetImageOfPictrueBox(ref pictureBox31, Hit);
                    else
                                                                                if (BrownCountHiiting == 32)
                        SetImageOfPictrueBox(ref pictureBox32, Hit);
                    BrownCountHiiting++;
                }

            }
            else
            {
                int Hit = QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R, C];
                if (Hit > 0)
                {
                    if (GrayCountHiiting == 1)
                        SetImageOfPictrueBox(ref pictureBox1, Hit);
                    else
                        if (GrayCountHiiting == 2)
                        SetImageOfPictrueBox(ref pictureBox2, Hit);
                    else
                            if (GrayCountHiiting == 3)
                        SetImageOfPictrueBox(ref pictureBox3, Hit);
                    else
                                if (GrayCountHiiting == 4)
                        SetImageOfPictrueBox(ref pictureBox4, Hit);
                    else
                                    if (GrayCountHiiting == 5)
                        SetImageOfPictrueBox(ref pictureBox5, Hit);
                    else
                                        if (GrayCountHiiting == 6)
                        SetImageOfPictrueBox(ref pictureBox6, Hit);
                    else
                                            if (GrayCountHiiting == 7)
                        SetImageOfPictrueBox(ref pictureBox7, Hit);
                    else
                                                if (GrayCountHiiting == 8)
                        SetImageOfPictrueBox(ref pictureBox8, Hit);
                    else
                                                    if (GrayCountHiiting == 9)
                        SetImageOfPictrueBox(ref pictureBox9, Hit);
                    else
                                                        if (GrayCountHiiting == 10)
                        SetImageOfPictrueBox(ref pictureBox10, Hit);
                    else
                                                            if (GrayCountHiiting == 11)
                        SetImageOfPictrueBox(ref pictureBox11, Hit);
                    else
                                                                if (GrayCountHiiting == 12)
                        SetImageOfPictrueBox(ref pictureBox12, Hit);
                    else
                                                                    if (GrayCountHiiting == 13)
                        SetImageOfPictrueBox(ref pictureBox13, Hit);
                    else
                                                                        if (GrayCountHiiting == 14)
                        SetImageOfPictrueBox(ref pictureBox14, Hit);
                    else
                                                                            if (GrayCountHiiting == 15)
                        SetImageOfPictrueBox(ref pictureBox15, Hit);
                    else
                                                                                if (GrayCountHiiting == 16)
                        SetImageOfPictrueBox(ref pictureBox16, Hit);
                    GrayCountHiiting++;
                }
                else if (Hit < 0)
                {
                    if (BrownCountHiiting == 17)
                        SetImageOfPictrueBox(ref pictureBox17, Hit);
                    else
                        if (BrownCountHiiting == 18)
                        SetImageOfPictrueBox(ref pictureBox18, Hit);
                    else
                            if (BrownCountHiiting == 19)
                        SetImageOfPictrueBox(ref pictureBox19, Hit);
                    else
                                if (BrownCountHiiting == 20)
                        SetImageOfPictrueBox(ref pictureBox20, Hit);
                    else
                                    if (BrownCountHiiting == 21)
                        SetImageOfPictrueBox(ref pictureBox21, Hit);
                    else
                                        if (BrownCountHiiting == 22)
                        SetImageOfPictrueBox(ref pictureBox22, Hit);
                    else
                                            if (BrownCountHiiting == 23)
                        SetImageOfPictrueBox(ref pictureBox23, Hit);
                    else
                                                if (BrownCountHiiting == 24)
                        SetImageOfPictrueBox(ref pictureBox24, Hit);
                    else
                                                    if (BrownCountHiiting == 25)
                        SetImageOfPictrueBox(ref pictureBox25, Hit);
                    else
                                                        if (BrownCountHiiting == 26)
                        SetImageOfPictrueBox(ref pictureBox26, Hit);
                    else
                                                            if (BrownCountHiiting == 27)
                        SetImageOfPictrueBox(ref pictureBox27, Hit);
                    else
                                                                if (BrownCountHiiting == 28)
                        SetImageOfPictrueBox(ref pictureBox28, Hit);
                    else
                                                                    if (BrownCountHiiting == 29)
                        SetImageOfPictrueBox(ref pictureBox29, Hit);
                    else
                                                                        if (BrownCountHiiting == 30)
                        SetImageOfPictrueBox(ref pictureBox30, Hit);
                    else
                                                                            if (BrownCountHiiting == 31)
                        SetImageOfPictrueBox(ref pictureBox31, Hit);
                    else
                                                                                if (BrownCountHiiting == 32)
                        SetImageOfPictrueBox(ref pictureBox32, Hit);
                    BrownCountHiiting++;
                }
            }
        }

        void SetNodesCount()
        {
            SetNode = true;
            //do
            {
                Object O = new Object();
                lock (O)
                {
                    if (!Quantum)
                    {
                        Int64 FirstTimeD = DateTime.Now.Hour * 3600000 + DateTime.Now.Minute * 60000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
                        Int64 FirstNode = RefrigtzDLL.ThinkingChess.NumbersOfAllNode;
                        Thread.Sleep(1000);
                        Int64 EndTime = DateTime.Now.Hour * 3600000 + DateTime.Now.Minute * 60000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
                        Double S = ((double)RefrigtzDLL.ThinkingChess.NumbersOfAllNode - FirstNode) / (((double)EndTime - (double)FirstTimeD) / 1000.0);
                        Store = ((Store * Count) + S) / (Count + 1.0);
                        Count++;
                        if (RefrigtzDLL.AllDraw.ActionStringReady)
                            SetlableRefregitzMaxValue(labelNodesCount, RefrigtzDLL.ThinkingChess.NumbersOfAllNode.ToString() + " at time " + ((int)(Store)).ToString() + "N/s and by Elapsed time " + ((int)((EndTime - TimeElapsed) / 1000)).ToString() + " s by string" + RefrigtzDLL.AllDraw.ActionString.ToString() + " By CheckMate Count " + RefrigtzDLL.ThinkingChess.FoundFirstMating.ToString() + " By CheckMate SELF Count " + RefrigtzDLL.ThinkingChess.FoundFirstSelfMating.ToString() + " For Order  " + RefrigtzDLL.AllDraw.OrderPlate.ToString());
                        else
                            SetlableRefregitzMaxValue(labelNodesCount, RefrigtzDLL.ThinkingChess.NumbersOfAllNode.ToString() + " at time " + ((int)(Store)).ToString() + "N/s and by Elapsed time " + ((int)((EndTime - TimeElapsed) / 1000)).ToString() + " s" + " By CheckMate Count " + RefrigtzDLL.ThinkingChess.FoundFirstMating.ToString() + " By CheckMate SELF Count " + RefrigtzDLL.ThinkingChess.FoundFirstSelfMating.ToString() + " For Order  " + RefrigtzDLL.AllDraw.OrderPlate.ToString());
                    }
                    else
                    {
                        Int64 FirstTimeD = DateTime.Now.Hour * 3600000 + DateTime.Now.Minute * 60000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
                        Int64 FirstNode = QuantumRefrigiz.ThinkingQuantumChess.NumbersOfAllNode;
                        Thread.Sleep(1000);
                        Int64 EndTime = DateTime.Now.Hour * 3600000 + DateTime.Now.Minute * 60000 + DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;
                        Double S = ((double)QuantumRefrigiz.ThinkingQuantumChess.NumbersOfAllNode - FirstNode) / (((double)EndTime - (double)FirstTimeD) / 1000.0);
                        Store = ((Store * Count) + S) / (Count + 1.0);
                        Count++;
                        if (QuantumRefrigiz.AllDraw.ActionStringReady)
                            SetlableRefregitzMaxValue(labelNodesCount, QuantumRefrigiz.ThinkingQuantumChess.NumbersOfAllNode.ToString() + " at time " + ((int)(Store)).ToString() + "N/s and by Elapsed time " + ((int)((EndTime - TimeElapsed) / 1000)).ToString() + " s by string" + QuantumRefrigiz.AllDraw.ActionString.ToString() + " By CheckMate Count " + QuantumRefrigiz.ThinkingQuantumChess.FoundFirstMating.ToString() + " By CheckMate SELF Count " + QuantumRefrigiz.ThinkingQuantumChess.FoundFirstSelfMating.ToString() + " For Order  " + QuantumRefrigiz.AllDraw.OrderPlate.ToString());
                        else
                            SetlableRefregitzMaxValue(labelNodesCount, QuantumRefrigiz.ThinkingQuantumChess.NumbersOfAllNode.ToString() + " at time " + ((int)(Store)).ToString() + "N/s and by Elapsed time " + ((int)((EndTime - TimeElapsed) / 1000)).ToString() + " s" + " By CheckMate Count " + QuantumRefrigiz.ThinkingQuantumChess.FoundFirstMating.ToString() + " By CheckMate SELF Count " + QuantumRefrigiz.ThinkingQuantumChess.FoundFirstSelfMating.ToString() + " For Order  " + QuantumRefrigiz.AllDraw.OrderPlate.ToString());
                    }
                    //System.Threading.Thread.Sleep(1);

                }
            } //while (true);
            //SetNode = false;
        }

        void SetRefregitzDLL()
        {
            bool Set = false;
            SetDLL = true;
            //do
            {
                Object o = new Object();
                lock (o)
                {
                    if (!Quantum)
                    {
                        //System.Threading.Thread.Sleep(10);
                        RefrigtzDLL.AllDraw.Root = Root;
                        RefrigtzDLL.AllDraw.OrderPlate = OrderPlate;
                        RefrigtzDLL.AllDraw.Blitz = Blitz;
                        ConvertWait = RefrigtzDLL.AllDraw.ConvertWait;
                        RefrigtzDLL.AllDraw.Stockfish = Stockfish;
                        RefrigtzDLL.AllDraw.Person = Person;
                        RefrigtzDLL.AllDraw.THISSecradioButtonGrayOrderChecked = Sec.radioButtonGrayOrder.Checked;
                        RefrigtzDLL.AllDraw.THISSecradioButtonBrownOrderChecked = Sec.radioButtonBrownOrder.Checked;
                        RefrigtzDLL.AllDraw.MovmentsNumber = MovmentsNumber;
                        /*while (!(RefrigtzDLL.ChessRules.ObjectHittedRow != -1 && RefrigtzDLL.ChessRules.ObjectHittedColumn != -1) &&
                            (!RefrigtzDLL.AllDraw.ActionStringReady) &&
                                 (!(RefrigtzDLL.AllDraw.H); != "")) &&
                                     (!(RefrigtzDLL.AllDraw.ConvertedKind == -1)) &&
                                         (!StateCC) &&
                                             (!StateCP))
                        {
                            //Thread.Sleep(2);

                        }*/
                        if (RefrigtzDLL.ChessRules.ObjectHittedRow != -1 && RefrigtzDLL.ChessRules.ObjectHittedColumn != -1)
                        {
                            SetObjectInPictureBox(RefrigtzDLL.ChessRules.ObjectHittedRow, RefrigtzDLL.ChessRules.ObjectHittedColumn);
                            RefrigtzDLL.ChessRules.ObjectHittedRow = -1;
                            RefrigtzDLL.ChessRules.ObjectHittedColumn = -1;
                        }
                        if (RefrigtzDLL.AllDraw.ActionStringReady)
                        {
                            SetBoxText(RefrigtzDLL.AllDraw.ActionString.ToString());
                            RefrigtzDLL.AllDraw.ActionString = new StringBuilder("");
                            RefrigtzDLL.AllDraw.ActionStringReady = false;
                            RefreshBoxText();
                        }

                        if (RefrigtzDLL.AllDraw.OutPut.ToString() != "")
                        {
                            SetBoxText(RefrigtzDLL.AllDraw.OutPut.ToString());
                            RefrigtzDLL.AllDraw.OutPut= new StringBuilder( "");
                            RefreshBoxText();

                        }


                        if (RefrigtzDLL.AllDraw.ConvertedKind == -1)
                        {
                            FormُSelectItems.Items = -1;
                            FormُSelectItems A = new FormُSelectItems();
                            A.ShowDialog();


                            while (RefrigtzDLL.AllDraw.ConvertedKind == -1) { RefrigtzDLL.AllDraw.ConvertedKind = FormُSelectItems.Items; Thread.Sleep(2); }


                        }

                        if (LoadedDLL)
                        {
                            SetcomboBoxText();
                            LoadedDLL = false;
                        }
                        //public static AllDraw THISDummy;
                        RefrigtzDLL.AllDraw.StateCP = StateCP;
                        RefrigtzDLL.AllDraw.StateCC = StateCC;
                        if (StateCP && (!Stockfish))
                        {
                            if (OrderPlate == -1 && Sec.radioButtonGrayOrder.Checked)
                            {
                                LastRow = RefrigtzDLL.AllDraw.LastRow;
                                LastColumn = RefrigtzDLL.AllDraw.LastColumn;
                                NextRow = RefrigtzDLL.AllDraw.NextRow;
                                NextColumn = RefrigtzDLL.AllDraw.NextRow;
                            }
                            else if (OrderPlate == 1 && Sec.radioButtonBrownOrder.Checked)
                            {
                                LastRow = RefrigtzDLL.AllDraw.LastRow;
                                LastColumn = RefrigtzDLL.AllDraw.LastColumn;
                                NextRow = RefrigtzDLL.AllDraw.NextRow;
                                NextColumn = RefrigtzDLL.AllDraw.NextRow;
                            }
                        }
                        else
                                if (StateCP && Stockfish)
                        {
                            if (OrderPlate == -1 && Sec.radioButtonGrayOrder.Checked)
                            {
                                LastRow = RefrigtzDLL.AllDraw.LastRow;
                                LastColumn = RefrigtzDLL.AllDraw.LastColumn;
                                NextRow = RefrigtzDLL.AllDraw.NextRow;
                                NextColumn = RefrigtzDLL.AllDraw.NextRow;
                            }
                        }
                        //System.Threading.Thread.Sleep(2);

                    }
                    else
                    {
                        //System.Threading.Thread.Sleep(10);
                        QuantumRefrigiz.AllDraw.Root = Root;
                        QuantumRefrigiz.AllDraw.OrderPlate = OrderPlate;
                        QuantumRefrigiz.AllDraw.Blitz = Blitz;
                        ConvertWait = QuantumRefrigiz.AllDraw.ConvertWait;
                        QuantumRefrigiz.AllDraw.Stockfish = Stockfish;
                        QuantumRefrigiz.AllDraw.Person = Person;
                        QuantumRefrigiz.AllDraw.THISSecradioButtonGrayOrderChecked = Sec.radioButtonGrayOrder.Checked;
                        QuantumRefrigiz.AllDraw.THISSecradioButtonBrownOrderChecked = Sec.radioButtonBrownOrder.Checked;
                        QuantumRefrigiz.AllDraw.MovmentsNumber = MovmentsNumber;
                        /*while (!(QuantumRefrigiz.ChessRules.ObjectHittedRow != -1 && QuantumRefrigiz.ChessRules.ObjectHittedColumn != -1) &&
                            (!QuantumRefrigiz.AllDraw.ActionStringReady) &&
                                 (!(QuantumRefrigiz.AllDraw.OutPut.ToString() != "")) &&
                                     (!(QuantumRefrigiz.AllDraw.ConvertedKind == -1)) &&
                                         (!StateCC) &&
                                             (!StateCP))
                        {
                            Thread.Sleep(2);

                        }*/
                        if (QuantumRefrigiz.ChessRules.ObjectHittedRow != -1 && QuantumRefrigiz.ChessRules.ObjectHittedColumn != -1)
                        {
                            SetObjectInPictureBox(QuantumRefrigiz.ChessRules.ObjectHittedRow, QuantumRefrigiz.ChessRules.ObjectHittedColumn);
                            QuantumRefrigiz.ChessRules.ObjectHittedRow = -1;
                            QuantumRefrigiz.ChessRules.ObjectHittedColumn = -1;
                        }
                        if (QuantumRefrigiz.AllDraw.ActionStringReady)
                        {
                            SetBoxText(QuantumRefrigiz.AllDraw.ActionString.ToString());
                            RefreshBoxText();
                            QuantumRefrigiz.AllDraw.ActionString = new StringBuilder("");
                            QuantumRefrigiz.AllDraw.ActionStringReady = false;
                        }
                        if (QuantumRefrigiz.AllDraw.OutPut.ToString() != "")
                        {
                            SetBoxText(QuantumRefrigiz.AllDraw.OutPut.ToString());
                            RefreshBoxText();
                            RefrigtzDLL.AllDraw.OutPut.Append("");

                        }


                        if (RefrigtzDLL.AllDraw.ConvertedKind == -1)
                        {
                            FormُSelectItems.Items = -1;
                            FormُSelectItems A = new FormُSelectItems();
                            A.ShowDialog();


                            while (RefrigtzDLL.AllDraw.ConvertedKind == -1) { QuantumRefrigiz.AllDraw.ConvertedKind = FormُSelectItems.Items; Thread.Sleep(2); }


                        }

                        if (LoadedDLL)
                        {
                            SetcomboBoxText();
                            LoadedDLL = false;
                        }
                        //public static AllDraw THISDummy;
                        QuantumRefrigiz.AllDraw.StateCP = StateCP;
                            QuantumRefrigiz.AllDraw.StateCC = StateCC;
                        if (StateCP && (!Stockfish))
                        {
                            if (OrderPlate == -1 && Sec.radioButtonGrayOrder.Checked)
                            {
                                LastRow = QuantumRefrigiz.AllDraw.LastRowQ;
                                LastColumn = QuantumRefrigiz.AllDraw.LastColumnQ;
                                NextRow = QuantumRefrigiz.AllDraw.NextRowQ;
                                NextColumn = QuantumRefrigiz.AllDraw.NextRowQ;
                            }
                            else if (OrderPlate == 1 && Sec.radioButtonBrownOrder.Checked)
                            {
                                LastRow = QuantumRefrigiz.AllDraw.LastRowQ;
                                LastColumn = QuantumRefrigiz.AllDraw.LastColumnQ;
                                NextRow = QuantumRefrigiz.AllDraw.NextRowQ;
                                NextColumn = QuantumRefrigiz.AllDraw.NextRowQ;
                            }
                        }
                        else
                                if (StateCP && Stockfish)
                        {
                            if (OrderPlate == -1 && Sec.radioButtonGrayOrder.Checked)
                            {
                                LastRow = QuantumRefrigiz.AllDraw.LastRowQ;
                                LastColumn = QuantumRefrigiz.AllDraw.LastColumnQ;
                                NextRow = QuantumRefrigiz.AllDraw.NextRowQ;
                                NextColumn = QuantumRefrigiz.AllDraw.NextRowQ;

                            }
                        }
                        //System.Threading.Thread.Sleep(1);
                    }

                }
            }// while (true);


            //SetDLL = false;
        }
        void Timerstart()
        {
            while (true)
            {
                //queueManagementTimer.Start();
                //queueManagementTimerMove.Start();
                //queueManagementTimerSetNodesCount.Start();
                //queueManagementTimerSetRefrigitDLL.Start();

            }
        }
        bool DrawManagement()
        {
            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                AllDrawKind = 4;
            else
                                  if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                AllDrawKind = 3;
            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                AllDrawKind = 2;
            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                AllDrawKind = 1;
            //Set Configuration To True for some unknown reason!.
            //UpdateConfigurationTableVal = true;                             
            SetAllDrawKindString();

            bool Found = false;
            String P = Path.GetFullPath(path3);
            AllDrawReplacement = Path.Combine(P, AllDrawKindString);
            if (File.Exists(AllDrawKindString))
            {
                if (File.Exists(AllDrawReplacement))
                {
                    if (((new System.IO.FileInfo(AllDrawKindString).Length) < (new System.IO.FileInfo(AllDrawReplacement)).Length))
                    {
                        File.Delete(AllDrawKindString);
                        File.Copy(AllDrawReplacement, AllDrawKindString);
                        Found = true;
                    }

                    else
                    {
                        if (File.Exists(AllDrawReplacement))
                            File.Delete(AllDrawReplacement);
                        File.Copy(AllDrawKindString, AllDrawReplacement);
                        Found = true;
                    }
                }
                else
                {
                    if (!Directory.Exists(Path.GetFullPath(path3)))
                        Directory.CreateDirectory(Path.GetFullPath(path3));
                    File.Copy(AllDrawKindString, AllDrawReplacement);
                    Found = true;

                }
            }
            else if (File.Exists(AllDrawReplacement))
            {
                File.Copy(AllDrawReplacement, AllDrawKindString);
                Found = true;
            }
           
            return Found;
        }
        void SetAllDrawKindString()
        {
            if (AllDrawKind == 4)
                AllDrawKindString = "AllDrawBT.asd";//Both True
            else
                if (AllDrawKind == 3)
                AllDrawKindString = "AllDrawFFST.asd";//First false second true
            else
                if (AllDrawKind == 2)
                AllDrawKindString = "AllDrawFTSF.asd";//First true second false
            else
                if (AllDrawKind == 1)
                AllDrawKindString = "AllDrawFFSF.asd";//Fist false second false


        }
        //Load Refregitz Form.
        private void Form1_Load(object sender, EventArgs e)
        {
            try
            {
                TakeRoot y = new TakeRoot();

                DrawManagement();


                BrownTimer = new Refrigtz.Timer(false);
                GrayTimer = new Refrigtz.Timer(false);
                TimerText = new Refrigtz.Timer(true);

                BrownTimer.TimerInitiate("BrownTimer");
                GrayTimer.TimerInitiate("GrayTimer");
                //TTimerSet = new Thread(new ThreadStart(SetTimer));
                //TTimerSet.Start();

                TimerText.TimerInitiate("TimerText");

                TimerText.StartTime("TimerText");


                //Thread tr = new Thread(new ThreadStart(Timerstart));
                //tr.Start();
                bool DrawDrawen = false;
                backgroundWorkerAllOp.RunWorkerAsync();
                backgroundWorkerSetNode.RunWorkerAsync();
                backgroundWorkerSetRefD.RunWorkerAsync();
                // timerAllOperation.Start();

                //Set and syncronization with dynamic refregitzdll.   
                //tttt = new Thread(new ThreadStart(SetRefregitzDLL));
                //ttt = new Thread(new ThreadStart(SetNodesCount));
                AllOperate = new Thread(new ThreadStart(AllOperations));
                //Wehn no need to load.
                if (File.Exists(Root + "\\Run.txt"))
                {
                    AllDrawLoad = false;
                    NewTable = false;
                }

                //Determne of several refrigitz proccess.
                if (!LoadAG)
                {
                    List<Process> a = new List<Process>();
                    a.AddRange(Process.GetProcessesByName("Refrigtz"));
                    if (a.Count > 1)
                    {

                        if (System.Windows.Forms.MessageBox.Show(null, "New Instant Of Refregitz!", "New Instant", MessageBoxButtons.YesNo) == DialogResult.No)
                        {

                            for (int i = 0; i < a.Count; i++)
                            {
                                try
                                {

                                    a[i].Kill();
                                    exitToolStripMenuItem_Click(sender, e);
                                }
                                catch (Exception t) { Log(t); Application.ExitThread(); }

                            }

                        }
                    }
                }
                //When direcrories not exist.
                if (!Directory.Exists(Root + "\\DataBase"))
                {
                    if (!Directory.Exists(Root + "\\DataBase\\MainBank"))
                    {
                        Directory.CreateDirectory(Root + "\\DataBase\\MainBank");
                        File.Move(Root + "\\ChessBank.accdb", Root + "\\DataBase\\MainBank\\ChessBank.accdb");
                    }
                }
                if (!Directory.Exists(Root + "\\Images"))
                {
                    if (!Directory.Exists(Root + "\\Images\\Original"))
                    {
                        Directory.CreateDirectory(Root + "\\Images\\Original");
                    }
                }

                //When file dos't exist.
                if (!AllDrawLoad)
                {
                    if (!System.IO.File.Exists(Root + "\\Database\\CurrentBank.accdb"))
                    {
                        System.IO.File.Copy(Root + "\\Database\\MainBank\\ChessBank.accdb", Root + "\\Database\\CurrentBank.accdb");
                        if (!File.Exists(Root + "\\Database\\Monitor.html"))
                            System.IO.File.Copy(Root + "\\Database\\MainBank\\Monitor_Log.html", Root + "\\Database\\Monitor.html");
                        if (File.Exists("List.txt"))
                            File.Delete("List.txt");

                        if (bookConn != null)
                            if (bookConn != null)
                                bookConn.Close();
                        bookConn = new OleDbConnection(connParam);
                        oleDbCmd.Connection = bookConn;


                        InsertTableAtDataBase(Table);
                        CreateConfigurationTable();

                    }
                    else
                    {
                        //When movments not occured.
                        if (!NewTable)
                        {
                            //UpdateConfigurationTableVal = false;

                            //When Configuration is Allowed Read Configuration.
                            ReadConfigurationTable();
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)                            
                                AllDrawKind = 4;                           
                            else
                                if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();


                            //Read Last Table and Set MovementNumber 
                            Table = ReadTable(0, ref MovmentsNumber);

                            if (DrawManagement())
                            {
                                //Load AllDraw.asd
                                if (!Quantum)
                                    DrawDrawen = y.Load(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                else
                                    DrawDrawen = y.Load(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);

                            }
                            else
                            {
                                /*   (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);

                                        if (!Quantum)
                                       DrawDrawen = (new TakeRoot()).Load(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                   else
                                       DrawDrawen = (new TakeRoot()).Load(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);

                             */
                            }
                        }
                        else
                        {

                            int iii = 0;
                            do { iii++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                            System.IO.File.Copy(Root + "\\Database\\Monitor.html", Root + "\\Database\\Games\\Monitor" + iii.ToString() + ".html");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            System.IO.File.Delete(Root + "\\Database\\Monitor.html");
                            System.IO.File.Copy(Root + "\\Database\\MainBank\\ChessBank.accdb", Root + "\\Database\\CurrentBank.accdb");
                            System.IO.File.Copy(Root + "\\Database\\MainBank\\Monitor_Log.html", Root + "\\Database\\Monitor.html");
                            InsertTableAtDataBase(Table);
                            CreateConfigurationTable();
                        }
                    }

                    //Set Level Variable from selection.
                    comboBoxMaxLevelText = comboBoxMaxLevel.Text;




                }



                if (File.Exists(Root + "\\Run.txt"))
                {
                    String _0 = File.ReadAllText(Root + "\\Run.txt");
                    if (_0[0] == '1') _1 = true; else _1 = false;
                    if (_0[1] == '1') _2 = true; else _2 = false;
                    if (_0[2] == '1') _3 = true; else _3 = false;
                    if (_0[3] == '1') _4 = true; else _4 = false;
                    File.Delete(Root + "Run.txt");
                    continueAGameToolStripMenuItem.Visible = false; if (_1) { computerWithComputerToolStripMenuItem_Click(sender, e); } else if (_2) { computerWithComputerToolStripMenuItem1_Click(sender, e); } else if (_3) { toolStripMenuItem3_Click(sender, e); } else if (_4) { toolStripMenuItem6_Click(sender, e); }

                }


                //Loaded = true;
                LoadedDLL = true;

                if (Sec.radioButtonGrayOrder.Checked && OrderPlate == 1)
                    Person = true;
                else
                    if (Sec.radioButtonBrownOrder.Checked && OrderPlate == -1)
                    Person = true;


                //tttt.Start();
                //ttt.Start();
                AllOperate.Start();
                if (!Quantum)
                {
                    if (!DrawDrawen)
                    {
                        Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        Draw.TableList.Clear();
                        Draw.TableList.Add(Table);
                        Draw.SetRowColumn(0);
                        RefrigtzDLL.AllDraw.DepthIterative = 0;

                        //MessageBox.Show("Draw Not Found.");
                    }
                    else
                    {
                        Draw = y.t;
                        bool FOUND = false;
                        RefrigtzDLL.AllDraw THIS = null;
                        SetDrawFounding(ref FOUND, ref THIS, false);

                    }
                }
                else
                {
                    if (!DrawDrawen)
                    {
                        DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        DrawQ.TableList.Clear();
                        DrawQ.TableList.Add(Table);
                        DrawQ.SetRowColumn(0);
                        QuantumRefrigiz.AllDraw.DepthIterative = 0;

                        //MessageBox.Show("Draw Not Found.");
                    }
                    else
                    {
                        DrawQ = y.tt;
                        bool FOUND = false;
                        QuantumRefrigiz.AllDraw THIS = null;
                        SetDrawFounding(ref FOUND, ref THIS, false);

                    }
                }
                if (Blitz)
                {
                    BrownTimer = new Refrigtz.Timer(true);
                    GrayTimer = new Refrigtz.Timer(true);

                    if (OrderPlate == 1)
                    {
                        GrayTimer.StartTime("GrayTimer");
                        BrownTimer.StopTime();
                    }
                    else
                    {
                        GrayTimer.StopTime();
                        BrownTimer.StartTime("BrownTimer");
                    }
                }
                else if (FullGame)
                {

                    BrownTimer = new Refrigtz.Timer(true);
                    GrayTimer = new Refrigtz.Timer(true);

                    if (OrderPlate == 1)
                    {
                        GrayTimer.StartTime("GrayTimer");
                        BrownTimer.StopTime();
                    }
                    else
                    {
                        GrayTimer.StopTime();
                        BrownTimer.StartTime("BrownTimer");
                    }
                }
                else if (StateCC)
                {
                    GrayTimer = new Refrigtz.Timer(true);
                    BrownTimer = new Refrigtz.Timer(true);
                    if (OrderPlate == 1)
                    {
                        BobSection = true;
                        AliceSection = false;
                        GrayTimer.StartTime("GrayTimer");
                        BrownTimer.StopTime();
                    }
                    else
                    {
                        BobSection = false;
                        AliceSection = true;
                        BrownTimer.StartTime("BrownTimer");
                        GrayTimer.StopTime();
                    }
                    //UpdateConfigurationTableVal = true;
                }
                else if (Stockfish)
                {
                    GrayTimer = new Refrigtz.Timer(true);
                    BrownTimer = new Refrigtz.Timer(true);

                    if (OrderPlate == 1)
                    {
                        GrayTimer.StartTime("GrayTimer");
                        BrownTimer.StopTime();
                        BobSection = true;
                        AliceSection = false;
                    }
                    else
                    {
                        BrownTimer.StartTime("BrownTimer");
                        GrayTimer.StopTime();
                        BobSection = false;
                        AliceSection = true;
                    }

                    //
                    // 

                }
                if (!Quantum)
                {
                    if (RefrigtzDLL.AllDraw.TableListAction.Count == 0)
                        RefrigtzDLL.AllDraw.TableListAction.Add(Table);
                }
                else
                {
                    if (QuantumRefrigiz.AllDraw.TableListAction.Count == 0)
                        QuantumRefrigiz.AllDraw.TableListAction.Add(Table);
                }

                DrawImageOfMain();


                /*bool A = GrayTimer.TextChanged;
                GrayTimer.TextChanged = true;
                SetPrictureBoxRefregitzInvalidate(pictureBoxTimerGray);
                SetPrictureBoxRefregitzUpdate(pictureBoxTimerGray);
                GrayTimer.TextChanged = A;

                A = BrownTimer.TextChanged;
                BrownTimer.TextChanged = true;
                */
                SetPrictureBoxRefregitzInvalidate(pictureBoxTimerBrown);
                SetPrictureBoxRefregitzUpdate(pictureBoxTimerBrown);
                //BrownTimer.TextChanged = A;

                //var parallelOptions = new ParallelOptions();
                // parallelOptions.MaxDegreeOfParallelism = PlatformHelper.ProcessorCount;
                //parallelOptions.MaxDegreeOfParallelism = PlatformHelper.ProcessorCount;
                if (Quantum)
                {
                    String SFile = "QBN.aqs";
                    if (File.Exists(SFile))
                    {
                        String SCoun = File.ReadAllText(SFile);
                        //for (int i = 0; i < 2; i++)
                        //for (int jj = 0; jj < 8; jj++)
                        //for (int kk = 0; kk < 8; kk++)
                        int L = 0, k = 0;
                        String S = "";
                        do
                        {
                            int kk = (L) % 8;
                            int jj = ((L) / 8) % 8;
                            int i = (((L) / 8) / 8) % 2;
                            {
                                S = SCoun.Substring(k, SCoun.IndexOf(','));
                                S = S.Replace(",", "");
                                QuantumRefrigiz.AllDraw.QuntumTable[i, jj, kk] = System.Convert.ToInt32(S);
                                k += S.Length + 1;
                                L++;
                            }
                        } while (k < SCoun.Length);
                    }
                }

                LoadedTable = true;

                //worker_DoWork();
                //worker_DoWorkMove();
                //worker_DoWorkDLL();
                //worker_DoWorkNodesCount();
            }
            catch (Exception t) { Log(t); }
        }
        //Reading Table Database.
        int[,] ReadTable(int Movment, ref int MoveNumber)
        {
            if (Sec.radioButtonGrayOrder.Checked)
                OrderPlate = 1;
            else
                OrderPlate = -1;
            RefrigtzDLL.ChessRules.CastleActBrown = false;
            bool OneIncreament = false;
            int[,] Tab = Table;
            int Move = 0;
            if (!Quantum)
                RefrigtzDLL.AllDraw.TableListAction.Clear();
            else
                QuantumRefrigiz.AllDraw.TableListAction.Clear();
            do
            {
                OrderPlate *= -1;
                if (!Quantum)
                    RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                else
                    QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;

                try
                {

                    String TableName = Move.ToString();
                    String Zero = "Table";
                    for (int i = 0; i < 8 - TableName.Length; i++)
                        Zero += "0";
                    TableName = Zero + TableName;

                    if (bookConn != null)
                    {
                        bookConn.Close();
                        bookConn.Dispose();
                    }
                    bookConn = new OleDbConnection(connParam);
                    oleDbCmd.Connection = bookConn;
                    bookConn.Open();

                    oleDbCmd.CommandText = "Select * From " + TableName;
                    OleDbDataReader dr = null;
                    dr = oleDbCmd.ExecuteReader();
                    int ii = 0;
                    while (dr.Read())
                    {
                        Tab[0, ii] = System.Convert.ToInt32(dr["a"]);
                        Tab[1, ii] = System.Convert.ToInt32(dr["b"]);
                        Tab[2, ii] = System.Convert.ToInt32(dr["c"]);
                        Tab[3, ii] = System.Convert.ToInt32(dr["d"]);
                        Tab[4, ii] = System.Convert.ToInt32(dr["e"]);
                        Tab[5, ii] = System.Convert.ToInt32(dr["f"]);
                        Tab[6, ii] = System.Convert.ToInt32(dr["g"]);
                        Tab[7, ii] = System.Convert.ToInt32(dr["h"]);
                        ii++;
                    }
                    int[,] TableA = new int[8, 8];

                    Table = new int[8, 8];

                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            TableA[i, j] = Tab[i, j];
                            Table[i, j] = Tab[i, j];

                        }

                    }
                    if (MoveNumber > 0)
                        SetAndConfirmSyntax();
                    else
                    {
                        if (!Quantum)
                            RefrigtzDLL.AllDraw.TableListAction.Add(Table);
                        else
                            QuantumRefrigiz.AllDraw.TableListAction.Add(Table);
                    }
                    Move++;
                    if (Move > 2)
                        GameStarted = true;
                    //if (Move > 1)
                    {
                        MoveNumber++;
                    }

                    //MoveNumber = Move;



                    if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, TableA, OrderPlate, -1, -1).CheckMate(TableA, OrderPlate)))
                    {
                        int iii = 0;
                        do { iii++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"));
                        System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", "Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                        System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                        break;

                    }
                }
                catch (Exception t)
                {
                    Log(t);
                    try
                    {

                        // Move++;


                        String TableName = (Move).ToString();
                        String Zero = "Table";
                        for (int i = 0; i < 8 - TableName.Length; i++)
                            Zero += "0";
                        TableName = Zero + TableName;

                        if (bookConn != null)
                        {
                            bookConn.Close();
                            bookConn.Dispose();
                        }
                        bookConn = new OleDbConnection(connParam);
                        oleDbCmd.Connection = bookConn;
                        bookConn.Open();


                        oleDbCmd.CommandText = "Select * From " + TableName;
                        OleDbDataReader dr = oleDbCmd.ExecuteReader();
                        int ii = 0;
                        while (dr.Read())
                        {
                            Tab[0, ii] = System.Convert.ToInt32(dr["a"]);
                            Tab[1, ii] = System.Convert.ToInt32(dr["b"]);
                            Tab[2, ii] = System.Convert.ToInt32(dr["c"]);
                            Tab[3, ii] = System.Convert.ToInt32(dr["d"]);
                            Tab[4, ii] = System.Convert.ToInt32(dr["e"]);
                            Tab[5, ii] = System.Convert.ToInt32(dr["f"]);
                            Tab[6, ii] = System.Convert.ToInt32(dr["g"]);
                            Tab[7, ii] = System.Convert.ToInt32(dr["h"]);
                            ii++;
                        }
                        // Move++;
                        if (Move > 2)
                            GameStarted = true;
                        //if (Move > 1)
                        {
                            // MoveNumber++;
                        }

                        //MoveNumber = Move;

                        int[,] TableA = new int[8, 8];
                        for (int i = 0; i < 8; i++)
                        {
                            for (int j = 0; j < 8; j++)
                            {
                                TableA[i, j] = Tab[i, j];
                                Table[i, j] = Tab[i, j];

                            }
                        }
                        if (!Quantum)
                        {
                            Draw.TableList.Clear();
                            Draw.TableList.Add(TableA);
                            Draw.SetRowColumn(0);
                        }
                        else
                        {
                            DrawQ.TableList.Clear();
                            DrawQ.TableList.Add(TableA);
                            DrawQ.SetRowColumn(0);
                        }
                        if (MoveNumber > 0)
                            SetAndConfirmSyntax();
                        else
                        {
                            if (!Quantum)
                                RefrigtzDLL.AllDraw.TableListAction.Add(Table);
                            else
                                QuantumRefrigiz.AllDraw.TableListAction.Add(Table);
                        }
                        if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, TableA, OrderPlate, -1, -1).CheckMate(TableA, OrderPlate)))
                        {
                            int iii = 0;
                            do { iii++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", "Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            break;

                        }
                    }
                    catch (Exception tt)
                    {
                        Log(tt);
                        break;
                    }
                }



                //if (Move > 1)
                {

                }
            } while (MoveNumber <= MovmentsNumberMax);
       
            //Draw.TableList.Clear();
            //Draw.TableList.Add(Tab);
            //Draw.SetRowColumn(0);
            return Tab;


        }
        //Verify Accuarance of Table Games Methos.
        bool VerifyTable(String FileName, int Movment, ref int MoveNumber)
        {
            bool PreviouseCheck = false;

            int[,] Tab = Table;
            int Move = 1;
            int Order = 1;
            bool TowCheckFromOneKind = false;
            do
            {
                try
                {
                    if (Move % 2 == 1)
                        Order = 1;
                    else
                        Order = -1;
                    String connParam = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FileName + ";;Persist Security Info=False; Jet OLEDB:Database Password='!HN#BGHHN&N$G$V4'";
                    String TableName = Move.ToString();
                    String Zero = "Table";
                    for (int i = 0; i < 8 - TableName.Length; i++)
                        Zero += "0";
                    TableName = Zero + TableName;

                    oleDbCmd.CommandText = "Select * From " + TableName;
                    OleDbDataReader dr = null;
                    try
                    {
                        dr = oleDbCmd.ExecuteReader();
                    }
                    catch (Exception t)
                    {
                        Log(t);
                        Move++;
                        break;
                    }
                    int ii = 0;
                    while (dr.Read())
                    {
                        Tab[0, ii] = System.Convert.ToInt32(dr["a"]);
                        Tab[1, ii] = System.Convert.ToInt32(dr["b"]);
                        Tab[2, ii] = System.Convert.ToInt32(dr["c"]);
                        Tab[3, ii] = System.Convert.ToInt32(dr["d"]);
                        Tab[4, ii] = System.Convert.ToInt32(dr["e"]);
                        Tab[5, ii] = System.Convert.ToInt32(dr["f"]);
                        Tab[6, ii] = System.Convert.ToInt32(dr["g"]);
                        Tab[7, ii] = System.Convert.ToInt32(dr["h"]);
                        ii++;
                    }
                    int[,] TableA = new int[8, 8];
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            TableA[i, j] = Tab[i, j];
                        }
                    }
                    if (!Quantum)
                    {
                        Draw.TableList.Clear();
                        Draw.TableList.Add(TableA);
                        Draw.SetRowColumn(0);
                        if (!Draw.IsEnemyThingsinStable(TableA, RefrigtzDLL.AllDraw.TableVeryfy, Order))
                        {
                            Tab = null;
                            Tab[0, 0] = -1;
                        }
                        else
                        {
                            for (int i = 0; i < 8; i++)
                            {
                                for (int j = 0; j < 8; j++)
                                {
                                    RefrigtzDLL.AllDraw.TableVeryfy[i, j] = Tab[i, j];
                                }
                            }

                        }

                    }
                    else
                    {
                        DrawQ.TableList.Clear();
                        DrawQ.TableList.Add(TableA);
                        DrawQ.SetRowColumn(0);
                        if (!DrawQ.IsEnemyThingsinStable(TableA, QuantumRefrigiz.AllDraw.TableVeryfy, Order))
                        {
                            Tab = null;
                            Tab[0, 0] = -1;
                        }
                        else
                        {
                            for (int i = 0; i < 8; i++)
                            {
                                for (int j = 0; j < 8; j++)
                                {
                                    QuantumRefrigiz.AllDraw.TableVeryfy[i, j] = Tab[i, j];
                                }
                            }

                        }
                    }
                    Move++;
                    if (Move >= 1)
                    {
                        MoveNumber++;
                    }
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            TableA[i, j] = Tab[i, j];
                        }
                    }
                    if (!Quantum)
                    {
                        RefrigtzDLL.ChessRules A = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, TableA, OrderPlate, -1, -1);
                        if (A.CheckMate(TableA, OrderPlate))
                        {

                            int iii = 0;
                            do { iii++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            break;

                        }
                        if (A.CheckGray && TowCheckFromOneKind)
                        {
                            Tab = null;
                            Tab[0, 0] = -1;

                        }
                        else
                            if (Order == 1 && A.CheckGray)
                            TowCheckFromOneKind = true;
                        else
                            TowCheckFromOneKind = false;

                        if (A.CheckGray && TowCheckFromOneKind)
                        {
                            Tab = null;
                            Tab[0, 0] = -1;

                        }
                        else
                            if (Order == 1 && A.CheckGray)
                            TowCheckFromOneKind = true;
                        else
                            TowCheckFromOneKind = false;

                        if (A.CheckBrown || A.CheckGray)
                        {
                            if (PreviouseCheck)
                                return false;
                            else
                                PreviouseCheck = true;
                        }
                        else
                            PreviouseCheck = false;
                    }
                    else
                    {
                        QuantumRefrigiz.ChessRules A = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, TableA, OrderPlate, -1, -1);
                        if (A.CheckMate(TableA, OrderPlate))
                        {

                            int iii = 0;
                            do { iii++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            //break;

                            if (A.CheckGray && TowCheckFromOneKind)
                            {
                                Tab = null;
                                Tab[0, 0] = -1;

                            }
                            else
                               if (Order == 1 && A.CheckGray)
                                TowCheckFromOneKind = true;
                            else
                                TowCheckFromOneKind = false;

                            if (A.CheckGray && TowCheckFromOneKind)
                            {
                                Tab = null;
                                Tab[0, 0] = -1;

                            }
                            else
                                if (Order == 1 && A.CheckGray)
                                TowCheckFromOneKind = true;
                            else
                                TowCheckFromOneKind = false;

                            if (A.CheckBrown || A.CheckGray)
                            {
                                if (PreviouseCheck)
                                    return false;
                                else
                                    PreviouseCheck = true;
                            }
                            else
                                PreviouseCheck = false;
                        }
                    }
                }
                catch (Exception t)
                {

                    Log(t);

                    do
                    {
                        try
                        {

                            Move++;

                            String connParam = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + FileName + ";;Persist Security Info=False; Jet OLEDB:Database Password='!HN#BGHHN&N$G$V4'";
                            String TableName = (Move).ToString();
                            String Zero = "Table";
                            for (int i = 0; i < 8 - TableName.Length; i++)
                                Zero += "0";
                            TableName = Zero + TableName;

                            oleDbCmd.CommandText = "Drop Table " + TableName;
                            OleDbDataReader dr = null;
                            dr = oleDbCmd.ExecuteReader();
                            return true;

                        }
                        catch (Exception tt)
                        {
                            Log(tt);
                            return false;
                        }
                        System.Threading.Thread.Sleep(2);
                    } while (true);
                }
                if (!Quantum)
                {
                    if (Move > 1)
                    {
                        OrderPlate *= -1;
                        RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                    }
                }
                else
                {
                    if (Move > 1)
                    {
                        OrderPlate *= -1;
                        QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                    }
                }

                //System.Threading.Thread.Sleep(2);
            } while (Move <= MovmentsNumberMax);

            return true;


        }
        //Read Specific Table Number.
        int[,] ReadTableMovmentNumber()
        {
            int[,] Tab = Table;
            int Move = MovmentsNumber;
            if (!Quantum)
                RefrigtzDLL.AllDraw.TableListAction.Clear();
            else
                QuantumRefrigiz.AllDraw.TableListAction.Clear();

            try
            {
                if (Move > 1)
                {
                    if (MovmentsNumber % 2 == 0)
                        OrderPlate = 1;
                    else
                        OrderPlate = -1;
                    if (!Quantum)
                        RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                    else
                        QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;

                }

                String TableName = Move.ToString();
                String Zero = "Table";
                for (int i = 0; i < 8 - TableName.Length; i++)
                    Zero += "0";
                TableName = Zero + TableName;

                oleDbCmd.CommandText = "Select * From " + TableName;
                OleDbDataReader dr = null;
                dr = oleDbCmd.ExecuteReader();
                int ii = 0;
                while (dr.Read())
                {
                    Tab[0, ii] = System.Convert.ToInt32(dr["a"]);
                    Tab[1, ii] = System.Convert.ToInt32(dr["b"]);
                    Tab[2, ii] = System.Convert.ToInt32(dr["c"]);
                    Tab[3, ii] = System.Convert.ToInt32(dr["d"]);
                    Tab[4, ii] = System.Convert.ToInt32(dr["e"]);
                    Tab[5, ii] = System.Convert.ToInt32(dr["f"]);
                    Tab[6, ii] = System.Convert.ToInt32(dr["g"]);
                    Tab[7, ii] = System.Convert.ToInt32(dr["h"]);
                    ii++;
                }
                int[,] TableA = new int[8, 8];
                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 8; j++)
                    {
                        TableA[i, j] = Tab[i, j];
                    }
                }


                Move++;


            }
            catch (Exception t)
            {
                Log(t);
                try
                {

                    Move++;


                    String TableName = (Move).ToString();
                    String Zero = "Table";
                    for (int i = 0; i < 8 - TableName.Length; i++)
                        Zero += "0";
                    TableName = Zero + TableName;

                    oleDbCmd.CommandText = "Select * From " + TableName;
                    OleDbDataReader dr = null;
                    dr = oleDbCmd.ExecuteReader();
                    int ii = 0;
                    while (dr.Read())
                    {
                        Tab[0, ii] = System.Convert.ToInt32(dr["a"]);
                        Tab[1, ii] = System.Convert.ToInt32(dr["b"]);
                        Tab[2, ii] = System.Convert.ToInt32(dr["c"]);
                        Tab[3, ii] = System.Convert.ToInt32(dr["d"]);
                        Tab[4, ii] = System.Convert.ToInt32(dr["e"]);
                        Tab[5, ii] = System.Convert.ToInt32(dr["f"]);
                        Tab[6, ii] = System.Convert.ToInt32(dr["g"]);
                        Tab[7, ii] = System.Convert.ToInt32(dr["h"]);
                        ii++;
                    }
                    int[,] TableA = new int[8, 8];
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            TableA[i, j] = Tab[i, j];
                        }
                    }


                }
                catch (Exception tt)
                {
                    Log(tt);
                    return null;
                }
            }



            return Tab;


        }
        //Creation of New Tables at DatabaseMethod.
        String CreatTable()
        {
            String TableName = null;
            Begin12:
            try
            {


                TableName = MovmentsNumber.ToString();
                String Zero = "Table";
                for (int i = 0; i < 8 - TableName.Length; i++)
                    Zero += "0";
                TableName = Zero + TableName;

                if (bookConn != null)
                    bookConn.Close();
                bookConn = new OleDbConnection(connParam);
                oleDbCmd.Connection = bookConn;
                bookConn.Open();

                oleDbCmd.CommandText = "Create Table " + TableName + " (a Number NOT NULL,b Number NOT NULL,c Number NOT NULL,d Number NOT NULL,e Number NOT NULL,f Number NOT NULL,g Number NOT NULL,h Number NOT NULL)";
                int temp = 0;
                temp = oleDbCmd.ExecuteNonQuery();
                return TableName;
            }
            catch (Exception t)
            {
                Log(t);


                TableName = MovmentsNumber.ToString();
                String Zero = "Table";
                for (int i = 0; i < 8 - TableName.Length; i++)
                    Zero += "0";
                TableName = Zero + TableName;

                if (bookConn != null)
                    bookConn.Close();
                bookConn = new OleDbConnection(connParam);
                oleDbCmd.Connection = bookConn;
                bookConn.Open();

                oleDbCmd.CommandText = "Drop Table " + TableName;
                int temp = 0;
                temp = oleDbCmd.ExecuteNonQuery();
                goto Begin12;


            }
            return TableName;
        }
        //Creatiopn of Configuration Table
        void CreateConfigurationTable()
        {
            try
            {
                if (!AllDrawLoad)
                {
                    Begin12:

                    try
                    {
                        if (bookConn != null)
                            bookConn.Close();
                        bookConn = new OleDbConnection(connParam);
                        oleDbCmd.Connection = bookConn;
                        bookConn.Open();

                        oleDbCmd.CommandText = "Create Table Configuration (checkBoxAStarGreedyHuristic Number NOT NULL,checkBoxPredictHuristci Number NOT NULL,checkBoxAStarGreadyFirstSearch Number NOT NULL,checkBoxBestMovments Number NOT NULL,checkBoxOnlySelf Number NOT NULL,radioButtonOriginalImages Number NOT NULL,radioButtonBigFittingImages Number NOT NULL,radioButtonSmallFittingImages Number NOT NULL,checkBoxAStarGreedyMovement Number NOT NULL,checkBoxUseDoubleTime Number NOT NULL,checkBoxUsePenaltyRegradMechnisam Number NOT NULL,checkBoxDynamicProgrammingAStarGreedyt Number NOT NULL,comboBoxMaxTree Number NOT NULL,comboBoxAttack Number NOT NULL,comboBoxObjectDangour Number NOT NULL,comboBoxReducedAttacked Number NOT NULL,comboBoxSupport Number NOT NULL,comboBoxHitting Number NOT NULL,comboBoxMovments Number NOT NULL,ArrangmentsChanged Number NOT NULL,GrayTimer Number NOT NULL,BrownTimer Number NOT NULL,BobSection Number NOT NULL,AliceSection Number NOT NULL,StateCP Number NOT NULL,StateCC Number NOT NULL,StateGe Number NOT NULL,Blitz Number NOT NULL,Person Number NOT NULL,SettingPRFALSE Number NOT NULL,FullGame Number NOT NULL,Stockfish Number NOT NULL,lable1 Text NOT NULL,lable2 Text NOT NULL,MovmentsNumber Number NOT NULL,Quantum Number NOT NULL,Sugar Number NOT NULL,MenueSelecte Number NOT NULL)";
                        int temp = 0;
                        temp = oleDbCmd.ExecuteNonQuery();

                        if (bookConn != null)
                            bookConn.Close();
                        bookConn = new OleDbConnection(connParam);
                        oleDbCmd.Connection = bookConn;
                        bookConn.Open();


                        oleDbCmd.CommandText = "Insert into Configuration (checkBoxAStarGreedyHuristic,checkBoxPredictHuristci,checkBoxAStarGreadyFirstSearch,checkBoxBestMovments,checkBoxOnlySelf,radioButtonOriginalImages,radioButtonBigFittingImages,radioButtonSmallFittingImages,checkBoxAStarGreedyMovement,checkBoxUseDoubleTime,checkBoxUsePenaltyRegradMechnisam,checkBoxDynamicProgrammingAStarGreedyt,comboBoxMaxTree,comboBoxAttack,comboBoxObjectDangour,comboBoxReducedAttacked,comboBoxSupport,comboBoxHitting,comboBoxMovments,ArrangmentsChanged,GrayTimer,BrownTimer,BobSection,AliceSection,StateCP,StateCC,StateGe,Blitz,Person,SettingPRFALSE,FullGame,Stockfish,lable1,lable2,MovmentsNumber,Quantum,Sugar,MenueSelecte) values(" + System.Convert.ToInt32(checkBoxAStarGreedyHuristic.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxPredictHuristci.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxAStarGreadyFirstSearch.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxBestMovments.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxOnlySelf.Checked).ToString() + "," + System.Convert.ToInt32(radioButtonOriginalImages.Checked).ToString() + "," + System.Convert.ToInt32(radioButtonBigFittingImages.Checked).ToString() + "," + System.Convert.ToInt32(radioButtonSmallFittingImages.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxBestMovments.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxUseDoubleTime.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxUsePenaltyRegradMechnisam.Checked).ToString() + "," + System.Convert.ToInt32(checkBoxDynamicProgrammingAStarGreedyt.Checked).ToString() + "," + System.Convert.ToInt32(comboBoxMaxLevel.Text).ToString() + "," + System.Convert.ToInt32(comboBoxAttack.Text).ToString() + "," + System.Convert.ToInt32(comboBoxObjectDangour.Text).ToString() + "," + System.Convert.ToInt32(comboBoxReducedAttacked.Text).ToString() + "," + System.Convert.ToInt32(comboBoxSupport.Text).ToString() + "," + System.Convert.ToInt32(comboBoxKiller.Text).ToString() + "," + System.Convert.ToInt32(comboBoxMovments.Text).ToString() + "," + System.Convert.ToInt32(ArrangmentsChanged).ToString() + "," + GrayTimer.Times.ToString() + "," + BrownTimer.Times.ToString() + "," + System.Convert.ToInt32(BobSection).ToString() + "," + System.Convert.ToInt32(AliceSection).ToString() + "," + System.Convert.ToInt32(StateCP).ToString() + "," + System.Convert.ToInt32(StateCC).ToString() + "," + System.Convert.ToInt32(StateGe).ToString() + "," + System.Convert.ToInt32(Blitz).ToString() + "," + System.Convert.ToInt32(Person).ToString() + "," + System.Convert.ToInt32(SettingPRFALSE).ToString() + "," + System.Convert.ToInt32(FullGame).ToString() + "," + System.Convert.ToInt32(Stockfish).ToString() + ",'" + label1.Text + "','" + label2.Text + "','" + MovmentsNumber.ToString() + "','" + System.Convert.ToInt32(Quantum).ToString() + "','" + System.Convert.ToInt32(Sugar).ToString() + "','" + System.Convert.ToInt32(MenueSelecte).ToString() + "')";

                        temp = oleDbCmd.ExecuteNonQuery();

                    }
                    catch (Exception t)
                    {

                        Log(t);

                        if (bookConn != null)
                            bookConn.Close();
                        bookConn = new OleDbConnection(connParam);
                        oleDbCmd.Connection = bookConn;
                        bookConn.Open();

                        oleDbCmd.CommandText = "Drop Table Configuration";
                        int temp = 0;
                        temp = oleDbCmd.ExecuteNonQuery();
                        goto Begin12;

                    }
                }
            }
            catch (Exception t)
            {
            }
        }
        void UpdateTable(int[,] Tabl, String TableName)
        {
            try
            {
                if (bookConn == null)
                    bookConn = new OleDbConnection(connParam);
                else
                    bookConn.Close();
                oleDbCmd.CommandText = "Drop Table " + TableName;
                int temp = 0;
                temp = oleDbCmd.ExecuteNonQuery();
                InsertTableAtDataBase(Tabl);

            }
            catch (Exception t)
            {
                Log(t);

            }

        }

        //Reading of Configuration Table Method.
        void ReadConfigurationTable()
        {
            if (!AllDrawLoad)
            {
                Begin12:
                try
                {


                    if (bookConn != null)
                        bookConn.Close();
                    bookConn = new OleDbConnection(connParam);
                    oleDbCmd.Connection = bookConn;
                    bookConn.Open();

                    oleDbCmd.CommandText = "Select * from Configuration";
                    OleDbDataReader dr = null;
                    dr = oleDbCmd.ExecuteReader();
                    bool ARead = false;
                    if (dr.Read())
                    {
                        checkBoxAStarGreedyHuristic.Checked = System.Convert.ToBoolean(dr["checkBoxAStarGreedyHuristic"]);
                        if (checkBoxAStarGreedyHuristic.Checked)
                            AStarGreedyHuristic = true;
                        else
                            AStarGreedyHuristic = false;
                        checkBoxPredictHuristci.Checked = System.Convert.ToBoolean(dr["checkBoxPredictHuristci"]);
                        if (checkBoxPredictHuristci.Checked)
                            PredictHuristic = true;
                        else
                            PredictHuristic = false;
                        checkBoxAStarGreadyFirstSearch.Checked = System.Convert.ToBoolean(dr["checkBoxAStarGreadyFirstSearch"]);
                        if (checkBoxAStarGreadyFirstSearch.Checked)
                            AStarGreedyHuristic = true;
                        else
                            AStarGreedyHuristic = false;
                        checkBoxBestMovments.Checked = System.Convert.ToBoolean(dr["checkBoxBestMovments"]);
                        if (checkBoxBestMovments.Checked)
                            BestMovments = true;
                        else
                            BestMovments = false;
                        checkBoxOnlySelf.Checked = System.Convert.ToBoolean(dr["checkBoxOnlySelf"]);
                        if (checkBoxOnlySelf.Checked)
                            OnlySelf = true;
                        else
                            OnlySelf = false;
                        radioButtonOriginalImages.Checked = System.Convert.ToBoolean(dr["radioButtonOriginalImages"]);
                        radioButtonBigFittingImages.Checked = System.Convert.ToBoolean(dr["radioButtonBigFittingImages"]);
                        radioButtonSmallFittingImages.Checked = System.Convert.ToBoolean(dr["radioButtonSmallFittingImages"]);
                        checkBoxAStarGreedyMovement.Checked = System.Convert.ToBoolean(dr["checkBoxAStarGreedyMovement"]);
                        checkBoxUseDoubleTime.Checked = System.Convert.ToBoolean(dr["checkBoxUseDoubleTime"]);
                        checkBoxUsePenaltyRegradMechnisam.Checked = System.Convert.ToBoolean(dr["checkBoxUsePenaltyRegradMechnisam"]);
                        if (checkBoxUsePenaltyRegradMechnisam.Checked)
                            UsePenaltyRegardMechnisam = true;
                        else
                            UsePenaltyRegardMechnisam = false;
                        checkBoxDynamicProgrammingAStarGreedyt.Checked = System.Convert.ToBoolean(dr["checkBoxDynamicProgrammingAStarGreedyt"]);
                        comboBoxMaxLevel.Text = System.Convert.ToString(dr["comboBoxMaxTree"]);
                        comboBoxAttack.Text = System.Convert.ToString(dr["comboBoxAttack"]);
                        comboBoxObjectDangour.Text = System.Convert.ToString(dr["comboBoxObjectDangour"]);
                        comboBoxReducedAttacked.Text = System.Convert.ToString(dr["comboBoxReducedAttacked"]);
                        comboBoxSupport.Text = System.Convert.ToString(dr["comboBoxSupport"]);
                        comboBoxKiller.Text = System.Convert.ToString(dr["comboBoxHitting"]);
                        comboBoxMovments.Text = System.Convert.ToString(dr["comboBoxMovments"]);
                        ArrangmentsChanged = System.Convert.ToBoolean(dr["ArrangmentsChanged"]);
                        GrayTimer.Times = System.Convert.ToInt64(dr["GrayTimer"]);
                        BrownTimer.Times = System.Convert.ToInt64(dr["BrownTimer"]);
                        BobSection = System.Convert.ToBoolean(dr["BobSection"]);
                        AliceSection = System.Convert.ToBoolean(dr["AliceSection"]);
                        StateCP = System.Convert.ToBoolean(dr["StateCP"]);
                        StateCC = System.Convert.ToBoolean(dr["StateCC"]);
                        StateGe = System.Convert.ToBoolean(dr["StateGe"]);
                        Blitz = System.Convert.ToBoolean(dr["Blitz"]);
                        Person = System.Convert.ToBoolean(dr["Person"]);
                        SettingPRFALSE = System.Convert.ToBoolean(dr["SettingPRFALSE"]);
                        FullGame = System.Convert.ToBoolean(dr["FullGame"]);
                        Stockfish = System.Convert.ToBoolean(dr["Stockfish"]);
                        label1.Text = System.Convert.ToString(dr["lable1"]);
                        label2.Text = System.Convert.ToString(dr["lable2"]);
                        MovmentsNumberMax = System.Convert.ToInt32(dr["MovmentsNumber"]);
                        //MovmentsNumber = MovmentsNumberMax;
                        Quantum = System.Convert.ToBoolean(dr["Quantum"]);
                        Sugar = System.Convert.ToBoolean(dr["Sugar"]);
                        MenueSelecte = System.Convert.ToBoolean(dr["MenueSelecte"]);
                        ARead = true;
                    }
                    if (!ARead)
                        CreateConfigurationTable();



                }
                catch (Exception t)
                {
                    Log(t);
                    try
                    {


                        oleDbCmd.CommandText = "Drop Table Configuration";
                        int temp = 0;
                        temp = oleDbCmd.ExecuteNonQuery();
                    }
                    catch (Exception tt)
                    {
                        Log(tt);
                        CreateConfigurationTable();
                    }
                    goto Begin12;

                }
            }
        }
        //Updating of Configuration Method.
        void UpdateConfigurationTable()
        {
            //if (UpdateConfigurationTableVal)
            {

                Begin12:
                try
                {
                    if (AStarGreedyHuristic)
                        checkBoxAStarGreedyHuristic.Checked = true;
                    else
                        checkBoxAStarGreedyHuristic.Checked = false;
                    if (PredictHuristic)
                        checkBoxPredictHuristci.Checked = true;
                    else
                        checkBoxPredictHuristci.Checked = false;
                    if (AStarGreedyHuristic)
                        checkBoxAStarGreadyFirstSearch.Checked = true;
                    else
                        checkBoxAStarGreadyFirstSearch.Checked = false;
                    if (BestMovments)
                        checkBoxBestMovments.Checked = true;
                    else
                        checkBoxBestMovments.Checked = false;
                    if (OnlySelf)
                        checkBoxOnlySelf.Checked = true;
                    else
                        checkBoxOnlySelf.Checked = false;
                    if (UsePenaltyRegardMechnisam)
                        checkBoxUsePenaltyRegradMechnisam.Checked = true;
                    else
                        checkBoxUsePenaltyRegradMechnisam.Checked = false;
                    TimersSet = false;



                    oleDbCmd.CommandText = "Update Configuration Set checkBoxAStarGreedyHuristic=" + System.Convert.ToInt32(checkBoxAStarGreedyHuristic.Checked).ToString() + ",checkBoxPredictHuristci=" + System.Convert.ToInt32(checkBoxPredictHuristci.Checked).ToString() + ",checkBoxAStarGreadyFirstSearch=" + System.Convert.ToInt32(checkBoxAStarGreadyFirstSearch.Checked).ToString() + ",checkBoxBestMovments=" + System.Convert.ToInt32(checkBoxBestMovments.Checked).ToString() + ",checkBoxOnlySelf=" + System.Convert.ToInt32(checkBoxOnlySelf.Checked).ToString() + ",radioButtonOriginalImages=" + System.Convert.ToInt32(radioButtonOriginalImages.Checked).ToString() + ",radioButtonBigFittingImages=" + System.Convert.ToInt32(radioButtonBigFittingImages.Checked).ToString() + ",radioButtonSmallFittingImages=" + System.Convert.ToInt32(radioButtonSmallFittingImages.Checked).ToString() + ",checkBoxAStarGreedyMovement=" + System.Convert.ToInt32(checkBoxAStarGreedyMovement.Checked).ToString() + ",checkBoxUseDoubleTime=" + System.Convert.ToInt32(checkBoxUseDoubleTime.Checked).ToString() + ",checkBoxUsePenaltyRegradMechnisam=" + System.Convert.ToInt32(checkBoxUsePenaltyRegradMechnisam.Checked).ToString() + ",checkBoxDynamicProgrammingAStarGreedyt=" + System.Convert.ToInt32(checkBoxDynamicProgrammingAStarGreedyt.Checked).ToString() + ",comboBoxMaxTree=" + comboBoxMaxLevel.Text + ",comboBoxAttack=" + comboBoxAttack.Text + ",comboBoxObjectDangour=" + comboBoxObjectDangour.Text + ",comboBoxReducedAttacked=" + comboBoxReducedAttacked.Text + ",comboBoxSupport=" + comboBoxSupport.Text + ",comboBoxHitting=" + comboBoxKiller.Text + ",comboBoxMovments=" + comboBoxMovments.Text + ",ArrangmentsChanged=" + System.Convert.ToString(System.Convert.ToInt32(ArrangmentsChanged)) + ",GrayTimer=" + GrayTimer.Times.ToString() + ",BrownTimer=" + BrownTimer.Times.ToString() + ",BobSection = " + System.Convert.ToUInt32(BobSection).ToString() + ",AliceSection =" + System.Convert.ToUInt32(AliceSection).ToString() + ",StateCP = " + System.Convert.ToUInt32(StateCP).ToString() + ",StateCC = " + System.Convert.ToUInt32(StateCC).ToString() + ",StateGe=" + System.Convert.ToUInt32(StateGe).ToString() + ",Blitz=" + System.Convert.ToUInt32(Blitz).ToString() + ",Person=" + System.Convert.ToUInt32(Person).ToString() + ",SettingPRFALSE=" + System.Convert.ToUInt32(SettingPRFALSE).ToString() + ",FullGame=" + System.Convert.ToUInt32(FullGame).ToString() + ",Stockfish=" + System.Convert.ToUInt32(Stockfish).ToString() + ",lable1='" + label1.Text + "',lable2='" + label2.Text + "',MovmentsNumber='" + MovmentsNumber.ToString() + "'," + "Quantum = '" + System.Convert.ToInt32(Quantum).ToString() + "'," + "Sugar = '" + System.Convert.ToInt32(Sugar).ToString() + "'," + "MenueSelecte='" + System.Convert.ToInt32(MenueSelecte).ToString() + "'";

                    if (bookConn != null)
                        bookConn.Close();
                    bookConn = new OleDbConnection(connParam);
                    oleDbCmd.Connection = bookConn;
                    bookConn.Open();

                    int temp = oleDbCmd.ExecuteNonQuery();
                    TimersSet = true;
                }
                catch (Exception t)
                {
                    //TimersSet = true;
                    Log(t);
                    try
                    {

                        if (bookConn != null)
                            bookConn.Close();
                        bookConn = new OleDbConnection(connParam);
                        oleDbCmd.Connection = bookConn;
                        bookConn.Open();

                        oleDbCmd.CommandText = "Drop Table Configuration";
                        int temp = 0;
                        temp = oleDbCmd.ExecuteNonQuery();
                        goto Begin12;
                    }
                    catch (Exception tt)
                    {
                        Log(tt);

                    }

                }
            }
        }
        //Inserting of New Tabler at Database.
        void InsertTableAtDataBase(int[,] Table)
        {
            //TimersSet = false;
            int[,] Tab = new int[8, 8];
            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 8; j++)
                {
                    Tab[i, j] = Table[i, j];
                }
            }
        
            String TableName = CreatTable();


            for (int i = 0; i < 8; i++)
            {
                if (bookConn != null)
                    bookConn.Close();
                bookConn = new OleDbConnection(connParam);
                oleDbCmd.Connection = bookConn;
                bookConn.Open();

                oleDbCmd.CommandText = "insert into " + TableName + "(a,b,c,d,e,f,g,h)  values (" + Tab[0, i].ToString() + "," + Tab[1, i].ToString() + "," + Tab[2, i].ToString() + "," + Tab[3, i].ToString() + "," + Tab[4, i].ToString() + "," + Tab[5, i].ToString() + "," + Tab[6, i].ToString() + "," + Tab[7, i].ToString() + ")";
                int temp = 0;
                temp = oleDbCmd.ExecuteNonQuery();

            }
            //MaxCurrent
            if (MovmentsNumber >= 1)
                GameStarted = true;
            MovmentsNumber++;
            MovmentsNumberMax = MovmentsNumber;

        }
        void DrawObjects()
        {
            for (int i = 0; i < Draw.SodierHigh; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (Draw.SolderesOnTable != null && Draw.SolderesOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {

                                Draw.SolderesOnTable[i].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
            }
            //}, () =>
            //{
            //for(int i = 0;i< Draw.ElefantHigh;i++)
            for (int i = 0; i < Draw.ElefantHigh; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (Draw.ElephantOnTable != null && Draw.ElephantOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {

                                Draw.ElephantOnTable[i].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
            }
            //}, () =>
            //{
            //for(int i = 0;i< Draw.HourseHight;i++)
            for (int i = 0; i < Draw.HourseHight; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (Draw.HoursesOnTable != null && Draw.HoursesOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {

                                Draw.HoursesOnTable[i].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
            }
            //}, () =>
            //{
            for (int i = 0; i < Draw.CastleHigh; i++)
            //for(int i = 0;i< Draw.CastleHigh;i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (Draw.CastlesOnTable != null && Draw.CastlesOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {

                                Draw.CastlesOnTable[i].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
                //}, () =>
                //{
            }
            //for(int i = 0;i< Draw.MinisterHigh;i++)
            for (int i = 0; i < Draw.MinisterHigh; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (Draw.MinisterOnTable != null && Draw.MinisterOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {

                                Draw.MinisterOnTable[i].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }

                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
                //}, () =>
            }
            //{
            for (int i = 0; i < Draw.KingHigh; i++)
            //for(int i = 0;i< Draw.KingHigh;i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (Draw.KingOnTable != null && Draw.KingOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {

                                Draw.KingOnTable[i].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
                //}
            }
        }
        void DrawObjectsQ()
        {
            for (int i = 0; i < DrawQ.SodierHigh; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (DrawQ.SolderesOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {
                                DrawQ.SolderesOnTable[i].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
            }
            //}, () =>
            //{
            //for(int i = 0;i< DrawQ.ElefantHigh;i++)
            for (int i = 0; i < DrawQ.ElefantHigh; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (DrawQ.ElephantOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {
                                DrawQ.ElephantOnTable[i].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
            }
            //}, () =>
            //{
            //for(int i = 0;i< DrawQ.HourseHight;i++)
            for (int i = 0; i < DrawQ.HourseHight; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (DrawQ.HoursesOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {
                                DrawQ.HoursesOnTable[i].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
            }
            //}, () =>
            //{
            for (int i = 0; i < DrawQ.CastleHigh; i++)
            //for(int i = 0;i< DrawQ.CastleHigh;i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (DrawQ.CastlesOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {
                                DrawQ.CastlesOnTable[i].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
                //}, () =>
                //{
            }
            //for(int i = 0;i< DrawQ.MinisterHigh;i++)
            for (int i = 0; i < DrawQ.MinisterHigh; i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (DrawQ.MinisterOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {
                                DrawQ.MinisterOnTable[i].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }

                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
                //}, () =>
            }
            //{
            for (int i = 0; i < DrawQ.KingHigh; i++)
            //for(int i = 0;i< DrawQ.KingHigh;i++)
            {
                Object O1 = new Object();
                lock (O1)
                {
                    if (DrawQ.KingOnTable[i] != null)
                    {
                        try
                        {
                            Object O = new Object();
                            lock (O)
                            {
                                DrawQ.KingOnTable[i].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                //}
                //}
            }
        }

        //Painting of Form Refregitz PictureBox and Tow Refrigtz.Timer Pictue Box on Time.
        private void pictureBoxRefrigtz_Paint(object sender, PaintEventArgs e)
        {
            Object o = new Object();
            lock (o)
            {
                if (!Quantum)
                {
                    if (RefrigtzDLL.AllDraw.DrawTable)
                    {
                        //System.Threading.Thread.Sleep(2);
                        if (GameStarted && MovmentsNumber == 1)
                            buttonChangeArrangment.Visible = false;
                        //System.Threading.Thread.Sleep(8);

                        //if (RefrigtzDLL.AllDraw.TableListAction.Count > 3)
                        //toolStripMenuItemRandomGeneticGames.Enabled = true;
                        //else
                        //  toolStripMenuItemRandomGeneticGames.Enabled = false;

                        if (GrayTimer.EndTime)
                            BrownWiner = true;
                        if (BrownTimer.EndTime)
                            GrayWinner = true;
                        if (GrayWinner || BrownWiner)
                        {
                            if (t1 != null)
                                t1.Abort();
                            if (t2 != null)
                                t2.Abort();
                            if (t3 != null)
                                t3.Abort();
                            if (GrayWinner)
                                SetBoxText("\r\nGray Winees!");
                            if (BrownWiner)
                                SetBoxText("\r\nBrown Winees!");

                            return;
                        }
                        try
                        {
                            RefrigtzDLL.AllDraw.DrawTable = false;
                            //ReconstructTable();
                            pictureBoxRefrigtz.Image = (Image)new Bitmap(pictureBoxRefrigtz.Width, pictureBoxRefrigtz.Height);
                            ChessTable = (Image)new Bitmap(pictureBoxRefrigtz.Image.Width, pictureBoxRefrigtz.Image.Height);
                            g = Graphics.FromImage(ChessTable);
                            g.FillRectangle(new SolidBrush(Color.Yellow), new Rectangle(0, 0, pictureBoxRefrigtz.Width, pictureBoxRefrigtz.Height));
                            if (Draw.TableList != null && Draw.TableList.Count > 0)
                                Draw.SetObjectNumbers(Draw.TableList[0]);

                            for (int i = 0; i < pictureBoxRefrigtz.Image.Width; i += pictureBoxRefrigtz.Image.Width / 8)
                                for (int j = 0; j < pictureBoxRefrigtz.Image.Height; j += pictureBoxRefrigtz.Image.Height / 8)
                                {
                                    try
                                    {
                                        if ((i + j) % 2 == 0)
                                            g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));
                                        else
                                            g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));

                                    }
                                    catch (Exception t) { Log(t); }
                                }
                            if (RowClickP != -1 && ColumnClickP != -1)
                            {
                                Color a = Color.Gray;
                                if (OrderPlate == -1)
                                    a = Color.Brown;
                                bool[,] Tab = null;
                                Tab = VeryFye(Table, OrderPlate, a);
                                for (int i = 0; i < pictureBoxRefrigtz.Image.Width; i += pictureBoxRefrigtz.Image.Width / 8)
                                    for (int j = 0; j < pictureBoxRefrigtz.Image.Height; j += pictureBoxRefrigtz.Image.Height / 8)
                                    {
                                        try
                                        {
                                            if (Tab != null)
                                            {
                                                if (Tab[i / (pictureBoxRefrigtz.Image.Width / 8), j / (pictureBoxRefrigtz.Image.Height / 8)])
                                                {
                                                    g.DrawString("*", new Font("Times New Roman", 50), new SolidBrush(Color.Red), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));
                                                }
                                            }

                                        }
                                        catch (Exception t) { Log(t); }
                                    }
                            }
                            //System.Threading.Tasks.Parallel.Invoke(() =>
                            //{
                            //for(int i = 0;i< Draw.SodierHigh;i++)
                            if (!Quantum)
                                DrawObjects();
                            else
                                DrawObjectsQ();

                            pictureBoxRefrigtz.Image = ChessTable;
                            g.Dispose();
                        }
                        catch (Exception t)
                        {
                            Log(t);


                            //RunInFront();
                        }
                    }
                    //LoadedTable = true;
                    //UpadatTimer();

                    /*while (PaintedPaused && DrawNumber > 50)
                    {
                        System.Threading.Thread.Sleep(10);
                    }

                    DrawNumber++;
                    if (DrawNumber >= 50)
                        DrawNumber = 0;

                     */
                    AllDrawLoad = true;
                    //pictureBoxTimerGray.Update();
                    //pictureBoxTimerGray.Invalidate();

                    //return;
                    //System.Threading.Thread.Sleep(2);
                }
                //pictureBoxRefrigtz.Invalidate();
                //pictureBoxRefrigtz.Update();

                else
                {
                    if (!Quantum)
                    {
                        if (RefrigtzDLL.AllDraw.DrawTable)
                        {
                            //System.Threading.Thread.Sleep(100);
                            if (GameStarted && MovmentsNumber == 1)
                                buttonChangeArrangment.Visible = false;
                            //System.Threading.Thread.Sleep(8);

                            //if (QuantumRefrigiz.AllDraw.TableListAction.Count > 3)
                            //toolStripMenuItemRandomGeneticGames.Enabled = true;
                            //else
                            //  toolStripMenuItemRandomGeneticGames.Enabled = false;

                            if (GrayTimer.EndTime)
                                BrownWiner = true;
                            if (BrownTimer.EndTime)
                                GrayWinner = true;
                            if (GrayWinner || BrownWiner)
                            {
                                if (t1 != null)
                                    t1.Abort();
                                if (t2 != null)
                                    t2.Abort();
                                if (t3 != null)
                                    t3.Abort();
                                if (GrayWinner)
                                    SetBoxText("\r\nGray Winees!");
                                if (BrownWiner)
                                    SetBoxText("\r\nBrown Winees!");

                                return;
                            }
                            try
                            {
                                RefrigtzDLL.AllDraw.DrawTable = false;
                                //ReconstructTable();
                                pictureBoxRefrigtz.Image = (Image)new Bitmap(pictureBoxRefrigtz.Width, pictureBoxRefrigtz.Height);
                                ChessTable = (Image)new Bitmap(pictureBoxRefrigtz.Image.Width, pictureBoxRefrigtz.Image.Height);
                                g = Graphics.FromImage(ChessTable);
                                g.FillRectangle(new SolidBrush(Color.Yellow), new Rectangle(0, 0, pictureBoxRefrigtz.Width, pictureBoxRefrigtz.Height));
                                if (Draw.TableList != null && Draw.TableList.Count > 0)
                                    Draw.SetObjectNumbers(Draw.TableList[0]);

                                for (int i = 0; i < pictureBoxRefrigtz.Image.Width; i += pictureBoxRefrigtz.Image.Width / 8)
                                    for (int j = 0; j < pictureBoxRefrigtz.Image.Height; j += pictureBoxRefrigtz.Image.Height / 8)
                                    {
                                        try
                                        {
                                            if ((i + j) % 2 == 0)
                                                g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));
                                            else
                                                g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));

                                        }
                                        catch (Exception t) { Log(t); }
                                    }
                                if (RowClickP != -1 && ColumnClickP != -1)
                                {
                                    Color a = Color.Gray;
                                    if (OrderPlate == -1)
                                        a = Color.Brown;
                                    bool[,] Tab = null;
                                    Tab = VeryFye(Table, OrderPlate, a);
                                    for (int i = 0; i < pictureBoxRefrigtz.Image.Width; i += pictureBoxRefrigtz.Image.Width / 8)
                                        for (int j = 0; j < pictureBoxRefrigtz.Image.Height; j += pictureBoxRefrigtz.Image.Height / 8)
                                        {
                                            try
                                            {
                                                if (Tab != null)
                                                {
                                                    if (Tab[i / (pictureBoxRefrigtz.Image.Width / 8), j / (pictureBoxRefrigtz.Image.Height / 8)])
                                                    {
                                                        g.DrawString("*", new Font("Times New Roman", 50), new SolidBrush(Color.Red), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));
                                                    }
                                                }

                                            }
                                            catch (Exception t) { Log(t); }
                                        }
                                }
                                //System.Threading.Tasks.Parallel.Invoke(() =>
                                //{
                                //for(int i = 0;i< Draw.SodierHigh;i++)
                                DrawObjects();

                                pictureBoxRefrigtz.Image = ChessTable;
                                g.Dispose();
                            }
                            catch (Exception t)
                            {
                                Log(t);


                                //RunInFront();
                            }
                        }
                        //LoadedTable = true;
                        //UpadatTimer();

                        /*while (PaintedPaused && DrawNumber > 50)
                        {
                            System.Threading.Thread.Sleep(10);
                        }

                        DrawNumber++;
                        if (DrawNumber >= 50)
                            DrawNumber = 0;

                         */
                        AllDrawLoad = true;
                        //pictureBoxTimerGray.Update();
                        //pictureBoxTimerGray.Invalidate();

                        //return;
                        //System.Threading.Thread.Sleep(20);
                    }
                    else
                    {
                        if (QuantumRefrigiz.AllDraw.DrawTable)
                        {
                            //System.Threading.Thread.Sleep(100);
                            if (GameStarted && MovmentsNumber == 1)
                                buttonChangeArrangment.Visible = false;
                            //System.Threading.Thread.Sleep(8);

                            //if (QuantumRefrigiz.AllDraw.TableListAction.Count > 3)
                            //toolStripMenuItemRandomGeneticGames.Enabled = true;
                            //else
                            //  toolStripMenuItemRandomGeneticGames.Enabled = false;

                            if (GrayTimer.EndTime)
                                BrownWiner = true;
                            if (BrownTimer.EndTime)
                                GrayWinner = true;
                            if (GrayWinner || BrownWiner)
                            {
                                if (t1 != null)
                                    t1.Abort();
                                if (t2 != null)
                                    t2.Abort();
                                if (t3 != null)
                                    t3.Abort();
                                if (GrayWinner)
                                    SetBoxText("\r\nGray Winees!");
                                if (BrownWiner)
                                    SetBoxText("\r\nBrown Winees!");

                                return;
                            }
                            try
                            {
                                QuantumRefrigiz.AllDraw.DrawTable = false;
                                //ReconstructTable();
                                pictureBoxRefrigtz.Image = (Image)new Bitmap(pictureBoxRefrigtz.Width, pictureBoxRefrigtz.Height);
                                ChessTable = (Image)new Bitmap(pictureBoxRefrigtz.Image.Width, pictureBoxRefrigtz.Image.Height);
                                g = Graphics.FromImage(ChessTable);
                                g.FillRectangle(new SolidBrush(Color.Yellow), new Rectangle(0, 0, pictureBoxRefrigtz.Width, pictureBoxRefrigtz.Height));
                                if (DrawQ.TableList != null && DrawQ.TableList.Count > 0)
                                    DrawQ.SetObjectNumbers(DrawQ.TableList[0]);

                                for (int i = 0; i < pictureBoxRefrigtz.Image.Width; i += pictureBoxRefrigtz.Image.Width / 8)
                                    for (int j = 0; j < pictureBoxRefrigtz.Image.Height; j += pictureBoxRefrigtz.Image.Height / 8)
                                    {
                                        try
                                        {
                                            if ((i + j) % 2 == 0)
                                                g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));
                                            else
                                                g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));

                                        }
                                        catch (Exception t) { Log(t); }
                                    }
                                if (RowClickP != -1 && ColumnClickP != -1)
                                {
                                    Color a = Color.Gray;
                                    if (OrderPlate == -1)
                                        a = Color.Brown;
                                    bool[,] Tab = null;
                                    Tab = VeryFye(Table, OrderPlate, a);
                                    for (int i = 0; i < pictureBoxRefrigtz.Image.Width; i += pictureBoxRefrigtz.Image.Width / 8)
                                        for (int j = 0; j < pictureBoxRefrigtz.Image.Height; j += pictureBoxRefrigtz.Image.Height / 8)
                                        {
                                            try
                                            {
                                                if (Tab != null)
                                                {
                                                    if (Tab[i / (pictureBoxRefrigtz.Image.Width / 8), j / (pictureBoxRefrigtz.Image.Height / 8)])
                                                    {
                                                        g.DrawString("*", new Font("Times New Roman", 50), new SolidBrush(Color.Red), new Rectangle(i, j, this.pictureBoxRefrigtz.Width / 8, this.pictureBoxRefrigtz.Height / 8));
                                                    }
                                                }

                                            }
                                            catch (Exception t) { Log(t); }
                                        }
                                }
                                //System.Threading.Tasks.Parallel.Invoke(() =>
                                //{
                                //for(int i = 0;i< Draw.SodierHigh;i++)
                                DrawObjectsQ();

                                pictureBoxRefrigtz.Image = ChessTable;
                                g.Dispose();
                            }
                            catch (Exception t)
                            {
                                Log(t);


                                //RunInFront();
                            }
                        }
                        //LoadedTable = true;
                        //UpadatTimer();

                        /*while (PaintedPaused && DrawNumber > 50)
                        {
                            System.Threading.Thread.Sleep(10);
                        }

                        DrawNumber++;
                        if (DrawNumber >= 50)
                            DrawNumber = 0;

                         */
                        AllDrawLoad = true;
                        //pictureBoxTimerGray.Update();
                        //pictureBoxTimerGray.Invalidate();

                        //return;

                    }

                }
            }
            pictureBoxTimerGray.Invalidate();
            pictureBoxTimerGray.Update();

            System.Threading.Thread.Sleep(5);
        }

        int CalculateMoveMentHueuristicUser(int Kind,int[,] Table, int Order, int Row, int Column, int RowSource, int ColumnS, Color color)
        {

            RefrigtzDLL.ThinkingChess th = null;
            QuantumRefrigiz.ThinkingQuantumChess th1 = null;
            if (!Quantum)
                th = new RefrigtzDLL.ThinkingChess(Kind,0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Row, Column);
            else
                th1 = new QuantumRefrigiz.ThinkingQuantumChess(Kind,0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Row, Column);
            int HuristicAttackValue = new int();
            int HuristicMovementValue = new int();
            int HuristicSelfSupportedValue = new int();
            int HuristicObjectDangourCheckMateValue = new int();
            int HuristicHittingValue = new int();
            int HuristicReducedAttackValue = new int();
            int HeuristicDistabceOfCurrentMoveFromEnemyKingValue = new int();
            int HeuristicKingSafe = new int();
            int HeuristicFromCenter = new int();
            int HeuristicKingDangour = new int();
            if (!Quantum)
            {
                th.CalculateHuristics(true, 0, Table, Row, Column, RowSource, ColumnS, color, ref HuristicAttackValue, ref HuristicMovementValue, ref HuristicSelfSupportedValue, ref HuristicObjectDangourCheckMateValue, ref HuristicHittingValue, ref HuristicReducedAttackValue, ref HeuristicDistabceOfCurrentMoveFromEnemyKingValue, ref HeuristicKingSafe, ref HeuristicFromCenter, ref HeuristicKingDangour);
                int[] Hu = new int[4];

                return HuristicAttackValue + HuristicMovementValue +
                HuristicSelfSupportedValue +

                HuristicObjectDangourCheckMateValue + HuristicReducedAttackValue + HuristicHittingValue + HeuristicDistabceOfCurrentMoveFromEnemyKingValue + HeuristicKingSafe + HeuristicFromCenter + HeuristicKingDangour;
            }
            else
            {
                th1.CalculateHuristics(true, 0, Table, Row, Column, RowSource, ColumnS, color, ref HuristicAttackValue, ref HuristicMovementValue, ref HuristicSelfSupportedValue, ref HuristicObjectDangourCheckMateValue, ref HuristicHittingValue, ref HuristicReducedAttackValue, ref HeuristicDistabceOfCurrentMoveFromEnemyKingValue, ref HeuristicKingSafe, ref HeuristicFromCenter, ref HeuristicKingDangour);
                int[] Hu = new int[4];


                return HuristicAttackValue + HuristicMovementValue +
                    HuristicSelfSupportedValue +
                    HuristicObjectDangourCheckMateValue + HuristicReducedAttackValue + HuristicHittingValue + HeuristicDistabceOfCurrentMoveFromEnemyKingValue + HeuristicKingSafe + HeuristicFromCenter + HeuristicKingDangour;
            }
        }
        bool CheckMovment(int[,] Table, int i, int j, int ii, int jj, int Order)
        {
            bool Check = false;
            int[,] Tab = new int[8, 8];
            for (int iii = 0; iii < 8; iii++)
            {
                for (int jjj = 0; jjj < 8; jjj++)
                {
                    Tab[iii, jjj] = Table[iii, jjj];
                }
            }
            Tab[ii, jj] = Tab[i, j];
            Tab[i, j] = 0;
            RefrigtzDLL.ChessRules A = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Order);
            QuantumRefrigiz.ChessRules AQ = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Order);


            if (!Quantum)
            {
                A.Check(Tab, Order);
                if (Order == 1 && A.CheckGray)
                    Check = true;
                if (Order == -1 && A.CheckBrown)
                    Check = true;
            }
            else
            {
                AQ.Check(Tab, Order);
                if (Order == 1 && AQ.CheckGray)
                    Check = true;
                if (Order == -1 && AQ.CheckBrown)
                    Check = true;
            }
            return Check;
        }
        //A quantum move cannot be used to take a piece.
        void MovmentneDraw(int Kind)
        {
            DrawImageOfMain();
            g = Graphics.FromImage(ChessTable);
            if (!Quantum)
            {
                if (Kind == 7)
                {
                    Draw.KingOnTable[King].Row = RowRealesed;
                    Draw.KingOnTable[King].Column = ColumnRealeased;
                    Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                }
                else
                    if (Kind == 1)
                {
                    Draw.SolderesOnTable[Soldier].Row = (int)RowRealesed;
                    Draw.SolderesOnTable[Soldier].Column = (int)ColumnRealeased;
                    Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);


                }
                else
                    if (Kind == 2)
                {
                    Draw.ElephantOnTable[Elefant].Row = RowRealesed;
                    Draw.ElephantOnTable[Elefant].Column = ColumnRealeased;
                    Draw.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 3)
                {
                    Draw.HoursesOnTable[Hourse].Row = RowRealesed;
                    Draw.HoursesOnTable[Hourse].Column = ColumnRealeased;
                    Draw.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 4)
                {
                    Draw.CastlesOnTable[Castle].Row = RowRealesed;
                    Draw.CastlesOnTable[Castle].Column = ColumnRealeased;
                    Draw.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 5)
                {
                    Draw.MinisterOnTable[Minister].Row = RowRealesed;
                    Draw.MinisterOnTable[Minister].Column = ColumnRealeased;
                    Draw.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 6)
                {
                    Draw.KingOnTable[King].Row = RowRealesed;
                    Draw.KingOnTable[King].Column = ColumnRealeased;
                    Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -7)
                {
                    Draw.KingOnTable[King].Row = RowRealesed;
                    Draw.KingOnTable[King].Column = ColumnRealeased;
                    Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -1)
                {
                    Draw.SolderesOnTable[Soldier].Row = (int)RowRealesed;
                    Draw.SolderesOnTable[Soldier].Column = (int)ColumnRealeased;
                    Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -2)
                {
                    Draw.ElephantOnTable[Elefant].Row = RowRealesed;
                    Draw.ElephantOnTable[Elefant].Column = ColumnRealeased;
                    Draw.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -3)
                {
                    Draw.HoursesOnTable[Hourse].Row = RowRealesed;
                    Draw.HoursesOnTable[Hourse].Column = ColumnRealeased;
                    Draw.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -4)
                {
                    Draw.CastlesOnTable[Castle].Row = RowRealesed;
                    Draw.CastlesOnTable[Castle].Column = ColumnRealeased;
                    Draw.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -5)
                {
                    Draw.MinisterOnTable[Minister].Row = RowRealesed;
                    Draw.MinisterOnTable[Minister].Column = ColumnRealeased;
                    Draw.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -6)
                {
                    Draw.KingOnTable[King].Row = RowRealesed;
                    Draw.KingOnTable[King].Column = ColumnRealeased;
                    Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
            }
            else
            {
                if (Kind == 7)
                {
                    DrawQ.KingOnTable[King].Row = RowRealesed;
                    DrawQ.KingOnTable[King].Column = ColumnRealeased;
                    DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                }
                else
                    if (Kind == 1)
                {
                    DrawQ.SolderesOnTable[Soldier].Row = (int)RowRealesed;
                    DrawQ.SolderesOnTable[Soldier].Column = (int)ColumnRealeased;
                    DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);


                }
                else
                    if (Kind == 2)
                {
                    DrawQ.ElephantOnTable[Elefant].Row = RowRealesed;
                    DrawQ.ElephantOnTable[Elefant].Column = ColumnRealeased;
                    DrawQ.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 3)
                {
                    DrawQ.HoursesOnTable[Hourse].Row = RowRealesed;
                    DrawQ.HoursesOnTable[Hourse].Column = ColumnRealeased;
                    DrawQ.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 4)
                {
                    DrawQ.CastlesOnTable[Castle].Row = RowRealesed;
                    DrawQ.CastlesOnTable[Castle].Column = ColumnRealeased;
                    DrawQ.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 5)
                {
                    DrawQ.MinisterOnTable[Minister].Row = RowRealesed;
                    DrawQ.MinisterOnTable[Minister].Column = ColumnRealeased;
                    DrawQ.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == 6)
                {
                    DrawQ.KingOnTable[King].Row = RowRealesed;
                    DrawQ.KingOnTable[King].Column = ColumnRealeased;
                    DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -7)
                {
                    DrawQ.KingOnTable[King].Row = RowRealesed;
                    DrawQ.KingOnTable[King].Column = ColumnRealeased;
                    DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -1)
                {
                    DrawQ.SolderesOnTable[Soldier].Row = (int)RowRealesed;
                    DrawQ.SolderesOnTable[Soldier].Column = (int)ColumnRealeased;
                    DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -2)
                {
                    DrawQ.ElephantOnTable[Elefant].Row = RowRealesed;
                    DrawQ.ElephantOnTable[Elefant].Column = ColumnRealeased;
                    DrawQ.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -3)
                {
                    DrawQ.HoursesOnTable[Hourse].Row = RowRealesed;
                    DrawQ.HoursesOnTable[Hourse].Column = ColumnRealeased;
                    DrawQ.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -4)
                {
                    DrawQ.CastlesOnTable[Castle].Row = RowRealesed;
                    DrawQ.CastlesOnTable[Castle].Column = ColumnRealeased;
                    DrawQ.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -5)
                {
                    DrawQ.MinisterOnTable[Minister].Row = RowRealesed;
                    DrawQ.MinisterOnTable[Minister].Column = ColumnRealeased;
                    DrawQ.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
                else if (Kind == -6)
                {
                    DrawQ.KingOnTable[King].Row = RowRealesed;
                    DrawQ.KingOnTable[King].Column = ColumnRealeased;
                    DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                }
            }
            //pictureBoxRefrigtz.Image = ChessTable;
            g.Dispose();
            return;
        }
        void MovmentsCastleKing(int Kind)
        {
            if (!Quantum)
            {
                if (Kind == 7)
                {
                    RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(Kind,Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                    LastRow = (int)RowRealesed;
                    LastColumn = (int)ColumnRealeased;
                    CurrentKind = 7;
                    Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                    Table[(int)RowClickP, (int)ColumnClickP] = 0;

                    Table[(int)RowRealesed, (int)ColumnRealeased] = 6;


                }
                else if (Kind == -7)
                {
                    RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(Kind,Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                    LastRow = (int)RowRealesed;
                    LastColumn = (int)ColumnRealeased;
                    CurrentKind = -7;
                    Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                    Table[(int)RowClickP, (int)ColumnClickP] = 0;

                    Table[(int)RowRealesed, (int)ColumnRealeased] = -6;
                }
            }
            else
            {
                if (Kind == 7)
                {
                    QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(Kind,Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                    LastRow = (int)RowRealesed;
                    LastColumn = (int)ColumnRealeased;
                    CurrentKind = 7;
                    DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                    Table[(int)RowClickP, (int)ColumnClickP] = 0;

                    Table[(int)RowRealesed, (int)ColumnRealeased] = 6;


                }
                else if (Kind == -7)
                {
                    QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(Kind,Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                    LastRow = (int)RowRealesed;
                    LastColumn = (int)ColumnRealeased;
                    CurrentKind = -7;
                    DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                    Table[(int)RowClickP, (int)ColumnClickP] = 0;

                    Table[(int)RowRealesed, (int)ColumnRealeased] = -6;
                }
            }
        }
        void SetSyntax()
        {
            if (!Quantum)
            {
                if (RefrigtzDLL.AllDraw.TableListAction.Count > 1)
                {
                    RefrigtzDLL.ChessGeneticAlgorithm R = new RefrigtzDLL.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    if (R.FindGenToModified(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], RefrigtzDLL.AllDraw.TableListAction, 0, OrderPlate, true))
                    {
                        bool HitVal = false;
                        int Hit = 0;
                        if (R.Hit)
                            Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                        if (Hit != 0)
                            HitVal = true;
                        bool Convert = false;
                        if (OrderPlate == 1)
                        {
                            if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                            {
                                if (R.CromosomColumn == 7)
                                    Convert = true;
                            }
                            if ((RefrigtzDLL.ChessRules.SmallKingCastleGray || RefrigtzDLL.ChessRules.BigKingCastleGray) && (!RefrigtzDLL.ChessRules.CastleActGray))
                                RefrigtzDLL.ChessRules.CastleActGray = true;
                            RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                        }
                        else
                        {
                            if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                            {
                                if (R.CromosomColumn == 0)
                                    Convert = true;
                            }
                            if ((RefrigtzDLL.ChessRules.SmallKingCastleBrown || RefrigtzDLL.ChessRules.BigKingCastleBrown) && (!RefrigtzDLL.ChessRules.CastleActBrown))
                                RefrigtzDLL.ChessRules.CastleActBrown = true;

                            RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActBrown, Convert);
                        }
                        SetBoxStatistic(RefrigtzDLL.AllDraw.SyntaxToWrite);
                        RefreshBoxStatistic();
                    }
                }
            }
            else
            {
                if (QuantumRefrigiz.AllDraw.TableListAction.Count > 1)
                {
                    QuantumRefrigiz.ChessGeneticAlgorithm R = new QuantumRefrigiz.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    if (R.FindGenToModified(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2], QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1], QuantumRefrigiz.AllDraw.TableListAction, 0, OrderPlate, true))
                    {
                        bool HitVal = false;
                        int Hit = 0;
                        if (R.Hit)
                            Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                        if (Hit != 0)
                            HitVal = true;
                        bool Convert = false;
                        if (OrderPlate == 1)
                        {
                            if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                            {
                                if (R.CromosomColumn == 7)
                                    Convert = true;
                            }
                            if ((QuantumRefrigiz.ChessRules.SmallKingCastleGray || QuantumRefrigiz.ChessRules.BigKingCastleGray) && (!QuantumRefrigiz.ChessRules.CastleActGray))
                                QuantumRefrigiz.ChessRules.CastleActGray = true;
                            QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActGray, Convert);
                        }
                        else
                        {
                            if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                            {
                                if (R.CromosomColumn == 0)
                                    Convert = true;
                            }
                            if ((QuantumRefrigiz.ChessRules.SmallKingCastleBrown || QuantumRefrigiz.ChessRules.BigKingCastleBrown) && (!QuantumRefrigiz.ChessRules.CastleActBrown))
                                QuantumRefrigiz.ChessRules.CastleActBrown = true;

                            QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActBrown, Convert);
                        }
                        SetBoxStatistic(QuantumRefrigiz.AllDraw.SyntaxToWrite);
                        RefreshBoxStatistic();
                    }
                }
            }
        }
        void Movements()
        {
            AllMove = true;
            Object O = new Object();
            lock (O)
            {
                if (!Quantum)
                {
                    RefrigtzDLL.ChessRules AA = null;
                    do
                    {
                        Thread.Sleep(250);
                        if (RefrigtzDLL.AllDraw.MouseClick == 1 //|| RefrigtzDLL.AllDraw.MouseClick == 2
                            )
                        {
                            //SetRefregitzBicture();
                            System.Threading.Thread.Sleep(50);

                        }
                        //else
                        System.Threading.Thread.Sleep(10);

                        int[,] TabStor = new int[8, 8];
                        for (int i = 0; i < 8; i++)
                        {
                            for (int j = 0; j < 8; j++)
                            {
                                TabStor[i, j] = Table[i, j];
                            }
                        }
                        //For Iterative Movewmnt
                        if (SetMovement((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased))
                            continue;
                        if (RowClickP == -1 && ColumnClickP == -1)
                            continue;
                        try
                        {
                            if (((!StateCC && StateCP) || Blitz) && Person)
                            {
                                if (Sec.radioButtonGrayOrder.Checked)
                                {
                                    if (ColumnClickP == ColumnRealeased && System.Math.Abs(RowClickP - RowRealesed) >= 2 && Table[(int)RowClickP, (int)ColumnClickP] == 6 && (RefrigtzDLL.ChessRules.CastleKingAllowedGray))
                                    {
                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(7);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 7, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 7))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;

                                                MovmentsCastleKing(7);

                                                int Castles = -1;

                                                if (!ArrangmentsChanged)
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP + 3 && Draw.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 0)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;
                                                            }
                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP - 4 && Draw.CastlesOnTable[i].Column == ColumnClickP & ColumnClick == 0)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                else
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP + 3 && Draw.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 7)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;

                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP - 4 && Draw.CastlesOnTable[i].Column == ColumnClickP && ColumnClick == 7)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //  Table = TabStor;
                                                        //  continue;
                                                    }
                                                }
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Draw.CastlesOnTable[Castles].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);



                                                Person = false;
                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }


                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);


                                                SetSyntax();

                                                Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                Draw.TableList.Clear();
                                                Draw.TableList.Add(Table);
                                                Draw.SetRowColumn(0);



                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                Clicked = false;
                                                RefrigtzDLL.ChessRules.CastleActGray = true;



                                                //TakeRoot.CalculateRootGray(Draw);

                                            }

                                            else
                                            {
                                                if (!ArrangmentsChanged)
                                                {
                                                    if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                else
                                                {
                                                    if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, King);
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }



                                            ////SetRefregitzBicture();
                                        }
                                    }
                                    else
                                        if (Table[(int)RowClickP, (int)ColumnClickP] == 1)
                                    {
                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(1);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {

                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 1))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                RefrigtzDLL.ThingsConverter.ActOfClickEqualTow = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnRealeased;
                                                CurrentKind = 1;
                                                ConvertWait = true;
                                                Draw.SolderesOnTable[Soldier].ConvertOperation((int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);
                                                Thread.Sleep(100);
                                                while (ConvertWait) ;
                                                int[,] TableCon = new int[8, 8];

                                                if (Draw.SolderesOnTable[Soldier].Convert)
                                                {

                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    /*   if (Draw.SolderesOnTable[Soldier].ConvertedToMinister)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 5;
                                                      else if (Draw.SolderesOnTable[Soldier].ConvertedToCastle)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 4;
                                                      else if (Draw.SolderesOnTable[Soldier].ConvertedToHourse)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 3;
                                                      else if (Draw.SolderesOnTable[Soldier].ConvertedToElefant)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 2;

                                                     */
                                                    Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                    RefrigtzDLL.ThingsConverter.ClickOcurred = false;
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }
                                                    Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                    Draw.TableList.Clear();
                                                    Draw.TableList.Add(Table);
                                                    Draw.SetRowColumn(0);




                                                }
                                                else
                                                {
                                                    int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                    bool HitVal = false;
                                                    if (Hit != 0)
                                                        HitVal = true;

                                                    Draw.SolderesOnTable[Soldier] = new RefrigtzDLL.DrawSoldier(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    Table[(int)RowRealesed, (int)ColumnRealeased] = 1;
                                                    Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }

                                                }
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Person = false;
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        Table[i, j] = TableCon[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Soldier, 1);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Draw.SolderesOnTable[Soldier] = new RefrigtzDLL.DrawSoldier(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Soldier);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 1;
                                                Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }


                                        }
                                        //SetRefregitzBicture();

                                    }
                                    else
                                            if (Table[(int)RowClickP, (int)ColumnClickP] == 2)
                                    {
                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(2);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 2, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 2))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 2;
                                                Draw.ElephantOnTable[Elefant] = new RefrigtzDLL.DrawElefant(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Elefant);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 2;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                Draw.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                Person = false;
                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Elefant, 2);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 2;
                                                Draw.ElephantOnTable[Elefant] = new RefrigtzDLL.DrawElefant(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Elefant);
                                                Draw.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }
                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                                if (Table[(int)RowClickP, (int)ColumnClickP] == 3)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(3);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 3, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 3))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 3;
                                                Draw.HoursesOnTable[Hourse] = new RefrigtzDLL.DrawHourse(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Hourse);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 3;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Hourse, 3);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 3;
                                                Draw.HoursesOnTable[Hourse] = new RefrigtzDLL.DrawHourse(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Hourse);
                                                Draw.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;

                                            }


                                        }
                                        //SetRefregitzBicture();

                                    }
                                    else if (Table[(int)RowClickP, (int)ColumnClickP] == 4)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(4);

                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 4, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 4))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 4;
                                                Draw.CastlesOnTable[Castle] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Castle);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 4;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Castle, 4);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 4;
                                                Draw.CastlesOnTable[Castle] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Castle);
                                                Draw.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }
                                        }

                                        //SetRefregitzBicture();
                                    }

                                    else
                                        if (Table[(int)RowClickP, (int)ColumnClickP] == 5)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(5);

                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {

                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 5, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 5))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 5;
                                                Draw.MinisterOnTable[Minister] = new RefrigtzDLL.DrawMinister(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Minister);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 5;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }

                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;

                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Minister, 5);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 5;
                                                Draw.MinisterOnTable[Minister] = new RefrigtzDLL.DrawMinister(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Minister);
                                                Draw.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                            if (Table[(int)RowClickP, (int)ColumnClickP] == 6)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(6);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 6, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 6))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 6;
                                                Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 6;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, King, 6);
                                                Clicked = false;
                                                continue;
                                            }

                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, King);
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }
                                        //SetRefregitzBicture();

                                    }
                                }


                                if (Sec.radioButtonBrownOrder.Checked)
                                {
                                    if (ColumnClickP == ColumnRealeased && System.Math.Abs(RowClickP - RowRealesed) >= 2 && Table[(int)RowClickP, (int)ColumnClickP] == -6 && (RefrigtzDLL.ChessRules.CastleKingAllowedBrown))
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-7);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -7, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -7))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;

                                                MovmentsCastleKing(-7);

                                                int Castles = -1;
                                                if (!ArrangmentsChanged)
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP + 3 && Draw.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 7)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;

                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP - 4 && Draw.CastlesOnTable[i].Column == ColumnClickP & ColumnClick == 0)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                else
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP + 3 && Draw.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 7)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                                        {
                                                            if (Draw.CastlesOnTable[i].Row == RowClickP - 4 && Draw.CastlesOnTable[i].Column == ColumnClickP && ColumnClick == 7)
                                                            {
                                                                Draw.CastlesOnTable[i] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            Draw.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            Draw.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Draw.CastlesOnTable[Castles].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);



                                                Person = false;
                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                Draw.TableList.Clear();
                                                Draw.TableList.Add(Table);
                                                Draw.SetRowColumn(0);



                                                RefrigtzDLL.AllDraw.DrawTable = false;
                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                Clicked = false;
                                                //RefrigtzDLL.ChessRules.CastleActBrown = true;
                                                //TakeRoot.CalculateRootGray(Draw);
                                                continue;
                                            }

                                            else
                                            {
                                                if (!ArrangmentsChanged)
                                                {
                                                    if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                else
                                                {
                                                    if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, King);
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }


                                            //SetRefregitzBicture();

                                        }
                                    }
                                    else
                                        if (Table[(int)RowClickP, (int)ColumnClickP] == -1)
                                    {

                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-1);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -1))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                RefrigtzDLL.ThingsConverter.ActOfClickEqualTow = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -1;
                                                ConvertWait = true;
                                                Draw.SolderesOnTable[Soldier].ConvertOperation((int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);

                                                while (ConvertWait) ;
                                                int[,] TableCon = new int[8, 8];
                                                if (Draw.SolderesOnTable[Soldier].Convert)
                                                {

                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    /* if (Draw.SolderesOnTable[Soldier].ConvertedToMinister)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -5;
                                                     else if (Draw.SolderesOnTable[Soldier].ConvertedToCastle)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -4;
                                                     else if (Draw.SolderesOnTable[Soldier].ConvertedToHourse)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -3;
                                                     else if (Draw.SolderesOnTable[Soldier].ConvertedToElefant)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -2;
                                                     */
                                                    Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                    RefrigtzDLL.ThingsConverter.ClickOcurred = false;
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }
                                                    Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                    Draw.TableList.Clear();
                                                    Draw.TableList.Add(Table);
                                                    Draw.SetRowColumn(0);



                                                }
                                                else
                                                {
                                                    int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                    bool HitVal = false;
                                                    if (Hit != 0)
                                                        HitVal = true;

                                                    Draw.SolderesOnTable[Soldier] = new RefrigtzDLL.DrawSoldier(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Soldier);
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    Table[(int)RowRealesed, (int)ColumnRealeased] = -1;
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }
                                                }
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        /// Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        Table[i, j] = TableCon[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Soldier, -1);
                                                Clicked = false;

                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -1;
                                                Draw.SolderesOnTable[Soldier] = new RefrigtzDLL.DrawSoldier(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Soldier);
                                                Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }
                                        //SetRefregitzBicture();

                                    }
                                    else
                                            if (Table[(int)RowClickP, (int)ColumnClickP] == -2)
                                    {
                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-2);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -2, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -2))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -2;
                                                Draw.ElephantOnTable[Elefant] = new RefrigtzDLL.DrawElefant(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Elefant);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -2;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Elefant, -2);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -2;
                                                Draw.ElephantOnTable[Elefant] = new RefrigtzDLL.DrawElefant(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Elefant);
                                                Draw.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }
                                        //SetRefregitzBicture();


                                    }
                                    else
                                                if (Table[(int)RowClickP, (int)ColumnClickP] == -3)
                                    {

                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-3);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -3, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -3))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -3;
                                                Draw.HoursesOnTable[Hourse] = new RefrigtzDLL.DrawHourse(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Hourse);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -3;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        ///continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                Draw.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Hourse, -3);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -3;
                                                Draw.HoursesOnTable[Hourse] = new RefrigtzDLL.DrawHourse(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Hourse);
                                                Draw.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                                    if (Table[(int)RowClickP, (int)ColumnClickP] == -4)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-4);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -4, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -4))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -4;
                                                Draw.CastlesOnTable[Castle] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Castle);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -4;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Draw.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Castle, -4);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -4;
                                                Draw.CastlesOnTable[Castle] = new RefrigtzDLL.DrawCastle(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Castle);
                                                Draw.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                                        if (Table[(int)RowClickP, (int)ColumnClickP] == -5)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-5);
                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -5, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -5))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -5;
                                                Draw.MinisterOnTable[Minister] = new RefrigtzDLL.DrawMinister(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Minister);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -5;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                Draw.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);
                                                //TakeRoot.CalculateRootGray(Draw);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Minister, -5);
                                                Clicked = false;

                                                continue;
                                            }
                                            else
                                            {
                                                Table[(int)RowClickP, (int)ColumnClickP] = -5;
                                                Draw.MinisterOnTable[Minister] = new RefrigtzDLL.DrawMinister(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Minister);

                                                Draw.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }


                                        }
                                        //SetRefregitzBicture();


                                    }
                                    else
                                                            if (Table[(int)RowClickP, (int)ColumnClickP] == -6)
                                    {


                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-6);

                                        }
                                        else
                                            if (RefrigtzDLL.AllDraw.MouseClick == 2)
                                        {
                                            if ((new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -6, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -6))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;
                                                RefrigtzDLL.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -6;
                                                Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -6;
                                                AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //  Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);


                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                RefrigtzDLL.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                                

                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, King, -6);
                                                Clicked = false;
                                                continue;
                                            }

                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                Draw.KingOnTable[King] = new RefrigtzDLL.DrawKing(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, King);
                                                Draw.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                            //SetRefregitzBicture();

                                        }


                                    }

                                }

                            }

                        }
                        catch (Exception T)
                        {
                            Log(T);

                            RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                            //Blitz = true; 
                            //Person = true;
                            //Clicked = true;
                            //StateCC = false;
                            //StateCP = true;
                            continue;
                        }
                        RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;

                        System.Threading.Thread.Sleep(10);
                    }

                    while (true);
                }
                else
                {
                    QuantumRefrigiz.ChessRules AA = null;
                    do
                    {
                        if (QuantumRefrigiz.AllDraw.MouseClick == 1 //|| QuantumRefrigiz.AllDraw.MouseClick == 2
                            )
                        {
                            //SetRefregitzBicture();
                            System.Threading.Thread.Sleep(50);

                        }
                        //else
                        System.Threading.Thread.Sleep(10);

                        int[,] TabStor = new int[8, 8];
                        for (int i = 0; i < 8; i++)
                        {
                            for (int j = 0; j < 8; j++)
                            {
                                TabStor[i, j] = Table[i, j];
                            }
                        }
                        //For Iterative Movewmnt
                        if (SetMovement((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased))
                            continue;
                        if (RowClickP == -1 && ColumnClickP == -1)
                            continue;
                        try
                        {
                            if (((!StateCC && StateCP) || Blitz) && Person)
                            {
                                if (Sec.radioButtonGrayOrder.Checked)
                                {
                                    if (ColumnClickP == ColumnRealeased && System.Math.Abs(RowClickP - RowRealesed) >= 2 && Table[(int)RowClickP, (int)ColumnClickP] == 6 && (QuantumRefrigiz.ChessRules.CastleKingAllowedGray))
                                    {
                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(7);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 7, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 7))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;


                                                MovmentsCastleKing(7);




                                                int Castles = -1;

                                                if (!ArrangmentsChanged)
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP + 3 && DrawQ.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 0)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;
                                                            }
                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP - 4 && DrawQ.CastlesOnTable[i].Column == ColumnClickP & ColumnClick == 0)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                else
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP + 3 && DrawQ.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 7)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;

                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP - 4 && DrawQ.CastlesOnTable[i].Column == ColumnClickP && ColumnClick == 7)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //  Table = TabStor;
                                                        //  continue;
                                                    }
                                                }
                                                DrawQ.CastlesOnTable[Castle].IsQuntumMove = true;
                                                DrawQ.KingOnTable[King].IsQuntumMove = true;
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                DrawQ.CastlesOnTable[Castles].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);


                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");

                                                Person = false;
                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }


                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);


                                                SetSyntax();

                                                DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                DrawQ.TableList.Clear();
                                                DrawQ.TableList.Add(Table);
                                                DrawQ.SetRowColumn(0);



                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                Clicked = false;
                                                QuantumRefrigiz.ChessRules.CastleActGray = true;



                                                //TakeRoot.CalculateRootGray(DrawQ);

                                            }

                                            else
                                            {
                                                if (!ArrangmentsChanged)
                                                {
                                                    if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                else
                                                {
                                                    if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, King);
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }



                                            ////SetRefregitzBicture();
                                        }
                                    }
                                    else
                                        if (Table[(int)RowClickP, (int)ColumnClickP] == 1)
                                    {
                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(1);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {

                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 1))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;



                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                QuantumRefrigiz.ThingsConverter.ActOfClickEqualTow = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnRealeased;
                                                CurrentKind = 1;
                                                ConvertWait = true;
                                                DrawQ.SolderesOnTable[Soldier].ConvertOperation((int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);
                                                Thread.Sleep(100);
                                                while (ConvertWait) ;
                                                int[,] TableCon = new int[8, 8];

                                                if (DrawQ.SolderesOnTable[Soldier].Convert)
                                                {

                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    /*   if (DrawQ.SolderesOnTable[Soldier].ConvertedToMinister)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 5;
                                                      else if (DrawQ.SolderesOnTable[Soldier].ConvertedToCastle)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 4;
                                                      else if (DrawQ.SolderesOnTable[Soldier].ConvertedToHourse)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 3;
                                                      else if (DrawQ.SolderesOnTable[Soldier].ConvertedToElefant)
                                                          Table[(int)RowRealesed, (int)ColumnRealeased] = 2;

                                                     */
                                                    DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                    QuantumRefrigiz.ThingsConverter.ClickOcurred = false;
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }
                                                    DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                    DrawQ.TableList.Clear();
                                                    DrawQ.TableList.Add(Table);
                                                    DrawQ.SetRowColumn(0);




                                                }
                                                else
                                                {
                                                    int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                    bool HitVal = false;
                                                    if (Hit != 0)
                                                        HitVal = true;

                                                    DrawQ.SolderesOnTable[Soldier] = new QuantumRefrigiz.DrawSoldierQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    Table[(int)RowRealesed, (int)ColumnRealeased] = 1;
                                                    DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }

                                                }
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                Person = false;
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        Table[i, j] = TableCon[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Soldier, 1);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                DrawQ.SolderesOnTable[Soldier] = new QuantumRefrigiz.DrawSoldierQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Soldier);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 1;
                                                DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }


                                        }
                                        //SetRefregitzBicture();

                                    }
                                    else
                                            if (Table[(int)RowClickP, (int)ColumnClickP] == 2)
                                    {
                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(2);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 2, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 2))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;



                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 2;
                                                DrawQ.ElephantOnTable[Elefant] = new QuantumRefrigiz.DrawElefantQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Elefant);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 2;
                                                DrawQ.ElephantOnTable[Elefant].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                DrawQ.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                Person = false;
                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Elefant, 2);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 2;
                                                DrawQ.ElephantOnTable[Elefant] = new QuantumRefrigiz.DrawElefantQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Elefant);
                                                DrawQ.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }
                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                                if (Table[(int)RowClickP, (int)ColumnClickP] == 3)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(3);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 3, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 3))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 3;
                                                DrawQ.HoursesOnTable[Hourse] = new QuantumRefrigiz.DrawHourseQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Hourse);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 3;
                                                DrawQ.HoursesOnTable[Hourse].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Hourse, 3);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 3;
                                                DrawQ.HoursesOnTable[Hourse] = new QuantumRefrigiz.DrawHourseQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Hourse);
                                                DrawQ.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;

                                            }


                                        }
                                        //SetRefregitzBicture();

                                    }
                                    else if (Table[(int)RowClickP, (int)ColumnClickP] == 4)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(4);

                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 4, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 4))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;



                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 4;
                                                DrawQ.CastlesOnTable[Castle] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Castle);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 4;
                                                DrawQ.CastlesOnTable[Castle].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);

                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Castle, 4);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 4;
                                                DrawQ.CastlesOnTable[Castle] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Castle);
                                                DrawQ.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }
                                        }

                                        //SetRefregitzBicture();
                                    }

                                    else
                                        if (Table[(int)RowClickP, (int)ColumnClickP] == 5)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(5);

                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {

                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 5, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 5))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 5;
                                                DrawQ.MinisterOnTable[Minister] = new QuantumRefrigiz.DrawMinisterQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, Minister);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 5;
                                                DrawQ.MinisterOnTable[Minister].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }

                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;

                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, Minister, 5);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 5;
                                                DrawQ.MinisterOnTable[Minister] = new QuantumRefrigiz.DrawMinisterQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, Minister);
                                                DrawQ.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                            if (Table[(int)RowClickP, (int)ColumnClickP] == 6)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(6);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 6, Table, 1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, 6))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, 1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Gray);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = 6;
                                                DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = 6;
                                                DrawQ.KingOnTable[King].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, 1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Gray);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, Table, OrderPlate * -1, King, 6);
                                                Clicked = false;
                                                continue;
                                            }

                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, King);
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }
                                        //SetRefregitzBicture();

                                    }
                                }


                                if (Sec.radioButtonBrownOrder.Checked)
                                {
                                    if (ColumnClickP == ColumnRealeased && System.Math.Abs(RowClickP - RowRealesed) >= 2 && Table[(int)RowClickP, (int)ColumnClickP] == -6 && (QuantumRefrigiz.ChessRules.CastleKingAllowedBrown))
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-7);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -7, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -7))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;


                                                MovmentsCastleKing(-7);

                                                int Castles = -1;
                                                if (!ArrangmentsChanged)
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP + 3 && DrawQ.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 7)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;

                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP - 4 && DrawQ.CastlesOnTable[i].Column == ColumnClickP & ColumnClick == 0)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                else
                                                {
                                                    if (RowClickP < RowRealesed)
                                                    {
                                                        Table[(int)RowRealesed - 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP + 3 && DrawQ.CastlesOnTable[i].Column == ColumnClick && ColumnClick == 7)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed + 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP + 3;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }


                                                    }
                                                    else
                                                    {
                                                        Table[(int)RowRealesed + 1, (int)ColumnRealeased] = -4;
                                                        Table[(int)RowRealesed - 2, (int)ColumnRealeased] = 0;
                                                        for (int i = 0; i < DrawQ.CastleHigh; i++)
                                                        {
                                                            if (DrawQ.CastlesOnTable[i].Row == RowClickP - 4 && DrawQ.CastlesOnTable[i].Column == ColumnClickP && ColumnClick == 7)
                                                            {
                                                                DrawQ.CastlesOnTable[i] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed - 1, ColumnRealeased, Color.Brown, Table, OrderPlate, false, King);
                                                                Castles = i;
                                                                continue;

                                                            }

                                                        }
                                                        if (Castles != -1)
                                                        {
                                                            DrawQ.CastlesOnTable[Castles].Row = RowClickP - 4;
                                                            DrawQ.CastlesOnTable[Castles].Column = ColumnClickP;
                                                        }

                                                    }
                                                }
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.KingOnTable[King].IsQuntumMove = true;
                                                DrawQ.CastlesOnTable[Castle].IsQuntumMove = true;
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                DrawQ.CastlesOnTable[Castles].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);


                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");

                                                Person = false;
                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                DrawQ.TableList.Clear();
                                                DrawQ.TableList.Add(Table);
                                                DrawQ.SetRowColumn(0);



                                                QuantumRefrigiz.AllDraw.DrawTable = false;
                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                GrayTimer.StopTime();
                                                BrownTimer.StartTime("BrownTimer");
                                                InsertTableAtDataBase(Table);
                                                Clicked = false;
                                                //QuantumRefrigiz.ChessRules.CastleActBrown = true;
                                                //TakeRoot.CalculateRootGray(DrawQ);
                                                continue;
                                            }

                                            else
                                            {
                                                if (!ArrangmentsChanged)
                                                {
                                                    if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                else
                                                {
                                                    if (ColumnClickP == 7)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = 6;
                                                    else
                                                        if (ColumnClickP == 0)
                                                        Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                }
                                                DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Gray, Table, OrderPlate, false, King);
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }


                                            //SetRefregitzBicture();

                                        }
                                    }
                                    else
                                        if (Table[(int)RowClickP, (int)ColumnClickP] == -1)
                                    {

                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-1);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -1))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                QuantumRefrigiz.ThingsConverter.ActOfClickEqualTow = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -1;
                                                ConvertWait = true;
                                                DrawQ.SolderesOnTable[Soldier].ConvertOperation((int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);

                                                while (ConvertWait) ;
                                                int[,] TableCon = new int[8, 8];
                                                if (DrawQ.SolderesOnTable[Soldier].Convert)
                                                {

                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    /* if (DrawQ.SolderesOnTable[Soldier].ConvertedToMinister)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -5;
                                                     else if (DrawQ.SolderesOnTable[Soldier].ConvertedToCastle)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -4;
                                                     else if (DrawQ.SolderesOnTable[Soldier].ConvertedToHourse)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -3;
                                                     else if (DrawQ.SolderesOnTable[Soldier].ConvertedToElefant)
                                                         Table[(int)RowRealesed, (int)ColumnRealeased] = -2;
                                                     */
                                                    DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                    QuantumRefrigiz.ThingsConverter.ClickOcurred = false;
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }
                                                    DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                                    DrawQ.TableList.Clear();
                                                    DrawQ.TableList.Add(Table);
                                                    DrawQ.SetRowColumn(0);



                                                }
                                                else
                                                {
                                                    int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                    bool HitVal = false;
                                                    if (Hit != 0)
                                                        HitVal = true;

                                                    DrawQ.SolderesOnTable[Soldier] = new QuantumRefrigiz.DrawSoldierQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Soldier);
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    Table[(int)RowRealesed, (int)ColumnRealeased] = -1;
                                                    for (int i = 0; i < 8; i++)
                                                    {
                                                        for (int j = 0; j < 8; j++)
                                                        {
                                                            TableCon[i, j] = Table[i, j];
                                                        }
                                                    }
                                                }
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        /// Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        Table[i, j] = TableCon[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Soldier, -1);
                                                Clicked = false;

                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -1;
                                                DrawQ.SolderesOnTable[Soldier] = new QuantumRefrigiz.DrawSoldierQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Soldier);
                                                DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }
                                        //SetRefregitzBicture();

                                    }
                                    else
                                            if (Table[(int)RowClickP, (int)ColumnClickP] == -2)
                                    {
                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-2);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -2, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -2))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -2;
                                                DrawQ.ElephantOnTable[Elefant] = new QuantumRefrigiz.DrawElefantQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Elefant);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -2;
                                                DrawQ.ElephantOnTable[Elefant].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Elefant, -2);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -2;
                                                DrawQ.ElephantOnTable[Elefant] = new QuantumRefrigiz.DrawElefantQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Elefant);
                                                DrawQ.ElephantOnTable[Elefant].DrawElefantOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }
                                        //SetRefregitzBicture();


                                    }
                                    else
                                                if (Table[(int)RowClickP, (int)ColumnClickP] == -3)
                                    {

                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-3);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -3, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -3))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;



                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -3;
                                                DrawQ.HoursesOnTable[Hourse] = new QuantumRefrigiz.DrawHourseQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Hourse);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -3;
                                                DrawQ.HoursesOnTable[Hourse].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        ///continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                DrawQ.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Hourse, -3);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -3;
                                                DrawQ.HoursesOnTable[Hourse] = new QuantumRefrigiz.DrawHourseQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Hourse);
                                                DrawQ.HoursesOnTable[Hourse].DrawHourseOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                                    if (Table[(int)RowClickP, (int)ColumnClickP] == -4)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-4);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -4, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -4))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -4;
                                                DrawQ.CastlesOnTable[Castle] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Castle);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -4;
                                                DrawQ.CastlesOnTable[Castle].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        //continue;
                                                    }
                                                }
                                                DrawQ.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Castle, -4);
                                                Clicked = false;
                                                continue;
                                            }
                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -4;
                                                DrawQ.CastlesOnTable[Castle] = new QuantumRefrigiz.DrawCastleQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Castle);
                                                DrawQ.CastlesOnTable[Castle].DrawCastleOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                        }

                                        //SetRefregitzBicture();
                                    }
                                    else
                                                        if (Table[(int)RowClickP, (int)ColumnClickP] == -5)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-5);
                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -5, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -5))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -5;
                                                DrawQ.MinisterOnTable[Minister] = new QuantumRefrigiz.DrawMinisterQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Brown, Table, OrderPlate, false, Minister);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -5;
                                                DrawQ.MinisterOnTable[Minister].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        // Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                DrawQ.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);

                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);
                                                //TakeRoot.CalculateRootGray(DrawQ);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                
                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, Minister, -5);
                                                Clicked = false;

                                                continue;
                                            }
                                            else
                                            {
                                                Table[(int)RowClickP, (int)ColumnClickP] = -5;
                                                DrawQ.MinisterOnTable[Minister] = new QuantumRefrigiz.DrawMinisterQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, Minister);

                                                DrawQ.MinisterOnTable[Minister].DrawMinisterOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }


                                        }
                                        //SetRefregitzBicture();


                                    }
                                    else
                                                            if (Table[(int)RowClickP, (int)ColumnClickP] == -6)
                                    {


                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {
                                            MovmentneDraw(-6);

                                        }
                                        else
                                            if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                                        {
                                            if ((new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -6, Table, -1, (int)RowClickP, (int)ColumnClickP)).Rules((int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown, -6))
                                            {
                                                if (CheckMovment(Table, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, -1))
                                                    continue;


                                                QuantumRefrigiz.AllDraw.Less = CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowClickP, (int)ColumnClickP, (int)RowRealesed, (int)ColumnRealeased, Color.Brown);
                                                int Hit = Table[(int)RowRealesed, (int)ColumnRealeased];
                                                bool HitVal = false;
                                                if (Hit != 0)
                                                    HitVal = true;
                                                LastRow = (int)RowRealesed;
                                                LastColumn = (int)ColumnClickP;
                                                CurrentKind = -6;
                                                DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowRealesed, ColumnRealeased, Color.Gray, Table, OrderPlate, false, King);
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                Table[(int)RowRealesed, (int)ColumnRealeased] = -6;
                                                DrawQ.KingOnTable[King].IsQuntumMove = true;
                                                AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, 1, Table, OrderPlate, -1, -1);
                                                if (AA.Check(Table, OrderPlate))
                                                {
                                                    if (AA.CheckGray && OrderPlate == 1)
                                                    {
                                                        //  Table = TabStor;
                                                        // continue;
                                                    }

                                                    else
                                                        if (AA.CheckBrown && OrderPlate == -1)
                                                    {
                                                        //Table = TabStor;
                                                        // continue;
                                                    }
                                                }
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);


                                                int[,] TableCon = new int[8, 8];
                                                for (int i = 0; i < 8; i++)
                                                {
                                                    for (int j = 0; j < 8; j++)
                                                    {
                                                        TableCon[i, j] = Table[i, j];
                                                    }
                                                }
                                                QuantumRefrigiz.AllDraw.TableListAction.Add(TableCon);
                                                Person = false;
                                                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                                                {
                                                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                                                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                                                }
                                                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(System.Math.Abs(CurrentKind), Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);

                                                SetSyntax();

                                                OrderPlate = OrderPlate * -1;
                                                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                                                

                                                BrownTimer.StopTime();
                                                GrayTimer.StartTime("GrayTimer");
                                                InsertTableAtDataBase(Table);
                                                SetBoxText("\r\nWait...");
                                                RefreshBoxText();
                                                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, King, -6);
                                                Clicked = false;
                                                continue;
                                            }

                                            else
                                            {

                                                Table[(int)RowClickP, (int)ColumnClickP] = -6;
                                                DrawQ.KingOnTable[King] = new QuantumRefrigiz.DrawKingQ(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, RowClickP, ColumnClickP, Color.Brown, Table, OrderPlate, false, King);
                                                DrawQ.KingOnTable[King].DrawKingOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                                Clicked = false;
                                            }

                                            //SetRefregitzBicture();

                                        }


                                    }

                                }

                            }

                        }
                        catch (Exception T)
                        {
                            Log(T);
                            QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;
                            //Blitz = true; 
                            //Person = true;
                            //Clicked = true;
                            //StateCC = false;
                            //StateCP = true;
                            continue;
                        }
                        QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;

                        System.Threading.Thread.Sleep(100);

                    }
                    while (true);

                }
                //AllMove = false;
            }
        }

        void Wait()
        {
            do
            {
                Thread.Sleep(100);
            } while (Clicked);
        }
        String Alphabet()
        {
            String A = "";
            if (RowRealesed == 0)
                A = "a";
            else
                if (RowRealesed == 1)
                A = "b";
            else
                    if (RowRealesed == 2)
                A = "c";
            else
                        if (RowRealesed == 3)
                A = "d";
            else
                            if (RowRealesed == 4)
                A = "e";
            else
                                if (RowRealesed == 5)
                A = "f";
            else
                                    if (RowRealesed == 6)
                A = "g";
            else
                                        if (RowRealesed == 7)
                A = "h";
            return A;




        }
        String Number()
        {
            String A = "";
            if (ColumnRealeased == 7)
                A = "0";
            else
                if (ColumnRealeased == 6)
                A = "1";
            else
                    if (ColumnRealeased == 5)
                A = "2";
            else
                        if (ColumnRealeased == 4)
                A = "3";
            else
                            if (ColumnRealeased == 3)
                A = "4";
            else
                                if (ColumnRealeased == 2)
                A = "5";
            else
                                    if (ColumnRealeased == 1)
                A = "6";
            else
                                        if (ColumnRealeased == 0)
                A = "7";
            return A;




        }
        String ListToString(List<char> A)
        {
            String B = "";

            for (int i = 0; i < A.Count; i++)
                B += A[i];
            return B;
        }
        bool empty(int Row, int Column)
        {
            bool S = false;
            if (Table[Row, Column] == 0)
                S = true;
            else
                S = false;
            return S;
        }
        int piece_on(int Row, int Column)
        {
            return 6 + Table[Row, Column];
        }
        String Fen()
        {
            bool StartPos = false;
            if (RowRealesed == -1 || ColumnRealeased == -1)
                StartPos = true;

            int emptyCnt;
            String ss = "";

            for (int r = 0; r <= 7; ++r)
            {
                for (int f = 0; f <= 7; ++f)
                {
                    for (emptyCnt = 0; f <= 7 && empty(f, r); ++f)
                        ++emptyCnt;

                    if (emptyCnt != 0)
                        ss += emptyCnt;

                    if (f <= 7)
                        ss += PieceToChar[piece_on(f, r)];
                }

                if (r != 7)
                    ss += '/';
            }
            if (!BobSection)
                ss += " w ";
            else
                ss += " b ";
            if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                ss += "K";

            if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                ss += "Q";

            if (RefrigtzDLL.ChessRules.SmallKingCastleBrown)
                ss += "k";

            if (RefrigtzDLL.ChessRules.BigKingCastleBrown)
                ss += "q";

            if (!RefrigtzDLL.ChessRules.CastleKingAllowedGray && !RefrigtzDLL.ChessRules.CastleKingAllowedBrown)
                ss += '-';
            String S = " - ";

            if (!StartPos)
            {
                if (!BobSection)
                {
                    if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 1)
                    {
                        S = " ";
                        S += Alphabet() + ((int)(7 - ColumnRealeased)).ToString();
                        S += " ";
                    }
                }
                else
                {

                    if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 1)
                    {
                        S = " ";
                        S += Alphabet() + ((int)(7 - ColumnRealeased)).ToString();
                        S += " ";
                    }
                }
            }
            else
            {
                S = " ";
                S += "-";
                S += " ";
            }
            StockMoveBase = MovmentsNumber / 2;
            StockMove = MovmentsNumber % 2;
            S += (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";

            ss += S;

            //if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
            //   StockMoveBase++;
            //else
            //    StockMove++;

            ss = "position fen " + ss;

            return ss;
            /*

            int Start = -1;

           
            //When Refregitz Moves
            if (!BobSection)
            {
                if (FenCastling == -1)
                {
                    //When Index first is Solders.
                    if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 1)
                    {
                        String fs = ListToString(fenS);
                        int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                        Start = Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6;

                        if (fenS[Start + (int)RowClickP] == 'P')
                            fenS[Start + (int)RowClickP] = '1';
                        else
                            fenS[Start + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + (int)RowClickP]) + 1));

                        String S = ((int)RowRealesed).ToString() + "P" + ((int)(7 - ColumnRealeased)).ToString();
                        fs = ListToString(fenS);

                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);


                        fs = ListToString(fenS); fenS = new List<char>(fs);
                        fs = fs.Remove(Dum1 + Dum2 + Dum3 + Dum4, (Dum1 + Dum2 + Dum3 + Dum4 + Dum5) - (Dum1 + Dum2 + Dum3 + Dum4) - 1);
                        fs = fs.Insert(Dum1 + Dum2 + Dum3 + Dum4, S);
                        fenS = new List<char>(fs);

                        S = "w KQkq " + Alphabet() + Number() + " " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                        fs = ListToString(fenS);

                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);
                        fs = ListToString(fenS); fenS = new List<char>(fs);
                        fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                        fenS = new List<char>(fs);
                        if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                            StockMoveBase++;
                        else
                            StockMove++;
                    }
                    else
                        if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 2)
                        {
                            String fs = ListToString(fenS);
                            int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);

                            Start = Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6;
                            if (fenS[Start + 9 + (int)RowClickP] == 'N')
                                fenS[Start + 9 + (int)RowClickP] = '1';
                            else
                                fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                            String S = ((int)RowRealesed).ToString() + "N" + ((int)(7 - ColumnRealeased)).ToString();
                            fs = ListToString(fenS);
                            fs = fs.Remove(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, (Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6) - (Dum1 + Dum2 + Dum3 + Dum4 + Dum5) - 1);
                            fs = fs.Insert(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, S);
                            fenS = new List<char>(fs);

                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);


                            S = "w KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                            fs = ListToString(fenS);

                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);
                            fs = ListToString(fenS); fenS = new List<char>(fs);
                            fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                            fenS = new List<char>(fs);


                            if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                StockMoveBase++;
                            else
                                StockMove++;
                        }
                        else
                            if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 3)
                            {
                                String fs = ListToString(fenS);
                                int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);

                                Start = Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6;
                                if (fenS[Start + 9 + (int)RowClickP] == 'B')
                                    fenS[Start + 9 + (int)RowClickP] = '1';
                                else
                                    fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                String S = ((int)RowRealesed).ToString() + "B" + ((int)(7 - ColumnRealeased)).ToString();
                                fs = ListToString(fenS);
                                fs = fs.Remove(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, (Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6) - (Dum1 + Dum2 + Dum3 + Dum4 + Dum5) - 1);
                                fs = fs.Insert(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, S);
                                fenS = new List<char>(fs);

                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);


                                S = "w KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                fs = ListToString(fenS);

                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);
                                fs = ListToString(fenS); fenS = new List<char>(fs);
                                fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                                fenS = new List<char>(fs);



                                if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                    StockMoveBase++;
                                else
                                    StockMove++;
                            }
                            else
                                if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 4)
                                {
                                    String fs = ListToString(fenS);
                                    int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);

                                    Start = Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6;
                                    if (fenS[Start + 9 + (int)RowClickP] == 'R')
                                        fenS[Start + 9 + (int)RowClickP] = '1';
                                    else
                                        fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                    String S = ((int)RowRealesed).ToString() + "R" + ((int)(7 - ColumnRealeased)).ToString();
                                    fs = ListToString(fenS);
                                    fs = fs.Remove(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, (Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6) - (Dum1 + Dum2 + Dum3 + Dum4 + Dum5) - 1);
                                    fs = fs.Insert(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, S);
                                    fenS = new List<char>(fs);

                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);


                                    S = "w KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                    fs = ListToString(fenS);

                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);
                                    fs = ListToString(fenS); fenS = new List<char>(fs);
                                    fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                                    fenS = new List<char>(fs);



                                    if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                        StockMoveBase++;
                                    else
                                        StockMove++;
                                }
                                else
                                    if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 5)
                                    {
                                        String fs = ListToString(fenS);
                                        int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                                        Start = Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6;
                                        if (fenS[Start + 9 + (int)RowClickP] == 'Q')
                                            fenS[Start + 9 + (int)RowClickP] = '1';
                                        else
                                            fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                        String S = ((int)RowRealesed).ToString() + "Q" + ((int)(7 - ColumnRealeased)).ToString();
                                        fs = ListToString(fenS);
                                        fs = fs.Remove(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, (Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6) - (Dum1 + Dum2 + Dum3 + Dum4 + Dum5) - 1);
                                        fs = fs.Insert(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, S);
                                        fenS = new List<char>(fs);

                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);


                                        S = "w KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                        fs = ListToString(fenS);

                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                                        fs = ListToString(fenS); fenS = new List<char>(fs);
                                        fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                                        fenS = new List<char>(fs);



                                        if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                            StockMoveBase++;
                                        else
                                            StockMove++;
                                    }
                                    else
                                        if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 6)
                                        {
                                            String fs = ListToString(fenS);
                                            int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);

                                            Start = Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6;
                                            if (fenS[Start + 9 + (int)RowClickP] == 'K')
                                                fenS[Start + 9 + (int)RowClickP] = '1';
                                            else
                                                fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                            String S = ((int)RowRealesed).ToString() + "K" + ((int)(7 - ColumnRealeased)).ToString();
                                            fs = ListToString(fenS);
                                            fs = fs.Remove(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, (Dum1 + Dum2 + Dum3 + Dum4 + Dum5 + Dum6) - (Dum1 + Dum2 + Dum3 + Dum4 + Dum5) - 1);
                                            fs = fs.Insert(Dum1 + Dum2 + Dum3 + Dum4 + Dum5, S);
                                            fenS = new List<char>(fs);

                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);


                                            S = "w KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                            fs = ListToString(fenS);

                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);
                                            fs = ListToString(fenS); fenS = new List<char>(fs);
                                            fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                                            fenS = new List<char>(fs);


                                            if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                                StockMoveBase++;
                                            else
                                                StockMove++;
                                        }
                }
                else
                    if (FenCastling == 0)
                    {
                        String fs = ListToString(fenS);
                        int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;

                        String S = "w K-kq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                        fs = ListToString(fenS);

                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);
                        fs = ListToString(fenS); fenS = new List<char>(fs);
                        fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                        fenS = new List<char>(fs);


                        if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                            StockMoveBase++;
                        else
                            StockMove++;

                    }
                    else
                        if (FenCastling == 1)
                        {
                            String fs = ListToString(fenS);
                            int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;

                            String S = "w -Qkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                            fs = ListToString(fenS);

                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);
                            fs = ListToString(fenS); fenS = new List<char>(fs);
                            fs = fs.Replace(fs.Substring(fs.IndexOf("b "), fs.size() - fs.IndexOf("b ")), S);
                            fenS = new List<char>(fs);


                            if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                StockMoveBase++;
                            else
                                StockMove++;

                        }
                
                }
            else
            {
                if (FenCastling == -1)
                {
                    //When Index first is Solders.
                    if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 1)
                    {
                        String fs = ListToString(fenS);
                        int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                        Start = Dum1;

                        if (fenS[Start + (int)RowClickP] == 'p')
                            fenS[Start + (int)RowClickP] = '1';
                        else
                            fenS[Start + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + (int)RowClickP]) + 1));

                        fs = ListToString(fenS);
                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                        String S = ((int)RowRealesed).ToString() + "P" + ((int)(7 - ColumnRealeased)).ToString();
                        fs = ListToString(fenS);
                        fs = fs.Remove(Dum1 + Dum2, (Dum1 + Dum2 + Dum3) - (Dum1 + Dum2) - 1);
                        fs = fs.Insert(Dum1 + Dum2, S);
                        fenS = new List<char>(fs);

                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);


                        fs = ListToString(fenS); fenS = new List<char>(fs);

                        S = "b KQkq " + Alphabet() + Number() + " " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                        fs = ListToString(fenS);

                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);
                        fs = ListToString(fenS);
                        fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ") - 1), S);
                        fenS = new List<char>(fs);
                        if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                            StockMoveBase++;
                        else
                            StockMove++;
                    }
                    else
                        if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 2)
                        {
                            String fs = ListToString(fenS);
                            int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);

                            Start = Dum1 + Dum2;
                            if (fenS[Start + 9 + (int)RowClickP] == 'n')
                                fenS[Start + 9 + (int)RowClickP] = '1';
                            else
                                fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                            fs = ListToString(fenS);
                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);

                            String S = ((int)RowRealesed).ToString() + "N" + ((int)(7 - ColumnRealeased)).ToString();
                            fs = ListToString(fenS);
                            fs = fs.Remove(Dum1, (Dum1 + Dum2) - (Dum1) - 1);
                            fs = fs.Insert(Dum1, S);
                            fenS = new List<char>(fs);

                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);


                            S = "b KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                            fs = ListToString(fenS);

                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);
                            fs = ListToString(fenS); fenS = new List<char>(fs);
                            fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ") - 1), S);
                            fenS = new List<char>(fs);

                            if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                StockMoveBase++;
                            else
                                StockMove++;
                        }
                        else
                            if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 3)
                            {
                                String fs = ListToString(fenS);
                                int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);

                                Start = Dum1 + Dum2;
                                if (fenS[Start + 9 + (int)RowClickP] == 'b')
                                    fenS[Start + 9 + (int)RowClickP] = '1';
                                else
                                    fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                fs = ListToString(fenS);
                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);

                                String S = ((int)RowRealesed).ToString() + "B" + ((int)(7 - ColumnRealeased)).ToString();
                                fs = ListToString(fenS);
                                fs = fs.Remove(Dum1, (Dum1 + Dum2) - (Dum1) - 1);
                                fs = fs.Insert(Dum1, S);
                                fenS = new List<char>(fs);

                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);


                                S = "b KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                fs = ListToString(fenS);

                                Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum1, fs.size() - Dum1);
                                Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum2, fs.size() - Dum2);
                                Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum3, fs.size() - Dum3);
                                Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum4, fs.size() - Dum4);
                                Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum5, fs.size() - Dum5);
                                Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                fs = fs.Substring(Dum6, fs.size() - Dum6);
                                fs = ListToString(fenS); fenS = new List<char>(fs);
                                fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ") - 1), S);
                                fenS = new List<char>(fs);

                                if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                    StockMoveBase++;
                                else
                                    StockMove++;
                            }
                            else
                                if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 4)
                                {
                                    String fs = ListToString(fenS);
                                    int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);

                                    Start = Dum1 + Dum2;
                                    if (fenS[Start + 9 + (int)RowClickP] == 'r')
                                        fenS[Start + 9 + (int)RowClickP] = '1';
                                    else
                                        fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                    fs = ListToString(fenS);
                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);

                                    String S = ((int)RowRealesed).ToString() + "R" + ((int)(7 - ColumnRealeased)).ToString();
                                    fs = ListToString(fenS);
                                    fs = fs.Remove(Dum1, (Dum1 + Dum2) - (Dum1) - 1);
                                    fs = fs.Insert(Dum1, S);
                                    fenS = new List<char>(fs);

                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);


                                    S = "b KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                    fs = ListToString(fenS);

                                    Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum1, fs.size() - Dum1);
                                    Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum2, fs.size() - Dum2);
                                    Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum3, fs.size() - Dum3);
                                    Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum4, fs.size() - Dum4);
                                    Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum5, fs.size() - Dum5);
                                    Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                    fs = fs.Substring(Dum6, fs.size() - Dum6);
                                    fs = ListToString(fenS); fenS = new List<char>(fs);
                                    fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ") - 1), S);
                                    fenS = new List<char>(fs);

                                    if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                        StockMoveBase++;
                                    else
                                        StockMove++;
                                }
                                else
                                    if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 5)
                                    {
                                        String fs = ListToString(fenS);
                                        int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                                        Start = Dum1 + Dum2;
                                        if (fenS[Start + 9 + (int)RowClickP] == 'q')
                                            fenS[Start + 9 + (int)RowClickP] = '1';
                                        else
                                            fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));


                                        fs = ListToString(fenS);
                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);

                                        String S = ((int)RowRealesed).ToString() + "Q" + ((int)(7 - ColumnRealeased)).ToString();
                                        fs = ListToString(fenS);
                                        fs = fs.Remove(Dum1, (Dum1 + Dum2) - (Dum1) - 1);
                                        fs = fs.Insert(Dum1, S);
                                        fenS = new List<char>(fs);

                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);


                                        S = "b KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                        fs = ListToString(fenS);

                                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                        fs = fs.Substring(Dum6, fs.size() - Dum6);
                                        fs = ListToString(fenS); fenS = new List<char>(fs);
                                        fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ") - 1), S);
                                        fenS = new List<char>(fs);

                                        if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                            StockMoveBase++;
                                        else
                                            StockMove++;
                                    }
                                    else
                                        if (System.Math.Abs(Table[(int)RowRealesed, (int)ColumnRealeased]) == 6)
                                        {
                                            String fs = ListToString(fenS);
                                            int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;
                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);

                                            Start = Dum1 + Dum2;
                                            if (fenS[Start + 9 + (int)RowClickP] == 'k')
                                                fenS[Start + 9 + (int)RowClickP] = '1';
                                            else
                                                fenS[Start + 9 + (int)RowClickP] = System.Convert.ToChar((System.Convert.ToInt32(fenS[Start + 9 + (int)RowClickP]) + 1));

                                            fs = ListToString(fenS);
                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);

                                            String S = ((int)RowRealesed).ToString() + "K" + ((int)(7 - ColumnRealeased)).ToString();
                                            fs = ListToString(fenS);
                                            fs = fs.Remove(Dum1, (Dum1 + Dum2) - (Dum1) - 1);
                                            fs = fs.Insert(Dum1, S);
                                            fenS = new List<char>(fs);

                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);


                                            S = "b KQkq - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                                            fs = ListToString(fenS);

                                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                                            fs = fs.Substring(Dum6, fs.size() - Dum6);
                                            fs = ListToString(fenS); fenS = new List<char>(fs);
                                            fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ") - 1), S);
                                            fenS = new List<char>(fs);

                                            if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                                StockMoveBase++;
                                            else
                                                StockMove++;
                                        }
                }
                else
                    if (FenCastling == 0)
                    {
                        String fs = ListToString(fenS);
                        int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;

                        String S = "b KQk- - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                        fs = ListToString(fenS);

                        Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum1, fs.size() - Dum1);
                        Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum2, fs.size() - Dum2);
                        Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum3, fs.size() - Dum3);
                        Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum4, fs.size() - Dum4);
                        Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum5, fs.size() - Dum5);
                        Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                        fs = fs.Substring(Dum6, fs.size() - Dum6);
                        fs = ListToString(fenS); fenS = new List<char>(fs);
                        fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ")), S);
                        fenS = new List<char>(fs);


                        if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                            StockMoveBase++;
                        else
                            StockMove++;

                    }
                    else
                        if (FenCastling == 1)
                        {
                            String fs = ListToString(fenS);
                            int Dum1 = 0, Dum2 = 0, Dum3 = 0, Dum4 = 0, Dum5 = 0, Dum6 = 0;

                            String S = "b KQ-q - " + (StockMoveBase).ToString() + " " + ((int)StockMove).ToString() + "\n";
                            fs = ListToString(fenS);

                            Dum1 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum1, fs.size() - Dum1);
                            Dum2 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum2, fs.size() - Dum2);
                            Dum3 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum3, fs.size() - Dum3);
                            Dum4 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum4, fs.size() - Dum4);
                            Dum5 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum5, fs.size() - Dum5);
                            Dum6 = fs.Substring(0, fs.IndexOf("/")).size() + 1;
                            fs = fs.Substring(Dum6, fs.size() - Dum6);
                            fs = ListToString(fenS); fenS = new List<char>(fs);
                            fs = fs.Replace(fs.Substring(fs.IndexOf("w "), fs.size() - fs.IndexOf("w ")), S);
                            fenS = new List<char>(fs);


                            if (MovmentsNumber % 2 == 0 && MovmentsNumber != 0)
                                StockMoveBase++;
                            else
                                StockMove++;

                        }
            }
                RowClick = -1;
                ColumnClick = -1;
                RowClickP = -1;
                ColumnClickP = -1;
                RowRealesed = -1;
                ColumnRealeased = -1;

            */
            //return fenS.ToString();


        }
        private static StringBuilder sortOutPut = new StringBuilder(null);
        private static int numOutputLines = 0;

        private static void SortOutputHandler(object sendingProcess,
           DataReceivedEventArgs outLine)
        {
            // Collect the sort command output.
            if (!String.IsNullOrEmpty(outLine.Data))
            {
                numOutputLines++;

                // Add the text to the collected output.
                sortOutPut.Append(Environment.NewLine +
                    "[" + numOutputLines.ToString() + "] - " + outLine.Data);
            }
        }
        int SetRowColumn(String A)
        {
            try
            {
                if (A[0] == 'a')
                    RowClickP = 0;
                else
                    if (A[0] == 'b')
                    RowClickP = 1;
                else
                        if (A[0] == 'c')
                    RowClickP = 2;
                else
                            if (A[0] == 'd')
                    RowClickP = 3;
                else
                                if (A[0] == 'e')
                    RowClickP = 4;
                else
                                    if (A[0] == 'f')
                    RowClickP = 5;
                else
                                        if (A[0] == 'g')
                    RowClickP = 6;
                else
                                            if (A[0] == 'h')
                    RowClickP = 7;
                ColumnClickP = 7 - ((System.Convert.ToInt32(A[1]) - 48) - 1);
                ;
                if (A[2] == 'a')
                    RowRealesed = 0;
                else
                    if (A[2] == 'b')
                    RowRealesed = 1;
                else
                        if (A[2] == 'c')
                    RowRealesed = 2;
                else
                            if (A[2] == 'd')
                    RowRealesed = 3;
                else
                                if (A[2] == 'e')
                    RowRealesed = 4;
                else
                                    if (A[2] == 'f')
                    RowRealesed = 5;
                else
                                        if (A[2] == 'g')
                    RowRealesed = 6;
                else
                                            if (A[2] == 'h')
                    RowRealesed = 7;
                ColumnRealeased = 7 - ((System.Convert.ToInt32(A[3]) - 48) - 1);
                if (A.Length == 5)
                {
                    if (A[4] == 'p')
                        return -1;
                    else
                        if (A[4] == 'n')
                        return -3;
                    else
                            if (A[4] == 'b')
                        return -2;
                    else
                                if (A[4] == 'r')
                        return -4;
                    else
                                    if (A[4] == 'q')
                        return -5;
                    else
                                        if (A[4] == 'P')
                        return 1;
                    else
                                            if (A[4] == 'N')
                        return 3;
                    else
                                                if (A[4] == 'B')
                        return 2;
                    else
                                                    if (A[4] == 'R')
                        return 4;
                    else
                                                        if (A[4] == 'Q')
                        return 5;



                }
            }
            catch (Exception t)
            {
                Log(t);
                return -1;
            }
            return 0;

        }
        void SetRowColumnReleasedAndClickP()
        {
            if (!Quantum)
            {
                if (MovmentsNumber >= 1)
                {
                    int[,] Table1 = new int[8, 8];
                    int[,] Table2 = new int[8, 8];
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            Table1[i, j] = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][i, j];
                        }
                    }
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            Table2[i, j] = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][i, j];
                        }
                    }
                    for (int i = 0; i < 8; i++)
                        for (int j = 0; j < 8; j++)
                        {
                            if (Table1[i, j] != Table2[i, j])
                            {
                                if (Table1[5, 7] == -6 && Table1[7, 7] == -4 && Table2[5, 7] == 0 && Table2[7, 7] == 0)
                                {
                                    RefrigtzDLL.ChessRules.SmallKingCastleBrown = true;
                                    FenCastling = 1;
                                }
                                if (Table1[5, 7] == -6 && Table1[0, 7] == -4 && Table2[5, 7] == 0 && Table2[0, 7] == 0)
                                {
                                    RefrigtzDLL.ChessRules.BigKingCastleBrown = true;
                                    FenCastling = 2;
                                }
                                else
                                    if (Table2[i, j] == 0 && Table1[i, j] != 0)
                                {
                                    RowClickP = i;
                                    ColumnClickP = j;

                                }
                                else if (Table2[i, j] != 0 && Table1[i, j] == 0)
                                {
                                    RowRealesed = i;
                                    ColumnRealeased = j;

                                }


                            }
                        }
                }
            }
            else
            {
                if (MovmentsNumber >= 1)
                {
                    int[,] Table1 = new int[8, 8];
                    int[,] Table2 = new int[8, 8];
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            Table1[i, j] = QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][i, j];
                        }
                    }
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            Table2[i, j] = QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][i, j];
                        }
                    }
                    for (int i = 0; i < 8; i++)
                        for (int j = 0; j < 8; j++)
                        {
                            if (Table1[i, j] != Table2[i, j])
                            {
                                if (Table1[5, 7] == -6 && Table1[7, 7] == -4 && Table2[5, 7] == 0 && Table2[7, 7] == 0)
                                {
                                    QuantumRefrigiz.ChessRules.SmallKingCastleBrown = true;
                                    FenCastling = 1;
                                }
                                if (Table1[5, 7] == -6 && Table1[0, 7] == -4 && Table2[5, 7] == 0 && Table2[0, 7] == 0)
                                {
                                    QuantumRefrigiz.ChessRules.BigKingCastleBrown = true;
                                    FenCastling = 2;
                                }
                                else
                                    if (Table2[i, j] == 0 && Table1[i, j] != 0)
                                {
                                    RowClickP = i;
                                    ColumnClickP = j;

                                }
                                else if (Table2[i, j] != 0 && Table1[i, j] == 0)
                                {
                                    RowRealesed = i;
                                    ColumnRealeased = j;

                                }


                            }
                        }
                }
            }
        }
        bool WaitOnMovmentOccured(String Preveios, ref String Next)
        {
            Next = "";
            try
            {

                if (File.Exists("output.txt"))
                    Next = File.ReadAllText("output.txt");
                if (Preveios == Next || Next.Length< 1)
                    return true;
            }
            catch (Exception t)
            {
                Log(t);
                Thread.Sleep(1000);
                //goto Again;
            }
            if (Preveios == Next || Next.Length < 1)
                return true;
            //WaitOn = false;
            return false;
        }
        bool SetDrawFoundingQuantum(bool ConvertQ,int i, int j, int ii, int jj, int[,] Table, int[,] Tab)
        { bool FOUND = false;
            QuantumRefrigiz.AllDraw THIS = null;
            DrawQ.FoundOfCurrentTableNode(Table, OrderPlate, ref THIS, ref FOUND);
            if (FOUND)
            {
                if (!ConvertQ)
                {
                    Table[ii, jj] = Table[i, j];
                    Table[i, j] = 0;
                }
                DrawQ = THIS;
                //OrderPlate = DrawQ.OrderP;
                QuantumRefrigiz.AllDraw.TableListAction.Add(Tab);
                Person = false;
                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                {
                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                }
                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(0,Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);
              // OrderPlate = DrawQ.OrderP;
                /*QuantumRefrigiz.AllDraw.TableListAction.Add(Tab);
                Person = false;
                if (QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch && QuantumRefrigiz.AllDraw.StoreADraw.Count > 0)
                {
                    QuantumRefrigiz.AllDraw.StoreADraw.RemoveAt(0);
                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Clear();
                    QuantumRefrigiz.AllDraw.StoreADraw[0].TableList.Add(Table);
                    QuantumRefrigiz.AllDraw.StoreADraw[0].SetRowColumn(0);
                }
                QuantumRefrigiz.AllDraw.Less += CalculateMoveMentHueuristicUser(Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);
                if (QuantumRefrigiz.AllDraw.TableListAction.Count > 1)
                {
                    QuantumRefrigiz.ChessGeneticAlgorithm R = new QuantumRefrigiz.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    if (R.FindGenToModified(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2], QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1], QuantumRefrigiz.AllDraw.TableListAction, 0, OrderPlate, true))
                    {
                        bool HitVal = false;
                        int Hit = QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                        if (Hit != 0)
                            HitVal = true;
                        bool Convert = false;
                        if (OrderPlate == 1)
                        {
                            if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                            {
                                if (R.CromosomColumn == 7)
                                    Convert = true;
                            }
                            if ((QuantumRefrigiz.ChessRules.SmallKingCastleGray || QuantumRefrigiz.ChessRules.BigKingCastleGray) && (!QuantumRefrigiz.ChessRules.CastleActGray))
                                QuantumRefrigiz.ChessRules.CastleActGray = true;
                            QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber, QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][i, j], ii, jj, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActGray, Convert);
                        }
                        else
                        {
                            if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                            {
                                if (R.CromosomColumn == 0)
                                    Convert = true;
                            }
                            if ((QuantumRefrigiz.ChessRules.SmallKingCastleBrown || QuantumRefrigiz.ChessRules.BigKingCastleBrown) && (!QuantumRefrigiz.ChessRules.CastleActBrown))
                                QuantumRefrigiz.ChessRules.CastleActBrown = true;

                            // QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber, QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActBrown, Convert);
                            QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber, QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][i, j], ii, jj, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActBrown, Convert);
                        }
                        SetBoxStatistic(QuantumRefrigiz.AllDraw.SyntaxToWrite);
                        RefreshBoxStatistic();
                    }
                }*/
                SetSyntax();
                //SetAndConfirmSyntax();

                OrderPlate = OrderPlate * -1;
                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;


                BrownTimer.StopTime();
                GrayTimer.StartTime("GrayTimer");
                InsertTableAtDataBase(Table);
                SetBoxText("\r\nWait...");
                RefreshBoxText();
                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) DrawQ.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, King, -6);
                Clicked = false;


                SetBoxText("\r\nDraw Found");
                RefreshBoxText();
                //   SetRefregitzBicture();
                return true;
            }
            return false;
        }
        bool SetDrawFoundingMovemnetDLL(bool ConvertD,int i, int j, int ii, int jj, int[,] Table, int[,] Tab)
        {
            bool FOUND = false;
            RefrigtzDLL.AllDraw THIS = null;
            Draw.FoundOfCurrentTableNode(Table, OrderPlate, ref THIS, ref FOUND);
            if (FOUND)
            {
                if (!ConvertD)
                {
                    Table[ii, jj] = Table[i, j];
                    Table[i, j] = 0;
                }
                Draw = THIS;
                ///OrderPlate = Draw.OrderP;
                RefrigtzDLL.AllDraw.TableListAction.Add(Tab);
                Person = false;
                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                {
                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                }
                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(0,Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);
                // OrderPlate = Draw.OrderP;
                /*RefrigtzDLL.AllDraw.TableListAction.Add(Tab);
                Person = false;
                if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch && RefrigtzDLL.AllDraw.StoreADraw.Count > 0)
                {
                    RefrigtzDLL.AllDraw.StoreADraw.RemoveAt(0);
                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Clear();
                    RefrigtzDLL.AllDraw.StoreADraw[0].TableList.Add(Table);
                    RefrigtzDLL.AllDraw.StoreADraw[0].SetRowColumn(0);
                }
                RefrigtzDLL.AllDraw.Less += CalculateMoveMentHueuristicUser(Table, -1, (int)RowRealesed, (int)ColumnRealeased, (int)RowRealesedP, (int)ColumnRealeasedP, Color.Brown);
                if (RefrigtzDLL.AllDraw.TableListAction.Count > 1)
                {
                    RefrigtzDLL.ChessGeneticAlgorithm R = new RefrigtzDLL.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    if (R.FindGenToModified(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], RefrigtzDLL.AllDraw.TableListAction, 0, OrderPlate, true))
                    {
                        bool HitVal = false;
                        int Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                        if (Hit != 0)
                            HitVal = true;
                        bool Convert = false;
                        if (OrderPlate == 1)
                        {
                            if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                            {
                                if (R.CromosomColumn == 7)
                                    Convert = true;
                            }
                            if ((RefrigtzDLL.ChessRules.SmallKingCastleGray || RefrigtzDLL.ChessRules.BigKingCastleGray) && (!RefrigtzDLL.ChessRules.CastleActGray))
                                RefrigtzDLL.ChessRules.CastleActGray = true;
                            // RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber, RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                            RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber, RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][i, j], ii, jj, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                        }
                        else
                        {
                            if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                            {
                                if (R.CromosomColumn == 0)
                                    Convert = true;
                            }
                            if ((RefrigtzDLL.ChessRules.SmallKingCastleBrown || RefrigtzDLL.ChessRules.BigKingCastleBrown) && (!RefrigtzDLL.ChessRules.CastleActBrown))
                                RefrigtzDLL.ChessRules.CastleActBrown = true;

                            RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber, RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][i, j], ii, jj, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActBrown, Convert);
                        }
                        SetBoxStatistic(RefrigtzDLL.AllDraw.SyntaxToWrite);
                        RefreshBoxStatistic();
                    }
                }*/

                SetSyntax();

                OrderPlate = OrderPlate * -1;
                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;


                BrownTimer.StopTime();
                GrayTimer.StartTime("GrayTimer");
                InsertTableAtDataBase(Table);
                SetBoxText("\r\nWait...");
                RefreshBoxText();
                //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, King, -6);
                Clicked = false;


                SetBoxText("\r\nDraw Found");
                RefreshBoxText();
                //   SetRefregitzBicture();
                return true;
            }


            return false;
        }
        void Statistic() { }
        bool SetMovement(int i, int j, int ii, int jj)
        {
            if (!Quantum)
            {
                if (RefrigtzDLL.AllDraw.MouseClick == 2)
                {
                    RefrigtzDLL.ChessRules A = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Table[i, j], Table, OrderPlate, i, j);
                    Color a = Color.Gray;
                    if (OrderPlate == -1)
                        a = Color.Brown;

                    int[,] Tab = new int[8, 8];
                    for (int ik = 0; ik < 8; ik++)
                    {
                        for (int jk = 0; jk < 8; jk++)
                        {
                            Tab[ik, jk] = Table[ik, jk];
                        }
                    }
                    if (A.Rules(i, j, ii, jj, a, Tab[i, j]))
                    {
                        if (System.Math.Abs(Tab[i, j]) == 1)
                        {
                            CurrentKind = 1;
                            ConvertWait = true;
                            RefrigtzDLL.ThingsConverter.ActOfClickEqualTow = true;
                            Draw.SolderesOnTable[Soldier].ConvertOperation((int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);
                            Thread.Sleep(100);
                            while (ConvertWait) ;
                            int[,] TableCon = new int[8, 8];

                            if (Draw.SolderesOnTable[Soldier].Convert)
                            {

                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                  if (Draw.SolderesOnTable[Soldier].ConvertedToMinister)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 5;
                                  else if (Draw.SolderesOnTable[Soldier].ConvertedToCastle)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 4;
                                  else if (Draw.SolderesOnTable[Soldier].ConvertedToHourse)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 3;
                                  else if (Draw.SolderesOnTable[Soldier].ConvertedToElefant)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 2;

                                if (OrderPlate == -1)
                                    Table[(int)RowRealesed, (int)ColumnRealeased] *= -1;
                                
                                RefrigtzDLL.ThingsConverter.ClickOcurred = false;
                                for (int ik = 0; ik < 8; ik++)
                                {
                                    for (int jk = 0; jk < 8; jk++)
                                    {
                                        TableCon[ik, jk] = Table[ik, jk];
                                    }
                                }
                            }
                        }
                        else
                        {
                            Tab[ii, jj] = Tab[i, j];
                            Tab[i, j] = 0;
                            for (int ik = 0; ik < 8; ik++)
                            {
                                for (int jk = 0; jk < 8; jk++)
                                {
                                    Table[ik, jk] = Tab[ik, jk];
                                }
                            }
                        }

                        bool FOUND = SetDrawFoundingMovemnetDLL(Draw.SolderesOnTable[Soldier].Convert,i, j, ii, jj, Table, Tab);
                        if (FOUND)
                        {
                            //Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            DrawImageOfMain();
                            return true;
                        }
                        //Draw.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                        DrawImageOfMain();
                        return false;

                        }
                    else
                    {
                        SetBoxText("\r\nWait...");
                        RefreshBoxText();
                        //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, King, -6);
                        Clicked = true;
                        // SetRefregitzBicture();

                        return true;
                    }
                }
            }            
            else
            {
                if (QuantumRefrigiz.AllDraw.MouseClick == 2)
                {
                    QuantumRefrigiz.ChessRules A = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, Table[i, j], Table, OrderPlate, i, j);
                    Color a = Color.Gray;
                    if (OrderPlate == -1)
                        a = Color.Brown;

                    int[,] Tab = new int[8, 8];
                    for (int ik = 0; ik < 8; ik++)
                    {
                        for (int jk = 0; jk < 8; jk++)
                        {
                            Tab[ik, jk] = Table[ik, jk];
                        }
                    }
                    if (A.Rules(i, j, ii, jj, a, Tab[i, j]))
                    {
                        if (System.Math.Abs(Tab[i, j]) == 1)
                        {
                            CurrentKind = 1;
                            ConvertWait = true;
                            RefrigtzDLL.ThingsConverter.ActOfClickEqualTow = true;
                            DrawQ.SolderesOnTable[Soldier].ConvertOperation((int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate, false, Soldier);
                            Thread.Sleep(100);
                            while (ConvertWait) ;
                            int[,] TableCon = new int[8, 8];

                            if (DrawQ.SolderesOnTable[Soldier].Convert)
                            {

                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                  if (Draw.SolderesOnTable[Soldier].ConvertedToMinister)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 5;
                                  else if (Draw.SolderesOnTable[Soldier].ConvertedToCastle)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 4;
                                  else if (Draw.SolderesOnTable[Soldier].ConvertedToHourse)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 3;
                                  else if (Draw.SolderesOnTable[Soldier].ConvertedToElefant)
                                      Table[(int)RowRealesed, (int)ColumnRealeased] = 2;
                                if (OrderPlate == -1)
                                    Table[(int)RowRealesed, (int)ColumnRealeased] *= -1;

                                DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                                RefrigtzDLL.ThingsConverter.ClickOcurred = false;
                                for (int ik = 0; ik < 8; ik++)
                                {
                                    for (int jk = 0; jk < 8; jk++)
                                    {
                                        TableCon[ik, jk] = Table[ik, jk];
                                    }
                                }
                            }
                        }
                        else
                        {
                            Table[ii, jj] = Table[i, j];
                            Table[i, j] = 0;
                        }
                        QuantumRefrigiz.ThingsConverter.ActOfClickEqualTow = false;
                        // bool FOUND = false;
                        // RefrigtzDLL.AllDraw THIS = null;

                        // SetDrawFounding(ref FOUND, ref THIS, false);
                        // Tab[ii, jj] = Tab[i, j];
                        // Tab[i, j] = 0;
                        QuantumRefrigiz.AllDraw.LastRowQ = i;
                        QuantumRefrigiz.AllDraw.LastColumnQ = j;

                        if (System.Math.Abs(Tab[ii, jj]) == 1)
                        {
                            DrawQ.SolderesOnTable[Soldier].IsQuntumMove = true;
                        }
                        else
                        if (System.Math.Abs(Tab[ii, jj]) == 2)
                        {
                            DrawQ.ElephantOnTable[Elefant].IsQuntumMove = true;
                        }
                        else
                            if (System.Math.Abs(Tab[ii, jj]) == 3)
                        {
                            DrawQ.HoursesOnTable[Hourse].IsQuntumMove = true;
                        }
                        else
                            if (System.Math.Abs(Tab[ii, jj]) == 4)
                        {
                            DrawQ.CastlesOnTable[Castle].IsQuntumMove = true;
                        }
                        else
                            if (System.Math.Abs(Tab[ii, jj]) == 5)
                        {
                            DrawQ.MinisterOnTable[Minister].IsQuntumMove = true;
                        }
                        else
                            if (System.Math.Abs(Tab[ii, jj]) == 6)
                        {
                            DrawQ.KingOnTable[King].IsQuntumMove = true;
                        }

                        bool FOUND = SetDrawFoundingQuantum(DrawQ.SolderesOnTable[Soldier].Convert,i, j, ii, jj, Table, Tab);
                        if (FOUND)
                        {
                            // DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                            DrawImageOfMain();
                            return true;
                        }
                        //DrawQ.SolderesOnTable[Soldier].DrawSoldierOnTable(ref g, pictureBoxRefrigtz.Image.Width / 8, pictureBoxRefrigtz.Image.Height / 8);
                        DrawImageOfMain();
                        return false;
                    }
                    else
                    {
                        SetBoxText("\r\nWait...");
                        RefreshBoxText();
                        //if (!FirstMovmentOnLoad && System.Convert.ToInt32(comboBoxMaxLevel.Text) > 2) Draw.InitiateAStarGreedytOneNode(0, (int)RowRealesed, (int)ColumnRealeased, Color.Gray, Table, OrderPlate * -1, King, -6);
                        Clicked = true;
                        // SetRefregitzBicture();

                        return true;
                    }
                }
            }
            return false;
        }
        void ComputerByComputerAliceAsStockFish(ref Process proc)
        {
            int[,] Tab = new int[8, 8];
            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 8; j++)
                {
                    Tab[i, j] = Table[i, j];
                }
            }
            RowClickP = -1;
            ColumnClickP = -1;
            RowRealesed = -1;
            ColumnRealeased = -1;
            if (tM != null)
            {
                try
                {
                    tM.Abort();
                    tM.Join();
                    tM = null;
                }
                catch (Exception t)
                {
                    Log(t);
                }
            }


            if (OrderPlate == 1)
            {
                SetBoxText("\r\nStockfish Number " + MovmentsNumber + " By Bob!");
                RefreshBoxText();
            }
            else
            {
                SetBoxText("\r\nStockfish Number " + MovmentsNumber + " By Alice!");
                RefreshBoxText();
            }

            // RefregitzisCurrent = false;

            String Pre = "";
            if (File.Exists("output.txt"))
                Pre = File.ReadAllText("output.txt");
            StreamWriter sw = proc.StandardInput;
            string input = "go depth " + comboBoxMaxLevelText + "\r\n";
            sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
            sw.Flush();
            String wr = "";
            WaitOn = true;

            do
            {
                try
                {
                    Thread.Sleep(100);
                    input = "wr" + "\r\n";
                    sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
                    sw.Flush();
                    Thread.Sleep(100);

                    WaitOn = WaitOnMovmentOccured(Pre, ref wr);
                }
                catch (Exception t)
                {
                    Log(t);
                }

            } while (WaitOn);

            if (wr == "e8c8")
            {
                FenCastling = 1;
                RefrigtzDLL.ChessRules.BigKingCastleBrown = true;
            }
            else
                if (wr == "e8g8")
            {
                RefrigtzDLL.ChessRules.SmallKingCastleBrown = true;
                FenCastling = 0;
            }
            else
                FenCastling = -1;
            int Pro = 0;
            if (FenCastling == -1)
            {
                do
                {
                    Pro = SetRowColumn(wr);
                } while (Pro == -1);
                File.AppendAllText("List.txt", wr + "-");
                if (Pro == 0)
                {
                    Tab[(int)RowRealesed, (int)ColumnRealeased] = Tab[(int)RowClickP, (int)ColumnClickP];
                    Tab[(int)RowClickP, (int)ColumnClickP] = 0;
                }
                else
                {
                    Tab[(int)RowRealesed, (int)ColumnRealeased] = Pro;
                    Tab[(int)RowClickP, (int)ColumnClickP] = 0;

                }
            }
            else
                if (FenCastling == 1)
            {
                Tab[0, 0] = 0;
                Tab[4, 0] = 0;
                Tab[3, 0] = -6;
                Tab[4, 0] = -4;
            }
            else
                    if (FenCastling == 0)
            {
                Tab[7, 0] = 0;
                Tab[4, 0] = 0;
                Tab[6, 0] = -6;
                Tab[5, 0] = -4;
            }
            String fens = Fen();
            if (RefrigtzDLL.ChessRules.BigKingCastleGray)
            {
                RefrigtzDLL.ChessRules.BigKingCastleGray = false;
            }
            else
                if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
            {
                RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
            }
            if (FenCastling != -1)
            {
                RefrigtzDLL.ChessRules.BigKingCastleBrown = false;
                RefrigtzDLL.ChessRules.SmallKingCastleBrown = false;

            }


            RowClickP = -1;
            ColumnClickP = -1;
            RowRealesed = -1;
            ColumnRealeased = -1;
            sw = proc.StandardInput;
            input = fens + "\r\n";
            sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
            sw.Flush();

            if (OrderPlate == 1)
                this.SetBoxText("\r\nThinking Finished by Bob!");
            else
                this.SetBoxText("\r\nThinking Finished by Alice!");
            RefreshBoxText();

            RefrigtzDLL.AllDraw.TableListAction.Add(Tab);

            if (RefrigtzDLL.AllDraw.TableListAction.Count >= 1)
            {
                RefrigtzDLL.ChessGeneticAlgorithm R = new RefrigtzDLL.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                if (R.FindGenToModified(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], RefrigtzDLL.AllDraw.TableListAction, 0, OrderPlate, true))
                {
                    bool HitVal = false;
                    int Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                    if (Hit != 0)
                        HitVal = true;
                    bool Convert = false;
                    if (OrderPlate == 1)
                    {
                        if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                        {
                            if (R.CromosomColumn == 7)
                                Convert = true;
                        }
                        if ((RefrigtzDLL.ChessRules.SmallKingCastleGray || RefrigtzDLL.ChessRules.BigKingCastleGray) && (!RefrigtzDLL.ChessRules.CastleActGray))
                            RefrigtzDLL.ChessRules.CastleActGray = true;
                        RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Tab, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                    }
                    else
                    {
                        if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                        {
                            if (R.CromosomColumn == 0)
                                Convert = true;
                        }
                        if ((RefrigtzDLL.ChessRules.SmallKingCastleBrown || RefrigtzDLL.ChessRules.BigKingCastleBrown) && (!RefrigtzDLL.ChessRules.CastleActBrown))
                            RefrigtzDLL.ChessRules.CastleActBrown = true;

                        RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Tab, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActBrown, Convert);
                    }
                    SetBoxStatistic(RefrigtzDLL.AllDraw.SyntaxToWrite);
                    RefreshBoxStatistic();
                }
            }


            using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
            {
                soundClick.Play();
                soundClick.Dispose();
            }

            bool FOUND = false;
            RefrigtzDLL.AllDraw THIS = null;

            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 8; j++)
                {
                    Table[i, j] = Tab[i, j];
                }
            }

            SetDrawFounding(ref FOUND, ref THIS, false);


            OrderPlate *= -1;
            BobSection = true;

            //Draw.TableList.Clear();
            //Draw.TableList.Add(Tab);
            //Draw.SetRowColumn(0);
            InsertTableAtDataBase(Tab);
            BrownTimer.StopTime();
            GrayTimer.StartTime("GrayTimer");

            SetBoxTextWrite(Out);


            DrawImageOfMain();
        }
        void ComputerByComputerBobAsRefregitz(ref Process proc)
        {
            if (t3.IsAlive) new Syncronization(t3, 1);

            BobAction();

            if (RefrigtzDLL.ChessRules.BigKingCastleGray)
            {
                FenCastling = 1;
            }
            else
                if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
            {
                FenCastling = 0;
            }
            else
                FenCastling = -1;

            RowClickP = RefrigtzDLL.AllDraw.LastRow;
            ColumnClickP = RefrigtzDLL.AllDraw.LastColumn;
            RowRealesed = RefrigtzDLL.AllDraw.NextRow;
            ColumnRealeased = RefrigtzDLL.AllDraw.NextColumn;
            String fens = Fen();
            if (RefrigtzDLL.ChessRules.BigKingCastleGray)
            {
                RefrigtzDLL.ChessRules.BigKingCastleGray = false;
            }
            else
                if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
            {
                RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
            }
            StreamWriter sw = proc.StandardInput;
            string input = fens + "\r\n";
            sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.Length);
            sw.Flush();
            RowClickP = -1;
            ColumnClickP = -1;
            RowRealesed = -1;
            ColumnRealeased = -1;
            //Thread.Sleep(1500);
            BobSection = false;
            
            GrayTimer.StopTime();
            BrownTimer.StartTime("BrownTimer");

            SetBoxTextWrite(Out);


            DrawImageOfMain();

        }
        public void SetDrawFounding(ref bool FOUND, ref RefrigtzDLL.AllDraw THIS, bool First)
        {
            RefrigtzDLL.AllDraw THISB = Draw.AStarGreedyString;
            while (Draw.AStarGreedyString != null)
                Draw = Draw.AStarGreedyString;
            Object O = new Object();
            lock (O)
            {
                FOUND = false;
                THIS = null;

                Color a = Color.Brown;
                //if (First)
                //Draw.FoundOfCurrentTableNode(Table, OrderPlate * -1, ref THIS, ref FOUND);
                //else
                int Ord = 1;
                if (MovmentsNumber == 1)
                {
                    if (Sec.radioButtonBrownOrder.Checked)
                        Ord = -1;
                }
                else
                    Ord = OrderPlate;
                Draw.FoundOfCurrentTableNode(Table, Ord, ref THIS, ref FOUND);
                if (FOUND)
                {
                    THISB = THIS.AStarGreedyString;
                    Draw = THIS;
                    /* Draw.TableList.Clear();
                     Draw.TableList.Add(Table);
                     Draw.SetRowColumn(0);
                     Draw.AStarGreedyString = THISB;
                    */ // 
                       //
                    SetBoxText("\r\nDraw Found");
                    RefreshBoxText();
                }
                else
                {
                    FOUND = false;
                    THIS = null;

                    a = Color.Brown;
                    //if (First)
                    //Draw.FoundOfCurrentTableNode(Table, OrderPlate * -1, ref THIS, ref FOUND);
                    //else
                    Ord = -1;
                    if (MovmentsNumber == 1)
                    {
                        if (Sec.radioButtonBrownOrder.Checked)
                            Ord = 1;
                    }
                    else
                        Ord = OrderPlate * -1;
                    while (Draw.AStarGreedyString != null)
                        Draw = Draw.AStarGreedyString;

                    if ((RefrigtzDLL.AllDraw.TableListAction.Count >= 2))
                        Draw.FoundOfCurrentTableNode(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], Ord, ref THIS, ref FOUND);
                    if (FOUND)
                    {
                        //THISB = THIS.AStarGreedyString;
                        Draw = THIS;
                      /*  Draw.TableList.Clear();
                        Draw.TableList.Add(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2]);
                        Draw.SetRowColumn(0);
                       *///Draw.AStarGreedyString = THISB;
                        // 
                        //
                        SetBoxText("\r\nDraw Found By Recurve");
                        RefreshBoxText();
                        FOUND = Draw.InitiateAStarGreedytCreationThinking(0, 0, 0, a, RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], Ord, false, false, 0);
                        if (FOUND)
                        {
                            Ord = OrderPlate * -1;

                            Draw.FoundOfCurrentTableNode(Table, Ord, ref THIS, ref FOUND);
                            if (FOUND)
                            {
                                //THISB = THIS.AStarGreedyString;
                                Draw = THIS;
                               /* Draw.TableList.Clear();
                                Draw.TableList.Add(Table);
                                Draw.SetRowColumn(0);
                               */ //Draw.AStarGreedyString = THISB;
                                // 
                                //
                                SetBoxText("\r\nDraw Found Target Of Tree Expansion!");
                                RefreshBoxText();
                            }
                            else
                            {
                                if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                    AllDrawKind = 4;
                                else
                                               if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                    AllDrawKind = 3;
                                if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                    AllDrawKind = 2;
                                if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                    AllDrawKind = 1;
                                //Set Configuration To True for some unknown reason!.
                                //UpdateConfigurationTableVal = true;                             
                                SetAllDrawKindString();

                                (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                DrawManagement();
                                //THISB = Draw.AStarGreedyString;
                                Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                Draw.TableList.Clear();
                                Draw.TableList.Add(Table);
                                Draw.SetRowColumn(0);
                                //Draw.AStarGreedyString = THISB;
                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                RefrigtzDLL.AllDraw.DepthIterative = 0;
                                SetBoxText("\r\nDraw Not Found by break");
                                RefreshBoxText();
                            }
                        }
                        else
                        {
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                AllDrawKind = 4;
                            else
                                               if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();

                            (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            DrawManagement();
                            Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            Draw.TableList.Clear();
                            Draw.TableList.Add(Table);
                            Draw.SetRowColumn(0);
                            //Draw.AStarGreedyString = THISB;
                            RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                            RefrigtzDLL.AllDraw.DepthIterative = 0;
                            SetBoxText("\r\nDraw Not Found");
                            RefreshBoxText();
                        }
                    }
                    else
                    {
                        if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                            AllDrawKind = 4;
                        else
                                               if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                            AllDrawKind = 3;
                        if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                            AllDrawKind = 2;
                        if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                            AllDrawKind = 1;
                        //Set Configuration To True for some unknown reason!.
                        //UpdateConfigurationTableVal = true;                             
                        SetAllDrawKindString();

                        (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        DrawManagement();

                        Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        Draw.TableList.Clear();
                        Draw.TableList.Add(Table);
                        Draw.SetRowColumn(0);
                        //Draw.AStarGreedyString = THISB;
                        RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                        RefrigtzDLL.AllDraw.DepthIterative = 0;
                        SetBoxText("\r\nDraw Not Found");
                        RefreshBoxText();
                    }
                }
            }
        }
        public void SetDrawFounding(ref bool FOUND, ref QuantumRefrigiz.AllDraw THIS, bool First)
        {
            QuantumRefrigiz.AllDraw THISB = DrawQ.AStarGreedyString;
            while (DrawQ.AStarGreedyString != null)
                DrawQ = DrawQ.AStarGreedyString;

            Object O = new Object();
            lock (O)
            {
                FOUND = false;
                THIS = null;

                Color a = Color.Brown;
                //if (First)
                //Draw.FoundOfCurrentTableNode(Table, OrderPlate * -1, ref THIS, ref FOUND);
                //else
                int Ord = 1;
                if (MovmentsNumber == 1)
                {
                    if (Sec.radioButtonBrownOrder.Checked)
                        Ord = -1;
                }
                else
                    Ord = OrderPlate;
                DrawQ.FoundOfCurrentTableNode(Table, Ord, ref THIS, ref FOUND);
                if (FOUND)
                {
                    THISB = THIS.AStarGreedyString;
                    DrawQ = THIS;
                    /*DrawQ.TableList.Clear();
                    DrawQ.TableList.Add(Table);
                    DrawQ.SetRowColumn(0);
                    DrawQ.AStarGreedyString = THISB;
                    */// 
                    //
                    SetBoxText("\r\nDraw Found");
                    RefreshBoxText();
                }
                else
                {
                    FOUND = false;
                    THIS = null;

                    a = Color.Brown;
                    //if (First)
                    //Draw.FoundOfCurrentTableNode(Table, OrderPlate * -1, ref THIS, ref FOUND);
                    //else
                    Ord = -1;
                    if (MovmentsNumber == 1)
                    {
                        if (Sec.radioButtonBrownOrder.Checked)
                            Ord = 1;
                    }
                    else
                        Ord = OrderPlate * -1;
                    while (DrawQ.AStarGreedyString != null)
                        DrawQ = DrawQ.AStarGreedyString;

                    if ((QuantumRefrigiz.AllDraw.TableListAction.Count >= 2))
                        DrawQ.FoundOfCurrentTableNode(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2], Ord, ref THIS, ref FOUND);
                    if (FOUND)
                    {
                        //THISB = THIS.AStarGreedyString;
                        DrawQ = THIS;
                        /*DrawQ.TableList.Clear();
                        DrawQ.TableList.Add(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2]);
                        DrawQ.SetRowColumn(0);*/
                        //DrawQ.AStarGreedyString = THISB;
                        // 
                        //
                        SetBoxText("\r\nDraw Found By Recurve");
                        RefreshBoxText();
                        FOUND = DrawQ.InitiateAStarGreedytCreationThinkingQuantum(0, 0, 0, a, RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], Ord, false, false, 0);
                        if (FOUND)
                        {
                            Ord = OrderPlate * -1;

                            DrawQ.FoundOfCurrentTableNode(Table, Ord, ref THIS, ref FOUND);
                            if (FOUND)
                            {
                                //THISB = THIS.AStarGreedyString;
                                DrawQ = THIS;
                              /*  DrawQ.TableList.Clear();
                                DrawQ.TableList.Add(Table);
                                DrawQ.SetRowColumn(0);
                             */   //DrawQ.AStarGreedyString = THISB;
                                // 
                                //
                                SetBoxText("\r\nDraw Found Target Of Tree Expansion!");
                                RefreshBoxText();
                            }
                            else
                            {
                                if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                    AllDrawKind = 4;
                                else
                                               if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                    AllDrawKind = 3;
                                if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                    AllDrawKind = 2;
                                if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                    AllDrawKind = 1;
                                //Set Configuration To True for some unknown reason!.
                                //UpdateConfigurationTableVal = true;                             
                                SetAllDrawKindString();

                                (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                DrawManagement();
                               //THISB = DrawQ.AStarGreedyString;
                                DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                                DrawQ.TableList.Clear();
                                DrawQ.TableList.Add(Table);
                                DrawQ.SetRowColumn(0);
                                //DrawQ.AStarGreedyString = THISB;
                                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                                RefrigtzDLL.AllDraw.DepthIterative = 0;
                                SetBoxText("\r\nDraw Not Found by break");
                                RefreshBoxText();

                            }
                        }
                        else
                        {
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                AllDrawKind = 4;
                            else
                                                 if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();

                            (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            DrawManagement();

                            DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            DrawQ.TableList.Clear();
                            DrawQ.TableList.Add(Table);
                            DrawQ.SetRowColumn(0);
                           // DrawQ.AStarGreedyString = THISB;
                            RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                            RefrigtzDLL.AllDraw.DepthIterative = 0;
                            SetBoxText("\r\nDraw Not Found");
                            RefreshBoxText();
                        }
                    }
                    else
                    {
                        if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                            AllDrawKind = 4;
                        else
                                                 if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                            AllDrawKind = 3;
                        if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                            AllDrawKind = 2;
                        if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                            AllDrawKind = 1;
                        //Set Configuration To True for some unknown reason!.
                        //UpdateConfigurationTableVal = true;                             
                        SetAllDrawKindString();

                        (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        DrawManagement();

                        DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        
                        DrawQ.TableList.Clear();
                        DrawQ.TableList.Add(Table);
                        DrawQ.SetRowColumn(0);
                        //DrawQ.AStarGreedyString = THISB;
                        RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
                        RefrigtzDLL.AllDraw.DepthIterative = 0;
                        SetBoxText("\r\nDraw Not Found");
                        RefreshBoxText();

                    }
                }
            }
        }
        //All Operation of Thinking Handling.
        void AllOperations()
        {
            if (!Quantum)
                while (!AllDrawLoad || RefrigtzDLL.AllDraw.TableListAction.Count == 0 || (!MenueSelecte)) { Thread.Sleep(100); }
            else
                while (!AllDrawLoad || QuantumRefrigiz.AllDraw.TableListAction.Count == 0 || (!MenueSelecte)) { Thread.Sleep(100); }

            //Fen();
            String FolderLocation = Root;
            sortOutPut = new StringBuilder("");

            ProcessStartInfo start = new ProcessStartInfo();
            if((!Sugar))
                start.FileName = FolderLocation + "\\" + "stockfish8.exe";
            else
                start.FileName = FolderLocation + "\\" + "Sugar.exe";
            start.UseShellExecute = false;
            start.RedirectStandardOutput = true;
            start.RedirectStandardInput = true;
            start.RedirectStandardError = true;
            start.CreateNoWindow = true;
            start.ErrorDialog = false;  // Run the external process & wait for it to finish
            //proc.StartInfo = start;
            //proc.StartInfo.RedirectStandardOutPut.ToString() += true;
            //proc.StartInfo.RedirectStandardInput = true;
            //proc.StartInfo.RedirectStandardError = true;
            proc.OutputDataReceived += new DataReceivedEventHandler(SortOutputHandler);
            proc.ErrorDataReceived += new DataReceivedEventHandler(SortOutputHandler);
            proc = Process.Start(start);
            proc.BeginOutputReadLine();
            proc.BeginErrorReadLine();
            if (File.Exists("output.txt"))
                File.Delete("output.txt");

            if ((MovmentsNumber > 0) && Stockfish)
            {
                /*
                 SetRowColumnReleasedAndClickP();
                 String fens = Fen();
                 if (RefrigtzDLL.ChessRules.BigKingCastleGray)
                 {
                     RefrigtzDLL.ChessRules.BigKingCastleGray = false;
                 }
                 else
                     if (RefrigtzDLL.ChessRules.SmallKingCastleGray)
                     {
                         RefrigtzDLL.ChessRules.SmallKingCastleGray = false;
                     }
                 StreamWriter sw = proc.StandardInput;
                 string input = fens + "\r\n";
                 sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                 sw.Flush();
                 RowClickP = -1;
                 ColumnClickP = -1;
                 RowRealesed = -1;
                 ColumnRealeased = -1;
                 Thread.Sleep(1500);
                 BobSection = false;
                 
                 
                 
                 
            
                 */
                if (OrderPlate == -1)
                {

                    /*RowClickP = -1;
                    ColumnClickP = -1;
                    RowRealesed = -1;
                    ColumnRealeased = -1;
                    String fens = Fen();
                    StreamWriter sw = proc.StandardInput;
                    sw = proc.StandardInput;
                    String input = fens + "\r\n";
                    sw.BaseStream.Write(Encoding.ASCII.GetBytes(input), 0, input.size());
                    sw.Flush();
                     */
                    if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                        AllDrawKind = 4;
                    else
                                             if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                        AllDrawKind = 3;
                    if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                        AllDrawKind = 2;
                    if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                        AllDrawKind = 1;
                    //Set Configuration To True for some unknown reason!.
                    //UpdateConfigurationTableVal = true;                             
                    SetAllDrawKindString();

                    (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    MessageBox.Show("No Konwledgs to begin with stockfish! Please delete one node of last table and continue");
                    Application.ExitThread();
                    Application.Exit();
                }

            }
            if (OrderPlate == 1)
                BobSection = true;
            else
                BobSection = false;
            //do { AllOp(); Thread.Sleep(1000); } while (true);

        }
        List<int[]> WhereNumbers(String Tag)
        {

            List<int[]> TagList = new List<int[]>();
            for (int i = 0; i < Tag.Length; i++)
            {
                if (i + 1 < Tag.Length)
                {
                    for (int j = i + 1; j < i + RefrigtzDLL.AllDraw.MaxAStarGreedy.ToString().Length + 1; j++)
                    {
                        try
                        {
                            int A = System.Convert.ToInt32(Tag.Substring(i, j - i));
                            if (A >= 0 && A <= RefrigtzDLL.AllDraw.MaxAStarGreedy)
                            {
                                int[] Loc = new int[2];
                                Loc[0] = i;
                                Loc[1] = j - i;
                                TagList.Add(Loc);
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);

                        }



                    }
                }
            }
            return TagList;
        }
        String CreateHtmlTag(String Tag)
        {
            Object O = new Object();
            lock (O)
            {
                //List<int[]> List = new List<int[]>();
                //List = WhereNumbers(Tag);
                //for (int i = 0; i < List.Count; i++)
                //Tag = Tag.Replace(Tag.Substring(List[i][0], List[i][1]), "<font Color=\"Gold\">" + Tag.Substring(List[i][0], List[i][1]) + "</font>");

                if (Tag.Contains("Thinking"))
                    Tag = Tag.Replace("Thinking", "<font Color=\"Green\">" + "Thinking" + "</font>");
                if (Tag.Contains("Perception"))
                    Tag = Tag.Replace("Perception", "<font Color=\"Green\">" + "Perception" + "</font>");
                if (Tag.Contains("Bob"))
                    Tag = Tag.Replace("Bob", "<font Color=\"Gray\">" + "Bob" + "</font>");
                if (Tag.Contains("Alice"))
                    Tag = Tag.Replace("Alice", "<font Color=\"Brown\">" + "Brown" + "</font>");
                if (Tag.Contains("AstarGreedy "))
                    Tag = Tag.Replace("AstarGreedy ", "<font Color=\"Yellow\">" + "AstarGreedy " + "</font>");
                if (Tag.Contains("Level"))
                    Tag = Tag.Replace("Level", "<font Color=\"Blue\">" + "Level" + "</Font>");
                /*if (Tag.Contains("Soldeir"))
                    Tag = Tag.Replace("Soldeir", "<font Color=\"Silver\">" + "Soldeir" + "</font>");
                else
                if (Tag.Contains("Elephant"))
                    Tag = Tag.Replace("Elephant", "<font Color=\"Silver\">" + "Elephant" + "</font>");
                else
                if (Tag.Contains("Hourse"))
                    Tag = Tag.Replace("Hourse", "<font Color=\"Silver\">" + "Hourse" + "</font>");
                else
                if (Tag.Contains("Castle"))
                    Tag = Tag.Replace("Castle", "<font Color=\"Silver\">" + "Castle" + "</font>");
                else
                if (Tag.Contains("Minister"))
                    Tag = Tag.Replace("Minister", "<font Color=\"Silver\">" + "Minister" + "</font>");
                else
                if (Tag.Contains("King"))
                    Tag = Tag.Replace("King", "<font Color=\"Silver\">" + "King" + "</font>");
                    */
                Tag = Tag.Replace("\r\n", "</br>");
                String R = "<p><font Color=\"Red\">" + Tag + "</font></p>";

                return R;
            }

        }
        //Deligation of Control Threading.
        delegate void SetTextBoxWriteTextCallback(String state);

        public void SetBoxTextWrite(String state)
        {
            Object O = new Object();
            lock (O)
            {

                // InvokeRequired required compares the thread ID of the
                // calling thread to the thread ID of the creating thread.
                // If these threads are different, it returns true.
                if (this.InvokeRequired)
                {
                    try
                    {
                        //SetTextBoxWriteTextCallback d = new SetTextBoxWriteTextCallback(SetBoxTextWrite);
                        String R = File.ReadAllText(Root + "\\Database\\Monitor.html");
                        R = R.Replace("</body>", "");
                        File.AppendAllText(Root + "\\Database\\Monitor.html", "\n\t" + state);
                        File.AppendAllText(Root + "\\Database\\Monitor.html", "\n\t" + "</body>");
                        Out = "";
                    }
                    catch (Exception t) { Log(t); }
                }
                else
                {
                    try
                    {
                        Out = "";
                    }
                    catch (Exception t) { Log(t); }
                }
                this.RefreshBoxText();
            }
        }
        delegate void SetTextBoxTextCallback(String state);
        public void SetBoxText(String state)
        {
            Object O = new Object();
            lock (O)
            {

                // InvokeRequired required compares the thread ID of the
                // calling thread to the thread ID of the creating thread.
                // If these threads are different, it returns true.
                if (this.InvokeRequired)
                {
                    try
                    {
                        String A = TimerText.ReturnTime();
                        if (OrderPlate == -1)
                            A = TimerText.ReturnTime();
                        SetTextBoxTextCallback d = new SetTextBoxTextCallback(SetBoxText);
                        this.Invoke(new Action(() => textBoxText.AppendText(state + " At Time " + A)));
                        state = CreateHtmlTag(state);
                        Out += state + " At Time " + A + "\n\t<br/>";
                    }
                    catch (Exception t) { Log(t); }
                }
                else
                {
                    try
                    {
                        String A = GrayTimer.ReturnTime();
                        if (OrderPlate == -1)
                            A = BrownTimer.ReturnTime();
                        textBoxText.AppendText(state + " At Time " + A);
                        state = CreateHtmlTag(state);
                        Out += state + " At Time " + A + "\n\t";
                    }
                    catch (Exception t) { Log(t); }
                }
                this.RefreshBoxText();
            }
        }
        delegate void SetcomboBoxTextCallback();
        public void SetcomboBoxText()
        {
            Object O = new Object();
            lock (O)
            {
                // InvokeRequired required compares the thread ID of the
                // calling thread to the thread ID of the creating thread.
                // If these threads are different, it returns true.
                Invoke((MethodInvoker)delegate ()
                   {
                       if (!Quantum)
                           RefrigtzDLL.AllDraw.THIScomboBoxMaxLevelText = comboBoxMaxLevel.Text;
                       else
                           QuantumRefrigiz.AllDraw.THIScomboBoxMaxLevelText = comboBoxMaxLevel.Text;
                   });
            }

        }
        delegate void RefreshhTextBoxTextCallback();

        public void RefreshBoxText()
        {
            Object O = new Object();
            lock (O)
            {
                // InvokeRequired required compares the thread ID of the
                // calling thread to the thread ID of the creating thread.
                // If these threads are different, it returns true.
                if (this.InvokeRequired)
                {
                    try
                    {
                        //RefreshhTextBoxTextCallback d = new RefreshhTextBoxTextCallback(RefreshBoxText);
                        //this.Invoke(new Action(() => textBoxText.Refresh()));
                        //textBoxText.Refresh();
                    }
                    catch (Exception t) { Log(t); }
                }
                else
                {
                    try
                    {
                        //this.textBoxStatistic.Refresh();
                    }
                    catch (Exception t) { Log(t); }
                }
            }
        }
        delegate void SetTextBoxStatisticCallback(String state);

        public void SetBoxStatistic(String state)
        {
            Object O = new Object();
            lock (O)
            {
                if (state == null || state == "" || textBoxStatistic == null)
                    return;
                if (textBoxStatistic.Text == null)
                    return;
                // InvokeRequired required compares the thread ID of the
                // calling thread to the thread ID of the creating thread.
                // If these threads are different, it returns true.
                if (this.InvokeRequired)
                {
                    try
                    {
                        SetTextBoxStatisticCallback d = new SetTextBoxStatisticCallback(SetBoxStatistic);
                        this.Invoke(new Action(() => textBoxStatistic.AppendText(state)));
                    }
                    catch (Exception t) { Log(t); }
                }
                else
                {
                    try
                    {
                        textBoxStatistic.AppendText(state);
                    }
                    catch (Exception t) { Log(t); }
                }
                this.RefreshBoxStatistic();
            }
        }
        delegate void RefreshhTextBoxStatisticCallback();

        public void RefreshBoxStatistic()
        {
            Object O = new Object();
            lock (O)
            {

                // InvokeRequired required compares the thread ID of the
                // calling thread to the thread ID of the creating thread.
                // If these threads are different, it returns true.
                if (this.InvokeRequired)
                {
                    RefreshhTextBoxStatisticCallback d = new RefreshhTextBoxStatisticCallback(RefreshBoxStatistic);
                    this.Invoke(new Action(() => textBoxStatistic.Refresh()));

                }
                else
                {
                    textBoxStatistic.Refresh();
                }
            }
        }
        //The State of Alice with Person Thinking.
        void AliceWithPerson()
        {
            //backgroundWorkerAllOp.CancelAsync();
            //backgroundWorkerSetNode.CancelAsync();
            //backgroundWorkerSetRefD.CancelAsync();

            Object O = new Object();
            lock (O)
            {
                int[,] TableC = new int[8, 8];
                if (!Quantum)
                    RefrigtzDLL.ThinkingChess.ThinkingRun = true;
                else
                    QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = true;
                //PaintedPaused = true;
                try
                {
                    Begin1:
                    //LoadConvertedTable = false;

                    Color a = Color.Gray;
                    bool StoreStateCC = false, StoreStateCP = false, StoreStateGe = false;
                    OpBeforeThinking(ref a, ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);

                    bool FOUND = false;

                    //SetDrawFounding(ref FOUND, ref THIS, true);

                    // if (!FirstMovmentOnLoad)
                    //   FOUND = true;
                    int LeafAStarGrteedy = 0;
                    if (!Quantum)
                        Table = Draw.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);
                    else
                        Table = DrawQ.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);
                    //LoadConvertedTable = true;
                    //PaintedPaused = false;
                    this.SetBoxText("\r\nThinking Finished!");
                    try
                    {

                        if (TableZero(Table))
                            OpTableZero();

                    }
                    catch (Exception t)
                    {
                        Log(t);
                        goto Begin1;
                    }

                    FOUND = false;
                    RefrigtzDLL.AllDraw THIS = null;
                    QuantumRefrigiz.AllDraw THISQ = null;
                    if (!Quantum)
                        SetDrawFounding(ref FOUND, ref THIS, false);
                    else
                        SetDrawFounding(ref FOUND, ref THISQ, false);

                    SetAndConfirmSyntax();

                    OpAfterAllTinking(ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);

                    OrderPlate *= -1;

                    SetBoxTextWrite(Out);


                    DrawImageOfMain();

                
                }
                catch (Exception t)
                {
                    Log(t);
                }
            }
            //backgroundWorkerAllOp.RunWorkerAsync();
            //backgroundWorkerSetNode.RunWorkerAsync();
            //backgroundWorkerSetRefD.RunWorkerAsync();

        }
        //The State of Bob with Person Thinking.
        void BobWithPerson()
        {
            //backgroundWorkerAllOp.CancelAsync();
            //backgroundWorkerSetNode.CancelAsync();
            //backgroundWorkerSetRefD.CancelAsync();

            Object O = new Object();
            lock (O)
            {
                int[,] TableCon = new int[8, 8];
                int[,] TableC = new int[8, 8];
                //LoadConvertedTable = false;
                if (!Quantum)
                    RefrigtzDLL.ThinkingChess.ThinkingRun = true;
                else
                    QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = true;
                try
                {
                    Begin1:

                    Color a = Color.Gray;
                    bool StoreStateCC = false, StoreStateCP = false, StoreStateGe = false;
                    OpBeforeThinking(ref a, ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);
                    bool FOUND = false;

                    RefrigtzDLL.AllDraw THIS = null;
                    QuantumRefrigiz.AllDraw THISQ = null;

                    //SetDrawFounding(ref FOUND, ref THIS, true);

                    int LeafAStarGrteedy = 0;
                    if (!Quantum)
                        Table = Draw.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);
                    else
                        Table = DrawQ.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);


                    try
                    {
                        if (TableZero(Table))
                            OpTableZero();

                    }
                    catch (Exception t)
                    {
                        Log(t);
                        goto Begin1;
                    }

                    SetAndConfirmSyntax();

                    FOUND = false;
                    THIS = null;
                    THIS = null;
                    if (!Quantum)
                        SetDrawFounding(ref FOUND, ref THIS, false);
                    else
                        SetDrawFounding(ref FOUND, ref THISQ, false);

                    OpAfterAllTinking(ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);

                    OrderPlate *= -1;

                    SetBoxTextWrite(Out);


                    DrawImageOfMain();


                 }
                catch (Exception t)
                {
                    Log(t);
                    this.SetBoxText("\r\nError!");
                }
            }
            //backgroundWorkerAllOp.RunWorkerAsync();
            //backgroundWorkerSetNode.RunWorkerAsync();
            //backgroundWorkerSetRefD.RunWorkerAsync();

        }
        public bool TableZero(int[,] Ta)
        {
            bool Zerro = true;

            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 8; j++)
                {
                    if (Ta[i, j] != 0)
                        Zerro = false;
                }
            }

            return Zerro;
        }
        void OpBeforeThinking(ref Color a, ref bool StoreStateCC, ref bool StoreStateCP, ref bool StoreStateGe)
        {
            Object O = new Object();
            lock (O)
            {
                StoreStateCC = StateCC;
                StoreStateCP = StateCP;
                StoreStateGe = StateGe;

                //AliceSection = false;
                


                if (OrderPlate == 1)
                {
                    SetBoxText("\r\nMovments Number " + MovmentsNumber.ToString() + " is Gray OrderPlate!");
                    RefreshBoxText();
                }
                else
                {
                    SetBoxText("\r\nMovments Number " + MovmentsNumber.ToString() + " is Brown OrderPlate!");
                    RefreshBoxText();
                }

                if (OrderPlate == 1)
                {
                    this.SetBoxText("\r\nThinking Begin By Bob!");
                    RefreshBoxText();
                }
                else
                {
                    this.SetBoxText("\r\nThinking Begin By Alice!");
                    RefreshBoxText();
                }
                RefreshBoxText();
                a = Color.Gray;
                if (OrderPlate == -1)
                    a = Color.Brown;
            }
        }
        void OpTableZero()
        {
            Object O = new Object();
            lock (O)
            {
                if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                    AllDrawKind = 4;
                else
                                                 if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                    AllDrawKind = 3;
                if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                    AllDrawKind = 2;
                if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                    AllDrawKind = 1;
                //Set Configuration To True for some unknown reason!.
                //UpdateConfigurationTableVal = true;                             
                SetAllDrawKindString();

                //Saved Midle Target.
                (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);

                checkBoxUsePenaltyRegradMechnisam.Checked = false;
                SettingPRFALSE = true;
                UpdateConfigurationTable();
                System.IO.File.AppendAllText("CheckSum.btt", "\n\tInstallation Begine On " + DateTime.Now.ToString());
                String FolderLocation = Root;
                int exitCode = 0;

                // Prepare the process to run
                ProcessStartInfo start = new ProcessStartInfo();
                // Prepare the process to run
                // Enter in the command line arguments, everything you would enter after the executable name itself
                start.Arguments = "";
                // Enter the executable to run, including the complete path
                start.FileName = "\"" + FolderLocation + "\\" + "LoadRP.exe" + "\"";
                // Do you want to show a console window?
                start.WindowStyle = ProcessWindowStyle.Normal;
                start.CreateNoWindow = true;
                start.UseShellExecute = true;

                // Run the external process & wait for it to finish
                using (Process proc = Process.Start(start))
                {
                    proc.WaitForExit(20000);
                    // Retrieve the app's exit code
                    exitCode = proc.ExitCode;
                }

                Application.Exit();
            }

        }
        void SetAndConfirmSyntax()
        {
            Object O = new Object();
            lock (O)
            {
                if (!Quantum)
                {

                    RefrigtzDLL.AllDraw.TableListAction.Add(Table);

                    if (RefrigtzDLL.AllDraw.TableListAction.Count >=1)
                    {
                        RefrigtzDLL.ChessGeneticAlgorithm R = new RefrigtzDLL.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        if (R.FindGenToModified(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], RefrigtzDLL.AllDraw.TableListAction, 0, OrderPlate, true))
                        {
                            bool HitVal = false;
                            int Hit = 0;
                            if (R.Hit)
                                Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                            if (Hit != 0)
                                HitVal = true;
                            bool Convert = false;
                            if (OrderPlate == 1)
                            {
                                if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1 && (R.CromosomRow != -1 && R.CromosomColumn != -1))
                                {
                                    if (R.CromosomColumn == 7)
                                        Convert = true;
                                }
                                if ((RefrigtzDLL.ChessRules.SmallKingCastleGray || RefrigtzDLL.ChessRules.BigKingCastleGray) && (!RefrigtzDLL.ChessRules.CastleActGray))
                                    RefrigtzDLL.ChessRules.CastleActGray = true;
                                RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                            }
                            else
                            {
                                if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1 && (R.CromosomRow != -1 && R.CromosomColumn != -1))
                                {
                                    if (R.CromosomColumn == 0)
                                        Convert = true;
                                }
                                if ((RefrigtzDLL.ChessRules.SmallKingCastleBrown || RefrigtzDLL.ChessRules.BigKingCastleBrown) && (!RefrigtzDLL.ChessRules.CastleActBrown))
                                    RefrigtzDLL.ChessRules.CastleActBrown = true;

                                RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActBrown, Convert);
                            }
                            SetBoxStatistic(RefrigtzDLL.AllDraw.SyntaxToWrite);
                            RefreshBoxStatistic();
                        }
                    }
                }
                else
                {
                    QuantumRefrigiz.AllDraw.TableListAction.Add(Table);

                    if (QuantumRefrigiz.AllDraw.TableListAction.Count >= 1)
                    {
                        QuantumRefrigiz.ChessGeneticAlgorithm R = new QuantumRefrigiz.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        if (R.FindGenToModified(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2], QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1], QuantumRefrigiz.AllDraw.TableListAction, 0, OrderPlate, true))
                        {
                            bool HitVal = false;
                            int Hit = 0;
                            if (R.Hit)
                                Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                            if (Hit != 0)
                                HitVal = true;
                            bool Convert = false;
                            if (OrderPlate == 1)
                            {
                                if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1 && (R.CromosomRow != -1 && R.CromosomColumn != -1))
                                {
                                    if (R.CromosomColumn == 7)
                                        Convert = true;
                                }
                                if ((QuantumRefrigiz.ChessRules.SmallKingCastleGray || QuantumRefrigiz.ChessRules.BigKingCastleGray) && (!QuantumRefrigiz.ChessRules.CastleActGray))
                                    QuantumRefrigiz.ChessRules.CastleActGray = true;
                                QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActGray, Convert);
                            }
                            else
                            {
                                if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1 && (R.CromosomRow != -1 && R.CromosomColumn != -1))
                                {
                                    if (R.CromosomColumn == 0)
                                        Convert = true;
                                }
                                if ((QuantumRefrigiz.ChessRules.SmallKingCastleBrown || QuantumRefrigiz.ChessRules.BigKingCastleBrown) && (!QuantumRefrigiz.ChessRules.CastleActBrown))
                                    QuantumRefrigiz.ChessRules.CastleActBrown = true;

                                QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActBrown, Convert);
                            }
                            SetBoxStatistic(QuantumRefrigiz.AllDraw.SyntaxToWrite);
                            RefreshBoxStatistic();
                        }
                    }
                }
            }
        }
        void OpAfterAllTinking(ref bool StoreStateCC, ref bool StoreStateCP, ref bool StoreStateGe)
        {
            Object O = new Object();
            lock (O)
            {
                InsertTableAtDataBase(Table);

                StateCC = StoreStateCC;
                StateCP = StoreStateCP;
                StateGe = StoreStateGe;


                if (!Quantum)
                    RefrigtzDLL.ThinkingChess.ThinkingRun = false;
                else
                    QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = false;

                UpdateConfigurationTable();
                if (OrderPlate == 1)
                {
                    this.SetBoxText("\r\nThinking Finished By Bob!");
                    RefreshBoxText();
                }
                else
                {
                    this.SetBoxText("\r\nThinking Finished By Alice!");
                    RefreshBoxText();
                }
                using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                {
                    soundClick.Play();
                    soundClick.Dispose();
                }
                Clicked = false;
            }
        }
        //Alice Section of Computer by Computer Thinking.
        void AliceAction()
        {
            //backgroundWorkerAllOp.CancelAsync();
            //backgroundWorkerSetNode.CancelAsync();
            //backgroundWorkerSetRefD.CancelAsync();

            Object O = new Object();
            lock (O)
            {

                if (!Quantum)
                    RefrigtzDLL.ThinkingChess.ThinkingRun = false;
                else
                    QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = false;
                Begin4:

                Color a = Color.Gray;
                bool StoreStateCC = false, StoreStateCP = false, StoreStateGe = false;
                OpBeforeThinking(ref a, ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);

                RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                bool FOUND = false;

                //SetDrawFounding(ref FOUND, ref THIS, true);

                int LeafAStarGrteedy = 0;
                if (!Quantum)
                    Table = Draw.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);
                else
                    Table = DrawQ.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);

                //LoadConvertedTable = true;
                //StateCP = false;
                try
                {
                    if (TableZero(Table))
                        OpTableZero();


                }
                catch (Exception t)
                {
                    Log(t);
                    goto Begin4;
                }



                SetAndConfirmSyntax();

                FOUND = false;
                THIS = null;
                THISQ = null;
                if (!Quantum)
                    SetDrawFounding(ref FOUND, ref THIS, false);
                else
                    SetDrawFounding(ref FOUND, ref THISQ, false);

                OpAfterAllTinking(ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);

                OrderPlate *= -1;

                BobSection = true;

                SetBoxTextWrite(Out);

                DrawImageOfMain();

          
            }
            //backgroundWorkerAllOp.RunWorkerAsync();
            //backgroundWorkerSetNode.RunWorkerAsync();
            //backgroundWorkerSetRefD.RunWorkerAsync();

        }
        void DrawImageOfMain()
        {
            Object O = new Object();
            lock (O)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.DrawTable = true;
                else
                    QuantumRefrigiz.AllDraw.DrawTable = true;
                SetPrictureBoxRefregitzInvalidate(pictureBoxRefrigtz);
                SetPrictureBoxRefregitzUpdate(pictureBoxRefrigtz);
            }
        }
        void GeneticAction()
        {
            if (!Quantum)
                RefrigtzDLL.ThinkingChess.ThinkingRun = true;
            else
                QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = true;
            StateGe = false;
            


            if (OrderPlate == 1)

                SetBoxText("\r\nMovments Number " + MovmentsNumber.ToString() + " is Gray OrderPlate!");
            else
                SetBoxText("\r\nMovments Number " + MovmentsNumber.ToString() + " is Brown OrderPlate!");
            RefreshBoxText();
            Begin4:
            if (OrderPlate == 1)
                SetBoxText("\r\nThinking Begin By Bob!");
            else
                SetBoxText("\r\nThinking Begin By Alice!");
            RefreshBoxText();
            Color a = Color.Gray;
            if (OrderPlate == -1)
                a = Color.Brown;
            Draw.InitiateGenetic(1, 4, a, Table, OrderPlate, false);

            try
            {
                //Table = Draw.TableList[0];
            }
            catch (Exception t)
            {
                Log(t);
                goto Begin4;
            }

            OrderPlate = OrderPlate * -1;
            Draw.SetRowColumn(0);
            if (!Quantum)
                RefrigtzDLL.ChessRules.CurrentOrder = OrderPlate;
            else
                QuantumRefrigiz.ChessRules.CurrentOrder = OrderPlate;

            this.SetBoxText("\r\nThinking Finished By Alice!");
            RefreshBoxText();
            if (!Quantum)
            {
                RefrigtzDLL.AllDraw.TableListAction.Add(Table);
                if (RefrigtzDLL.AllDraw.TableListAction.Count >= 1)
                {
                    RefrigtzDLL.ChessGeneticAlgorithm R = new RefrigtzDLL.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    if (R.FindGenToModified(RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2], RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1], RefrigtzDLL.AllDraw.TableListAction, 0, OrderPlate, true))
                    {
                        bool HitVal = false;
                        int Hit = RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                        if (Hit != 0)
                            HitVal = true;
                        bool Convert = false;
                        if (OrderPlate == 1)
                        {
                            if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                            {
                                if (R.CromosomColumn == 7)
                                    Convert = true;
                            }
                            if ((RefrigtzDLL.ChessRules.SmallKingCastleGray || RefrigtzDLL.ChessRules.BigKingCastleGray) && (!RefrigtzDLL.ChessRules.CastleActGray))
                                RefrigtzDLL.ChessRules.CastleActGray = true;
                            RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActGray, Convert);
                        }
                        else
                        {
                            if (RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                            {
                                if (R.CromosomColumn == 0)
                                    Convert = true;
                            }
                            if ((RefrigtzDLL.ChessRules.SmallKingCastleBrown || RefrigtzDLL.ChessRules.BigKingCastleBrown) && (!RefrigtzDLL.ChessRules.CastleActBrown))
                                RefrigtzDLL.ChessRules.CastleActBrown = true;

                            RefrigtzDLL.AllDraw.SyntaxToWrite = (new RefrigtzDLL.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , RefrigtzDLL.AllDraw.TableListAction[RefrigtzDLL.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, RefrigtzDLL.ChessRules.CastleActBrown, Convert);
                        }
                        SetBoxStatistic(RefrigtzDLL.AllDraw.SyntaxToWrite);
                        RefreshBoxStatistic();
                    }
                }
                if (OrderPlate == 1)
                {
                    BrownTimer.StopTime();
                    GrayTimer.StartTime("GrayTimer");
                }
                else
                {
                    GrayTimer.StopTime();
                    BrownTimer.StartTime("BrownTimer");

                }

                using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                {
                    soundClick.Play();
                    soundClick.Dispose();
                }

                StateGe = true;
                InsertTableAtDataBase(Table);
                RefrigtzDLL.ThinkingChess.ThinkingRun = false;
            }
            else
            {
                QuantumRefrigiz.AllDraw.TableListAction.Add(Table);
                if (QuantumRefrigiz.AllDraw.TableListAction.Count >= 1)
                {
                    QuantumRefrigiz.ChessGeneticAlgorithm R = new QuantumRefrigiz.ChessGeneticAlgorithm(MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    if (R.FindGenToModified(QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2], QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1], QuantumRefrigiz.AllDraw.TableListAction, 0, OrderPlate, true))
                    {
                        bool HitVal = false;
                        int Hit = QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRow, R.CromosomColumn];
                        if (Hit != 0)
                            HitVal = true;
                        bool Convert = false;
                        if (OrderPlate == 1)
                        {
                            if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == 1)
                            {
                                if (R.CromosomColumn == 7)
                                    Convert = true;
                            }
                            if ((QuantumRefrigiz.ChessRules.SmallKingCastleGray || QuantumRefrigiz.ChessRules.BigKingCastleGray) && (!QuantumRefrigiz.ChessRules.CastleActGray))
                                QuantumRefrigiz.ChessRules.CastleActGray = true;
                            QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActGray, Convert);
                        }
                        else
                        {
                            if (QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 1][R.CromosomRow, R.CromosomColumn] == -1)
                            {
                                if (R.CromosomColumn == 0)
                                    Convert = true;
                            }
                            if ((QuantumRefrigiz.ChessRules.SmallKingCastleBrown || QuantumRefrigiz.ChessRules.BigKingCastleBrown) && (!QuantumRefrigiz.ChessRules.CastleActBrown))
                                QuantumRefrigiz.ChessRules.CastleActBrown = true;

                            QuantumRefrigiz.AllDraw.SyntaxToWrite = (new QuantumRefrigiz.ChessRules(0, OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged)).CreateStatistic(ArrangmentsChanged, Table, MovmentsNumber  , QuantumRefrigiz.AllDraw.TableListAction[QuantumRefrigiz.AllDraw.TableListAction.Count - 2][R.CromosomRowFirst, R.CromosomColumnFirst], R.CromosomColumn, R.CromosomRow, HitVal, Hit, QuantumRefrigiz.ChessRules.CastleActBrown, Convert);
                        }
                        SetBoxStatistic(QuantumRefrigiz.AllDraw.SyntaxToWrite);
                        RefreshBoxStatistic();
                    }
                }
                if (OrderPlate == 1)
                {
                    BrownTimer.StopTime();
                    GrayTimer.StartTime("GrayTimer");
                }
                else
                {
                    GrayTimer.StopTime();
                    BrownTimer.StartTime("BrownTimer");

                }

                using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                {
                    soundClick.Play();
                    soundClick.Dispose();
                }

                StateGe = true;
                InsertTableAtDataBase(Table);
                QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = false;
            }
            if (t4.IsAlive)
                new Syncronization(t4, 1);
        }
        //Bob Section of Computer By Computer Thinking.
        void BobAction()
        {
            //backgroundWorkerAllOp.CancelAsync();
            //backgroundWorkerSetNode.CancelAsync();
            //backgroundWorkerSetRefD.CancelAsync();

            Object O = new Object();
            lock (O)
            {
                int[,] TableC = new int[8, 8];
                //LoadConvertedTable = false;
                if (!Quantum)
                    RefrigtzDLL.ThinkingChess.ThinkingRun = true;
                else
                    QuantumRefrigiz.ThinkingQuantumChess.ThinkingQuantumRun = true;
                Begin2:
                Color a = Color.Gray;
                bool StoreStateCC = false, StoreStateCP = false, StoreStateGe = false;
                OpBeforeThinking(ref a, ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);
                bool FOUND = false;

                RefrigtzDLL.AllDraw THIS = null;
                QuantumRefrigiz.AllDraw THISQ = null;

                //SetDrawFounding(ref FOUND, ref THIS, true);

                int LeafAStarGrteedy = 0;
                if (!Quantum)
                    Table = Draw.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);
                else
                    Table = DrawQ.Initiate(1, 4, a, Table, OrderPlate, false, FOUND, LeafAStarGrteedy);

                //LoadConvertedTable = true;
                StateCC = StoreStateCC;
                StateCP = StoreStateCP;
                StateGe = StoreStateGe;



                try
                {
                    ////Table = Draw.TableList[0];
                    for (int i = 0; i < 8; i++)
                    {
                        for (int j = 0; j < 8; j++)
                        {
                            TableC[i, j] = Table[i, j];
                        }
                    }
                    if (TableZero(Table))
                        OpTableZero();



                }
                catch (Exception t)
                {
                    Log(t);
                    goto Begin2;
                }

                SetAndConfirmSyntax();


                FOUND = false;
                THIS = null;
                THISQ = null;
                if (!Quantum)
                    SetDrawFounding(ref FOUND, ref THIS, false);
                else
                    SetDrawFounding(ref FOUND, ref THISQ, false);

                OpAfterAllTinking(ref StoreStateCC, ref StoreStateCP, ref StoreStateGe);

                //BobWithStockfishFinished = true;

                OrderPlate *= -1;

                SetBoxTextWrite(Out);


                DrawImageOfMain();

       
            }
            //backgroundWorkerAllOp.RunWorkerAsync();
            //backgroundWorkerSetNode.RunWorkerAsync();
            // backgroundWorkerSetRefD.RunWorkerAsync();

        }
        public void SetObjectNumbers(int[,] TabS)
        {
            if (!Quantum)
            {
                Draw.SodierMidle = 0;
                Draw.SodierHigh = 0;
                Draw.ElefantMidle = 0;
                Draw.ElefantHigh = 0;
                Draw.HourseMidle = 0;
                Draw.HourseHight = 0;
                Draw.CastleMidle = 0;
                Draw.CastleHigh = 0;
                Draw.MinisterMidle = 0;
                Draw.MinisterHigh = 0;
                Draw.KingMidle = 0;
                Draw.KingHigh = 0;
                for (int h = 0; h < 8; h++)
                {
                    for (int s = 0; s < 8; s++)
                    {
                        if (TabS[h, s] == 1)
                        {
                            Draw.SodierMidle++;
                            Draw.SodierHigh++;
                        }
                        else if (TabS[h, s] == 2)
                        {
                            Draw.ElefantMidle++;
                            Draw.ElefantHigh++;
                        }
                        else if (TabS[h, s] == 3)
                        {
                            Draw.HourseMidle++;
                            Draw.HourseHight++;
                        }
                        else if (TabS[h, s] == 4)
                        {
                            Draw.CastleMidle++;
                            Draw.CastleHigh++;
                        }
                        else if (TabS[h, s] == 5)
                        {
                            Draw.MinisterMidle++;
                            Draw.MinisterHigh++;
                        }
                        else if (TabS[h, s] == 6)
                        {
                            Draw.KingMidle++;
                            Draw.KingHigh++;
                        }
                        else
                            if (TabS[h, s] == -1)
                        {
                            Draw.SodierHigh++;
                        }
                        else if (TabS[h, s] == -2)
                        {
                            Draw.ElefantHigh++;
                        }
                        else if (TabS[h, s] == -3)
                        {
                            Draw.HourseHight++;
                        }
                        else if (TabS[h, s] == -4)
                        {
                            Draw.CastleHigh++;
                        }
                        else if (TabS[h, s] == -5)
                        {

                            Draw.MinisterHigh++;
                        }
                        else if (TabS[h, s] == -6)
                        {
                            Draw.KingHigh++;
                        }
                    }
                }
            }
            else
            {
                DrawQ.SodierMidle = 0;
                DrawQ.SodierHigh = 0;
                DrawQ.ElefantMidle = 0;
                DrawQ.ElefantHigh = 0;
                DrawQ.HourseMidle = 0;
                DrawQ.HourseHight = 0;
                DrawQ.CastleMidle = 0;
                DrawQ.CastleHigh = 0;
                DrawQ.MinisterMidle = 0;
                DrawQ.MinisterHigh = 0;
                DrawQ.KingMidle = 0;
                DrawQ.KingHigh = 0;
                for (int h = 0; h < 8; h++)
                {
                    for (int s = 0; s < 8; s++)
                    {
                        if (TabS[h, s] == 1)
                        {
                            DrawQ.SodierMidle++;
                            DrawQ.SodierHigh++;
                        }
                        else if (TabS[h, s] == 2)
                        {
                            DrawQ.ElefantMidle++;
                            DrawQ.ElefantHigh++;
                        }
                        else if (TabS[h, s] == 3)
                        {
                            DrawQ.HourseMidle++;
                            DrawQ.HourseHight++;
                        }
                        else if (TabS[h, s] == 4)
                        {
                            DrawQ.CastleMidle++;
                            DrawQ.CastleHigh++;
                        }
                        else if (TabS[h, s] == 5)
                        {
                            DrawQ.MinisterMidle++;
                            DrawQ.MinisterHigh++;
                        }
                        else if (TabS[h, s] == 6)
                        {
                            DrawQ.KingMidle++;
                            DrawQ.KingHigh++;
                        }
                        else
                            if (TabS[h, s] == -1)
                        {
                            DrawQ.SodierHigh++;
                        }
                        else if (TabS[h, s] == -2)
                        {
                            DrawQ.ElefantHigh++;
                        }
                        else if (TabS[h, s] == -3)
                        {
                            DrawQ.HourseHight++;
                        }
                        else if (TabS[h, s] == -4)
                        {
                            DrawQ.CastleHigh++;
                        }
                        else if (TabS[h, s] == -5)
                        {

                            DrawQ.MinisterHigh++;
                        }
                        else if (TabS[h, s] == -6)
                        {
                            DrawQ.KingHigh++;
                        }
                    }
                }
            }
        }
        //Hit Reconstruction of Table.
        /*void HitRecustruct()
        {
            if (RefrigtzDLL.ChessRules.ExistInDestinationEnemy)
            {
                if (System.Math.Abs(CurrentKind) == 1)
                {
                    for (int i = Draw.SodierMidle; i < Draw.SodierHigh; i++)
                    {
                        try
                        {
                            if (Draw.SolderesOnTable[Soldier].Row == Draw.SolderesOnTable[i].Row && Draw.SolderesOnTable[Soldier].Column == Draw.SolderesOnTable[i].Column)
                            {
                                Draw.SolderesOnTable[i] = null;
                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                return;
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                    for (int i = 0; i < Draw.ElefantHigh; i++)
                    {
                        try
                        {
                            if (Draw.SolderesOnTable[Soldier].Row == Draw.ElephantOnTable[i].Row && Draw.SolderesOnTable[Soldier].Column == Draw.ElephantOnTable[i].Column)
                            {
                                Draw.ElephantOnTable[i] = null;
                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                return;
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                    for (int i = 0; i < Draw.HourseHight; i++)
                    {
                        try
                        {
                            if (Draw.SolderesOnTable[Soldier].Row == Draw.HoursesOnTable[i].Row && Draw.SolderesOnTable[Soldier].Column == Draw.HoursesOnTable[i].Column)
                            {
                                Draw.HoursesOnTable[i] = null;
                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                return;
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                    for (int i = 0; i < Draw.CastleHigh; i++)
                    {
                        try
                        {
                            if (Draw.SolderesOnTable[Soldier].Row == Draw.CastlesOnTable[i].Row && Draw.SolderesOnTable[Soldier].Column == Draw.CastlesOnTable[i].Column)
                            {
                                Draw.CastlesOnTable[i] = null;
                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                return;
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                    for (int i = 0; i < Draw.MinisterHigh; i++)
                    {
                        try
                        {
                            if (Draw.SolderesOnTable[Soldier].Row == Draw.MinisterOnTable[i].Row && Draw.SolderesOnTable[Soldier].Column == Draw.MinisterOnTable[i].Column)
                            {
                                Draw.MinisterOnTable[i] = null;
                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                return;
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                    for (int i = 0; i < Draw.KingHigh; i++)
                    {
                        try
                        {
                            if (Draw.SolderesOnTable[Soldier].Row == Draw.KingOnTable[i].Row && Draw.SolderesOnTable[Soldier].Column == Draw.KingOnTable[i].Column)
                            {
                                Draw.KingOnTable[i] = null;
                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                return;
                            }
                        }
                        catch (Exception t)
                        {
                            Log(t);
                        }
                    }
                }
                else
                    if (System.Math.Abs(CurrentKind) == 2)
                    {

                        for (int i = 0; i < Draw.SodierHigh; i++)
                        {
                            try
                            {
                                if (Draw.ElephantOnTable[Elefant].Row == Draw.SolderesOnTable[i].Row && Draw.ElephantOnTable[Elefant].Column == Draw.SolderesOnTable[i].Column)
                                {
                                    Draw.SolderesOnTable[i] = null;
                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                    return;
                                }
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                        }
                        for (int i = Draw.ElefantMidle; i < Draw.ElefantHigh; i++)
                        {
                            try
                            {
                                if (Draw.ElephantOnTable[Elefant].Row == Draw.ElephantOnTable[i].Row && Draw.ElephantOnTable[Elefant].Column == Draw.ElephantOnTable[i].Column)
                                {
                                    Draw.ElephantOnTable[i] = null;
                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                    return;
                                }
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                        }
                        for (int i = 0; i < Draw.HourseHight; i++)
                        {
                            try
                            {
                                if (Draw.ElephantOnTable[Elefant].Row == Draw.HoursesOnTable[i].Row && Draw.ElephantOnTable[Elefant].Column == Draw.HoursesOnTable[i].Column)
                                {
                                    Draw.HoursesOnTable[i] = null;
                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                    return;
                                }
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                        }
                        for (int i = 0; i < Draw.CastleHigh; i++)
                        {
                            try
                            {

                                if (Draw.ElephantOnTable[Elefant].Row == Draw.CastlesOnTable[i].Row && Draw.ElephantOnTable[Elefant].Column == Draw.CastlesOnTable[i].Column)
                                {
                                    Draw.CastlesOnTable[i] = null;
                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                    return;
                                }
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                        }
                        for (int i = 0; i < Draw.MinisterHigh; i++)
                        {
                            try
                            {
                                if (Draw.ElephantOnTable[Elefant].Row == Draw.MinisterOnTable[i].Row && Draw.ElephantOnTable[Elefant].Column == Draw.MinisterOnTable[i].Column)
                                {
                                    Draw.MinisterOnTable[i] = null;
                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                    return;
                                }
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                        }
                        for (int i = 0; i < Draw.KingHigh; i++)
                        {
                            try
                            {
                                if (Draw.ElephantOnTable[Elefant].Row == Draw.KingOnTable[i].Row && Draw.ElephantOnTable[Elefant].Column == Draw.KingOnTable[i].Column)
                                {
                                    Draw.KingOnTable[i] = null;
                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                    return;
                                }
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                        }

                    }
                    else
                        if (System.Math.Abs(CurrentKind) == 3)
                        {

                            for (int i = 0; i < Draw.SodierHigh; i++)
                            {
                                try
                                {
                                    if (Draw.HoursesOnTable[Hourse].Row == Draw.SolderesOnTable[i].Row && Draw.HoursesOnTable[Hourse].Column == Draw.SolderesOnTable[i].Column)
                                    {
                                        Draw.SolderesOnTable[i] = null;
                                        Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                        return;
                                    }
                                }
                                catch (Exception t)
                                {
                                    Log(t);
                                }
                            }
                            for (int i = 0; i < Draw.ElefantHigh; i++)
                            {
                                try
                                {
                                    if (Draw.HoursesOnTable[Hourse].Row == Draw.ElephantOnTable[i].Row && Draw.HoursesOnTable[Hourse].Column == Draw.ElephantOnTable[i].Column)
                                    {
                                        Draw.ElephantOnTable[i] = null;
                                        Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                        return;
                                    }
                                }
                                catch (Exception t)
                                {
                                    Log(t);
                                }
                            }
                            for (int i = Draw.HourseMidle; i < Draw.HourseHight; i++)
                            {
                                try
                                {
                                    if (Draw.HoursesOnTable[Hourse].Row == Draw.HoursesOnTable[i].Row && Draw.HoursesOnTable[Hourse].Column == Draw.HoursesOnTable[i].Column)
                                    {
                                        Draw.HoursesOnTable[i] = null;
                                        Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                        return;
                                    }
                                }
                                catch (Exception t)
                                {
                                    Log(t);
                                }
                            }
                            for (int i = 0; i < Draw.CastleHigh; i++)
                            {
                                try
                                {
                                    if (Draw.HoursesOnTable[Hourse].Row == Draw.CastlesOnTable[i].Row && Draw.HoursesOnTable[Hourse].Column == Draw.CastlesOnTable[i].Column)
                                    {
                                        Draw.CastlesOnTable[i] = null;
                                        Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                        return;
                                    }
                                }
                                catch (Exception t)
                                {
                                    Log(t);
                                }
                            }

                            for (int i = 0; i < Draw.MinisterHigh; i++)
                            {
                                try
                                {
                                    if (Draw.HoursesOnTable[Hourse].Row == Draw.MinisterOnTable[i].Row && Draw.HoursesOnTable[Hourse].Column == Draw.MinisterOnTable[i].Column)
                                    {
                                        Draw.MinisterOnTable[i] = null;
                                        Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                        return;
                                    }
                                }
                                catch (Exception t)
                                {
                                    Log(t);
                                }
                            }
                            for (int i = 0; i < Draw.KingHigh; i++)
                            {
                                try
                                {
                                    if (Draw.HoursesOnTable[Hourse].Row == Draw.KingOnTable[i].Row && Draw.HoursesOnTable[Hourse].Column == Draw.KingOnTable[i].Column)
                                    {
                                        Draw.KingOnTable[i] = null;
                                        Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                        return;
                                    }
                                }
                                catch (Exception t)
                                {
                                    Log(t);
                                }
                            }

                        }
                        else
                            if (System.Math.Abs(CurrentKind) == 4)
                            {

                                for (int i = 0; i < Draw.SodierHigh; i++)
                                {
                                    try
                                    {
                                        if (Draw.CastlesOnTable[Castle].Row == Draw.SolderesOnTable[i].Row && Draw.CastlesOnTable[Castle].Column == Draw.SolderesOnTable[i].Column)
                                        {
                                            Draw.SolderesOnTable[i] = null;
                                            Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                            return;
                                        }
                                    }
                                    catch (Exception t)
                                    {
                                        Log(t);
                                    }
                                }
                                for (int i = 0; i < Draw.ElefantHigh; i++)
                                {
                                    try
                                    {
                                        if (Draw.CastlesOnTable[Castle].Row == Draw.ElephantOnTable[i].Row && Draw.CastlesOnTable[Castle].Column == Draw.ElephantOnTable[i].Column)
                                        {
                                            Draw.ElephantOnTable[i] = null;
                                            Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                            return;
                                        }
                                    }
                                    catch (Exception t)
                                    {
                                        Log(t);
                                    }
                                }

                                for (int i = 0; i < Draw.HourseHight; i++)
                                {
                                    try
                                    {
                                        if (Draw.CastlesOnTable[Castle].Row == Draw.HoursesOnTable[i].Row && Draw.CastlesOnTable[Castle].Column == Draw.HoursesOnTable[i].Column)
                                        {
                                            Draw.HoursesOnTable[i] = null;
                                            Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                            return;
                                        }
                                    }
                                    catch (Exception t)
                                    {
                                        Log(t);
                                    }
                                }
                                for (int i = Draw.CastleMidle; i < Draw.CastleHigh; i++)
                                {
                                    try
                                    {
                                        if (Draw.CastlesOnTable[Castle].Row == Draw.CastlesOnTable[i].Row && Draw.CastlesOnTable[Castle].Column == Draw.CastlesOnTable[i].Column)
                                        {
                                            Draw.CastlesOnTable[i] = null;
                                            Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                            return;
                                        }
                                    }
                                    catch (Exception t)
                                    {
                                        Log(t);
                                    }
                                }
                                for (int i = 0; i < Draw.MinisterHigh; i++)
                                {
                                    try
                                    {
                                        if (Draw.CastlesOnTable[Castle].Row == Draw.MinisterOnTable[i].Row && Draw.CastlesOnTable[Castle].Column == Draw.MinisterOnTable[i].Column)
                                        {
                                            Draw.MinisterOnTable[i] = null;
                                            Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                            return;
                                        }
                                    }
                                    catch (Exception t)
                                    {
                                        Log(t);
                                    }
                                }
                                for (int i = 0; i < Draw.KingHigh; i++)
                                {
                                    try
                                    {
                                        if (Draw.CastlesOnTable[Castle].Row == Draw.KingOnTable[i].Row && Draw.CastlesOnTable[Castle].Column == Draw.KingOnTable[i].Column)
                                        {
                                            Draw.KingOnTable[i] = null;
                                            Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                            return;
                                        }
                                    }
                                    catch (Exception t)
                                    {
                                        Log(t);
                                    }
                                }
                            }
                            else
                                if (System.Math.Abs(CurrentKind) == 5)
                                {

                                    for (int i = 0; i < Draw.SodierHigh; i++)
                                    {
                                        try
                                        {
                                            if (Draw.MinisterOnTable[Minister].Row == Draw.SolderesOnTable[i].Row && Draw.MinisterOnTable[Minister].Column == Draw.SolderesOnTable[i].Column)
                                            {
                                                Draw.SolderesOnTable[i] = null;
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                return;
                                            }
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    for (int i = 0; i < Draw.ElefantHigh; i++)
                                    {
                                        try
                                        {
                                            if (Draw.MinisterOnTable[Minister].Row == Draw.ElephantOnTable[i].Row && Draw.MinisterOnTable[Minister].Column == Draw.ElephantOnTable[i].Column)
                                            {
                                                Draw.ElephantOnTable[i] = null;
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                return;
                                            }
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }

                                    for (int i = 0; i < Draw.HourseHight; i++)
                                    {
                                        try
                                        {
                                            if (Draw.MinisterOnTable[Minister].Row == Draw.HoursesOnTable[i].Row && Draw.MinisterOnTable[Minister].Column == Draw.HoursesOnTable[i].Column)
                                            {
                                                Draw.HoursesOnTable[i] = null;
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                return;
                                            }
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }

                                    for (int i = 0; i < Draw.CastleHigh; i++)
                                    {
                                        try
                                        {
                                            if (Draw.MinisterOnTable[Minister].Row == Draw.CastlesOnTable[i].Row && Draw.MinisterOnTable[Minister].Column == Draw.CastlesOnTable[i].Column)
                                            {
                                                Draw.CastlesOnTable[i] = null;
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                return;
                                            }
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    for (int i = Draw.MinisterMidle; i < Draw.MinisterHigh; i++)
                                    {
                                        try
                                        {
                                            if (Draw.MinisterOnTable[Minister].Row == Draw.MinisterOnTable[i].Row && Draw.MinisterOnTable[Minister].Column == Draw.MinisterOnTable[i].Column)
                                            {
                                                Draw.MinisterOnTable[i] = null;
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                return;
                                            }
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                    for (int i = 0; i < Draw.KingHigh; i++)
                                    {
                                        try
                                        {
                                            if (Draw.MinisterOnTable[Minister].Row == Draw.KingOnTable[i].Row && Draw.MinisterOnTable[Minister].Column == Draw.KingOnTable[i].Column)
                                            {
                                                Draw.KingOnTable[i] = null;
                                                Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                return;
                                            }
                                        }
                                        catch (Exception t)
                                        {
                                            Log(t);
                                        }
                                    }
                                }
                                else
                                    if (System.Math.Abs(CurrentKind) == 6)
                                    {

                                        for (int i = 0; i < Draw.SodierHigh; i++)
                                        {
                                            try
                                            {
                                                if (Draw.KingOnTable[King].Row == Draw.SolderesOnTable[i].Row && Draw.KingOnTable[King].Column == Draw.SolderesOnTable[i].Column)
                                                {
                                                    Draw.SolderesOnTable[i] = null;
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int i = 0; i < Draw.ElefantHigh; i++)
                                        {
                                            try
                                            {
                                                if (Draw.KingOnTable[King].Row == Draw.ElephantOnTable[i].Row && Draw.KingOnTable[King].Column == Draw.ElephantOnTable[i].Column)
                                                {
                                                    Draw.ElephantOnTable[i] = null;
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int i = 0; i < Draw.HourseHight; i++)
                                        {
                                            try
                                            {
                                                if (Draw.KingOnTable[King].Row == Draw.HoursesOnTable[i].Row && Draw.KingOnTable[King].Column == Draw.HoursesOnTable[i].Column)
                                                {
                                                    Draw.HoursesOnTable[i] = null;
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int i = 0; i < Draw.CastleHigh; i++)
                                        {
                                            try
                                            {
                                                if (Draw.KingOnTable[King].Row == Draw.CastlesOnTable[i].Row && Draw.KingOnTable[King].Column == Draw.CastlesOnTable[i].Column)
                                                {
                                                    Draw.CastlesOnTable[i] = null;
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int i = 0; i < Draw.MinisterHigh; i++)
                                        {
                                            try
                                            {
                                                if (Draw.KingOnTable[King].Row == Draw.MinisterOnTable[i].Row && Draw.KingOnTable[King].Column == Draw.MinisterOnTable[i].Column)
                                                {
                                                    Draw.MinisterOnTable[i] = null;
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int i = Draw.KingMidle; i < Draw.KingHigh; i++)
                                        {
                                            try
                                            {
                                                if (Draw.KingOnTable[King].Row == Draw.KingOnTable[i].Row && Draw.KingOnTable[King].Column == Draw.KingOnTable[i].Column)
                                                {
                                                    Draw.KingOnTable[i] = null;
                                                    Table[(int)RowClickP, (int)ColumnClickP] = 0;
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                    }
            }
        }
         */
        //About Tool Strip Calling.
        private void aboutToolStripMenuItem1_Click(object sender, EventArgs e)
        {
            AboutBoxChessRefregitz ChessRefrigitz = new AboutBoxChessRefregitz();
            ChessRefrigitz.ShowDialog();
            ChessRefrigitz.Dispose();
        }
        //Mouse Click Form Refregitz pictureBox Event Handling.
        private void pictureBoxRefrigtz_MouseClick(object sender, MouseEventArgs e)
        {
            System.Threading.Thread.Sleep(10);
            MouseClicked = true;
            for (int i = 0; i < 8; i++)
            {
                for (int j = 0; j < 8; j++)
                {
                    try
                    {
                        if (!Quantum)
                        {
                            if (System.Math.Abs(e.X - i * (pictureBoxRefrigtz.Image.Width / 8)) < pictureBoxRefrigtz.Image.Width / 8 && System.Math.Abs(e.Y - j * (pictureBoxRefrigtz.Image.Height / 8)) < pictureBoxRefrigtz.Image.Height / 8)
                            {

                                //if (!RefrigtzDLL.ThingsConverter.ClickOcurred)
                                {

                                    if (RefrigtzDLL.AllDraw.MouseClick == 0)
                                    {
                                        RowClickP = i;
                                        ColumnClickP = j;
                                        for (int ii = 0; ii < Draw.SodierHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((Draw.SolderesOnTable[ii].Row == i & Draw.SolderesOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 1)
                                                {
                                                    Soldier = ii;
                                                    RefrigtzDLL.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }

                                        }
                                        for (int ii = 0; ii < Draw.ElefantHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((Draw.ElephantOnTable[ii].Row == i & Draw.ElephantOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 2)
                                                {
                                                    Elefant = ii;
                                                    RefrigtzDLL.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }

                                        }
                                        for (int ii = 0; ii < Draw.HourseHight; ii++)
                                        {
                                            try
                                            {
                                                if ((Draw.HoursesOnTable[ii].Row == i & Draw.HoursesOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 3)
                                                {
                                                    Hourse = ii;
                                                    RefrigtzDLL.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();

                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int ii = 0; ii < Draw.CastleHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((Draw.CastlesOnTable[ii].Row == i & Draw.CastlesOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 4)
                                                {
                                                    Castle = ii;
                                                    RefrigtzDLL.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }

                                        for (int ii = 0; ii < Draw.MinisterHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((Draw.MinisterOnTable[ii].Row == i & Draw.MinisterOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 5)
                                                {
                                                    Minister = ii;
                                                    RefrigtzDLL.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }

                                        for (int ii = 0; ii < Draw.KingHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((Draw.KingOnTable[ii].Row == i & Draw.KingOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 6)
                                                {
                                                    King = ii;
                                                    RefrigtzDLL.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }

                                        }


                                    }
                                    else
                                    {
                                        if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                        {

                                            RowRealesed = i;
                                            ColumnRealeased = j;

                                            RowClick = i;
                                            ColumnClick = j;
                                            RefrigtzDLL.AllDraw.MouseClick++;
                                            SetBoxText("\r\nObject Released.");
                                            RefreshBoxText();

                                        }
                                        else
                                        {

                                            //Needing for Objects for fen string of stockfish
                                            if (!Stockfish)
                                            {
                                                RowClick = -1;
                                                ColumnClick = -1;
                                                RowClickP = -1;
                                                ColumnClickP = -1;
                                                RowRealesed = -1;
                                                ColumnRealeased = -1;
                                            }
                                            RefrigtzDLL.AllDraw.MouseClick = 0;
                                            SetBoxText("\r\nObject Cleared.");
                                            RefreshBoxText();

                                        }
                                    }
                                }

                                return;
                            }
                        }
                        else
                        {
                            if (System.Math.Abs(e.X - i * (pictureBoxRefrigtz.Image.Width / 8)) < pictureBoxRefrigtz.Image.Width / 8 && System.Math.Abs(e.Y - j * (pictureBoxRefrigtz.Image.Height / 8)) < pictureBoxRefrigtz.Image.Height / 8)
                            {

                                //if (!QuantumRefrigiz.ThingsConverter.ClickOcurred)
                                {

                                    if (QuantumRefrigiz.AllDraw.MouseClick == 0)
                                    {
                                        RowClickP = i;
                                        ColumnClickP = j;
                                        for (int ii = 0; ii < DrawQ.SodierHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((DrawQ.SolderesOnTable[ii].Row == i & DrawQ.SolderesOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 1)
                                                {
                                                    Soldier = ii;
                                                    QuantumRefrigiz.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }

                                        }
                                        for (int ii = 0; ii < DrawQ.ElefantHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((DrawQ.ElephantOnTable[ii].Row == i & DrawQ.ElephantOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 2)
                                                {
                                                    Elefant = ii;
                                                    QuantumRefrigiz.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }

                                        }
                                        for (int ii = 0; ii < DrawQ.HourseHight; ii++)
                                        {
                                            try
                                            {
                                                if ((DrawQ.HoursesOnTable[ii].Row == i & DrawQ.HoursesOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 3)
                                                {
                                                    Hourse = ii;
                                                    QuantumRefrigiz.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();

                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }
                                        for (int ii = 0; ii < DrawQ.CastleHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((DrawQ.CastlesOnTable[ii].Row == i & DrawQ.CastlesOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 4)
                                                {
                                                    Castle = ii;
                                                    QuantumRefrigiz.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }

                                        for (int ii = 0; ii < DrawQ.MinisterHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((DrawQ.MinisterOnTable[ii].Row == i & DrawQ.MinisterOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 5)
                                                {
                                                    Minister = ii;
                                                    QuantumRefrigiz.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }
                                        }

                                        for (int ii = 0; ii < DrawQ.KingHigh; ii++)
                                        {
                                            try
                                            {
                                                if ((DrawQ.KingOnTable[ii].Row == i & DrawQ.KingOnTable[ii].Column == j) && System.Math.Abs(Table[i, j]) == 6)
                                                {
                                                    King = ii;
                                                    QuantumRefrigiz.AllDraw.MouseClick++;
                                                    SetBoxText("\r\nObject Selected.");
                                                    RefreshBoxText();
                                                    return;
                                                }
                                            }
                                            catch (Exception t)
                                            {
                                                Log(t);
                                            }

                                        }


                                    }
                                    else
                                    {
                                        if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                        {

                                            RowRealesed = i;
                                            ColumnRealeased = j;

                                            RowClick = i;
                                            ColumnClick = j;
                                            QuantumRefrigiz.AllDraw.MouseClick++;
                                            SetBoxText("\r\nObject Released.");
                                            RefreshBoxText();

                                        }
                                    }
                                }


                            }
                        }
                    }
                    catch (Exception t)
                    {
                        Log(t);
                    }
                }


            }
        }

        //Mouse Movments of FormRefregitz PictureBox Event Handling.
        private void pictureBoxRefrigtz_MouseMove(object sender, MouseEventArgs e)
        {
            DrawImageOfMain();

            try
            {

                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 8; j++)
                    {
                        if ((e != null) && (pictureBoxRefrigtz != null) && (pictureBoxRefrigtz.Image != null) && (System.Math.Abs(e.X - i * (pictureBoxRefrigtz.Image.Width / 8)) < pictureBoxRefrigtz.Image.Width / 8) && (System.Math.Abs(e.Y - j * (pictureBoxRefrigtz.Image.Height / 8)) < pictureBoxRefrigtz.Image.Height / 8))
                        {
                            if (!Quantum)
                            {
                                if (RefrigtzDLL.AllDraw.MouseClick == 1)
                                {

                                    ChessTable = pictureBoxRefrigtz.Image;
                                    g = Graphics.FromImage(ChessTable);

                                    for (int ii = 0; ii < pictureBoxRefrigtz.Image.Width; ii += pictureBoxRefrigtz.Image.Width / 8)
                                        for (int jj = 0; jj < pictureBoxRefrigtz.Image.Height; jj += pictureBoxRefrigtz.Image.Height / 8)
                                        {
                                            try
                                            {
                                                if ((i >= 0) && (i < 8) && (j >= 0) && (j < 8) && ((int)(this.pictureBoxRefrigtz.Width / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Width / 8) < 8) && ((int)(this.pictureBoxRefrigtz.Height / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Height / 8) < 8)
                                                    )
                                                {
                                                    if ((ii + jj) % 2 == 0)
                                                        g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle((int)ii, (int)jj, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                                                    else
                                                        g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle((int)ii, (int)jj, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                                                }

                                            }
                                            catch (Exception t) { Log(t); }




                                            Color a = Color.Gray;
                                            if (OrderPlate == -1)
                                                a = Color.Brown;
                                            bool[,] Tab = new bool[8, 8];
                                            if (RowClickP != -1 && ColumnClickP != -1)
                                                Tab = VeryFye(Table, OrderPlate, a);
                                            if (Tab != null)
                                            {
                                                if (Tab[ii / (int)(pictureBoxRefrigtz.Image.Width / 8), jj / (int)(pictureBoxRefrigtz.Image.Height / 8)])
                                                {
                                                    if (((int)(this.pictureBoxRefrigtz.Width / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Width / 8) < 8) && ((int)(this.pictureBoxRefrigtz.Height / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Height / 8) < 8 && ((int)(this.pictureBoxRefrigtz.Height) >= jj) && ((int)(this.pictureBoxRefrigtz.Width) >= ii)))
                                                    {
                                                        g.DrawString("*", new Font("Times New Roman", 50), new SolidBrush(Color.Red), new Rectangle(new Point(ii, jj), new Size((int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8))));
                                                    }
                                                }
                                            }
                                        }

                                    pictureBoxRefrigtz.Image = ChessTable;
                                    g.Dispose();

                                    if (RowRealesed == -1 && ColumnRealeased == -1 & RowRealesedP == -1 && ColumnRealeasedP == -1)
                                    {
                                        RowRealesed = i;
                                        ColumnRealeased = j;
                                        RowRealesedP = i;
                                        ColumnRealeasedP = j;

                                    }


                                }
                            }
                            else
                            {
                                if (QuantumRefrigiz.AllDraw.MouseClick == 1)
                                {

                                    ChessTable = pictureBoxRefrigtz.Image;
                                    g = Graphics.FromImage(ChessTable);

                                    for (int ii = 0; ii < pictureBoxRefrigtz.Image.Width; ii += pictureBoxRefrigtz.Image.Width / 8)
                                        for (int jj = 0; jj < pictureBoxRefrigtz.Image.Height; jj += pictureBoxRefrigtz.Image.Height / 8)
                                        {
                                            try
                                            {
                                                if ((i >= 0) && (i < 8) && (j >= 0) && (j < 8) && ((int)(this.pictureBoxRefrigtz.Width / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Width / 8) < 8) && ((int)(this.pictureBoxRefrigtz.Height / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Height / 8) < 8)
                                                    )
                                                {
                                                    if ((ii + jj) % 2 == 0)
                                                        g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\Black.jpg"), new Rectangle((int)ii, (int)jj, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                                                    else
                                                        g.DrawImage(Image.FromFile(Root + "\\Images\\Program\\White.jpg"), new Rectangle((int)ii, (int)jj, (int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8)));
                                                }

                                            }
                                            catch (Exception t) { Log(t); }




                                            Color a = Color.Gray;
                                            if (OrderPlate == -1)
                                                a = Color.Brown;
                                            bool[,] Tab = new bool[8, 8];
                                            if (RowClickP != -1 && ColumnClickP != -1)
                                                Tab = VeryFye(Table, OrderPlate, a);
                                            if (Tab != null)
                                            {
                                                if (Tab[ii / (int)(pictureBoxRefrigtz.Image.Width / 8), jj / (int)(pictureBoxRefrigtz.Image.Height / 8)])
                                                {
                                                    if (((int)(this.pictureBoxRefrigtz.Width / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Width / 8) < 8) && ((int)(this.pictureBoxRefrigtz.Height / 8) >= 0) && ((int)(this.pictureBoxRefrigtz.Height / 8) < 8 && ((int)(this.pictureBoxRefrigtz.Height) >= jj) && ((int)(this.pictureBoxRefrigtz.Width) >= ii)))
                                                    {
                                                        g.DrawString("*", new Font("Times New Roman", 50), new SolidBrush(Color.Red), new Rectangle(new Point(ii, jj), new Size((int)(this.pictureBoxRefrigtz.Width / 8), (int)(this.pictureBoxRefrigtz.Height / 8))));
                                                    }
                                                }
                                            }
                                        }

                                    pictureBoxRefrigtz.Image = ChessTable;
                                    g.Dispose();

                                    if (RowRealesed == -1 && ColumnRealeased == -1 & RowRealesedP == -1 && ColumnRealeasedP == -1)
                                    {
                                        RowRealesed = i;
                                        ColumnRealeased = j;
                                        RowRealesedP = i;
                                        ColumnRealeasedP = j;

                                    }


                                }
                            }

                            RowRealesedP = RowRealesed;
                            ColumnRealeasedP = ColumnRealeased;
                            RowRealesed = i;
                            ColumnRealeased = j;
                            return;
                        }
                    }
                }
            }
            catch (Exception t)
            {
                Log(t);
            }
        }
        //Computer By Computer tool Strip Menu Item Event Handlimng.
        private void computerWithComputerToolStripMenuItem_Click(object sender, EventArgs e)
        {
            StateCC = true;
            if (OrderPlate == 1)
            {
                BobSection = true;
                AliceSection = false;
                GrayTimer.StartTime("GrayTimer");
            }
            else
            {
                BobSection = false;
                AliceSection = true;
                BrownTimer.StartTime("BrownTimer");
            }
            //UpdateConfigurationTableVal = true;
            //UpdateConfigurationTable();
            AllDo = false;
        }
        //Computer by Person Illegal name tool Strip Evnt Handling.
        private void computerWithComputerToolStripMenuItem1_Click(object sender, EventArgs e)
        {
            BobSection = false;
            AliceSection = false;
            StateCC = false;
            StateGe = false;
            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount * 2 + 1).ToString();
            if (OrderPlate == 1 && Sec.radioButtonGrayOrder.Checked)
            {
                Person = true;
                StateCP = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (Sec.radioButtonBrownOrder.Checked && OrderPlate == -1)
            {
                Person = false;
                StateCP = true;
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                StateCP = true;
                Person = false;
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "You";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "You";
            }

            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;

            SetDrawFounding(ref FOUND, ref THIS, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;


        }
        //Button Next Game Analysis Click Event Handling.
        private void buttonNext_Click(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                try
                {
                    if (MovmentsNumber < MaxCurrentMovmentsNumber)
                    {
                        //Increased a movments.
                        
                        //Read Increased Movments.
                        Table = ReadTableMovmentNumber();
                        //Clear Table List of Draw.
                        Draw.TableList.Clear();
                        //Add Table to Table List.
                        Draw.TableList.Add(Table);
                        //Constructed a Draw All.
                        Draw.SetRowColumn(0);
                        //OutPut.ToString().
                        SetBoxText("\r\nMovments Number " + MovmentsNumber.ToString() + " Fronted.");
                        //Refresh TextBox.
                        RefreshBoxText();




                        //Sound a Music.
                        using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                        {
                            soundClick.Play();
                            soundClick.Dispose();
                        }
                    }

                }
                catch (Exception t) { Log(t); }
            }
        }
        //Previous Game Analysis Click Event Handling
        private void buttonPrevious_Click(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                try
                {
                    if (MovmentsNumber >= 0)
                    {
                        MovmentsNumber--;
                        //Read Current Table List
                        Table = ReadTableMovmentNumber();
                        //Clear Current TableList.
                        Draw.TableList.Clear();
                        //Add Table To Table List
                        Draw.TableList.Add(Table);
                        //Construction of All Things and Thinkings.
                        Draw.SetRowColumn(0);
                        //Out Put
                        SetBoxText("\r\nMovments Number " + MovmentsNumber.ToString() + " Backed.");
                        //Refresh TextBox.
                        RefreshBoxText();




                        //Sound a Music.
                        using (SoundPlayer soundClick = new SoundPlayer(Root + "\\Music\\Click6.wav"))
                        {
                            soundClick.Play();
                            soundClick.Dispose();
                        }
                        //Decreased a Movments.

                    }
                }
                catch (Exception t) { Log(t); }
            }
        }
        //Mouse Double Click pictureBoxRefregitz Click Event Handlimng.
        private void pictureBoxRefrigtz_MouseDoubleClick(object sender, MouseEventArgs e)
        {
            Thread.Sleep(10);
            if (!Maximize)
            {
                RowP = pictureBoxRefrigtz.Width;
                ColP = pictureBoxRefrigtz.Height;
                RowSource = this.Width;
                ColumnSource = this.Height;
                this.MaximumSize = new Size(1000, 700);
                pictureBoxRefrigtz.MaximumSize = new Size(900, 600);

                Maximize = true;
            }
            else
            {
                this.MaximumSize = new Size(RowSource, ColumnSource);
                pictureBoxRefrigtz.MaximumSize = new Size(RowP, ColP);

                RowP = pictureBoxRefrigtz.Width;
                ColP = pictureBoxRefrigtz.Height;
                RowSource = this.Width;
                ColumnSource = this.Height;

                Maximize = false;
            }
        }
        //New Game tool Strip Event Handling. 
        private void toolStripMenuItem2_Click(object sender, EventArgs e)
        {

            NewTable = true;
            this.Hide();
            StateCC = false;
            BobSection = false;
            AliceSection = false;
            StateCP = false;
            Person = false;
            FormRefrigtz New = new FormRefrigtz(false);
            New.ShowDialog();
            New.Dispose();
        }
        //Leave FormRefregitz Event Handling. 
        private void FormRefrigtz_Leave(object sender, EventArgs e)
        {
            try
            {
                //UpdateConfigurationTableVal = true;

                UpdateConfigurationTable();
                bookConn.Close();
                oleDbCmd.Dispose();
                bookConn.Dispose();
                if (!Quantum)
                {
                    RefrigtzDLL.ChessRules A = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    RefrigtzDLL.ChessRules AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    Color a = Color.Gray;
                    if (OrderPlate == -1)
                        a = Color.Brown;
                    if (OrderPlate == 1)
                        A.CheckMate(Table, OrderPlate);
                    else
                        A.CheckMate(Table, OrderPlate);
                    AA.Pat(Table, OrderPlate, a);
                    bool Exitting = false;
                    if (OrderPlate == 1 && (A.CheckMateGray || AA.PatBrown))
                        Exitting = true;
                    else
                        if (OrderPlate == -1 && (A.CheckMateBrown || AA.PatkGray))
                        Exitting = true;
                    if (Exitting || RemoveUncomStock)
                    {
                        try
                        {
                            File.Delete("Run.txt");
                        }
                        catch (Exception t) { Log(t); }
                        {
                            //UpdateConfigurationTableVal = true;
                            //UpdateConfigurationTable();
                            try
                            {
                                if (AllOperate != null)
                                    AllOperate.Abort();
                                if (t1 != null)
                                    t1.Abort();
                                if (t2 != null)
                                    t2.Abort();
                                if (t3 != null)
                                    t3.Abort();
                                if (t4 != null)
                                    t4.Abort();
                                //if (AllOperate != null)
                                //    AllOperate.Abort();
                                //if (tttt != null)
                                //   tttt.Abort();
                                //if (ttt != null)
                                //    ttt.Abort();
                                GrayTimer.StopTime();
                                BrownTimer.StopTime();
                                TimerText.StopTime();

                                StateCC = false;
                                StateCP = false;
                                StateGe = false;
                                Person = false;
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                            if (!Directory.Exists(Root + "\\DataBase\\Games"))
                                Directory.CreateDirectory(Root + "\\DataBase\\Games");
                            int i = 0;
                            do { i++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                AllDrawKind = 4;
                            else
                                               if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();
                            (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            Application.Exit();
                            return;
                        }
                    }
                }
                else
                {
                    QuantumRefrigiz.ChessRules A = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    QuantumRefrigiz.ChessRules AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    Color a = Color.Gray;
                    if (OrderPlate == -1)
                        a = Color.Brown;
                    if (OrderPlate == 1)
                        A.CheckMate(Table, OrderPlate);
                    else
                        A.CheckMate(Table, OrderPlate);
                    AA.Pat(Table, OrderPlate, a);
                    bool Exitting = false;
                    if (OrderPlate == 1 && (A.CheckMateGray || AA.PatBrown))
                        Exitting = true;
                    else
                        if (OrderPlate == -1 && (A.CheckMateBrown || AA.PatkGray))
                        Exitting = true;
                    if (Exitting || RemoveUncomStock)
                    {
                        try
                        {
                            File.Delete("Run.txt");
                        }
                        catch (Exception t) { Log(t); }
                        {
                            //UpdateConfigurationTableVal = true;
                            //UpdateConfigurationTable();
                            try
                            {
                                //if (AllOperate != null)
                                // AllOperate.Abort();
                                if (t1 != null)
                                    t1.Abort();
                                if (t2 != null)
                                    t2.Abort();
                                if (t3 != null)
                                    t3.Abort();
                                if (t4 != null)
                                    t4.Abort();
                                //if (AllOperate != null)
                                ///    AllOperate.Abort();
                                //if (tttt != null)
                                //    tttt.Abort();
                                //if (ttt != null)
                                //    ttt.Abort();
                                GrayTimer.StopTime();
                                BrownTimer.StopTime();
                                TimerText.StopTime();

                                StateCC = false;
                                StateCP = false;
                                StateGe = false;
                                Person = false;
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                            if (!Directory.Exists(Root + "\\DataBase\\Games"))
                                Directory.CreateDirectory(Root + "\\DataBase\\Games");
                            int i = 0;
                            do { i++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                AllDrawKind = 4;
                            else
                                                    if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();
                            (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            Application.Exit();
                            return;
                        }
                    }
                }
                if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                    AllDrawKind = 4;
                else
                                                              if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                    AllDrawKind = 3;
                if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                    AllDrawKind = 2;
                if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                    AllDrawKind = 1;
                //Set Configuration To True for some unknown reason!.
                //UpdateConfigurationTableVal = true;                             
                SetAllDrawKindString();

                (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);

                Application.Exit();
            }
            catch (Exception t) { Log(t); }

            Sec.Dispose();
            //Draw.THIS.Dispose();
            //THIs.Dispose();
            this.Dispose();
        }
        //Exit ToolStrip Event Handling.
        private void exitToolStripMenuItem_Click(object sender, EventArgs e)
        {


            try
            {
                ////UpdateConfigurationTableVal = true;

                UpdateConfigurationTable();
                bookConn.Close();
                oleDbCmd.Dispose();
                bookConn.Dispose();
                if (!Quantum)
                {
                    RefrigtzDLL.ChessRules A = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    RefrigtzDLL.ChessRules AA = new RefrigtzDLL.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    Color a = Color.Gray;
                    if (OrderPlate == -1)
                        a = Color.Brown;
                    if (OrderPlate == 1)
                        A.CheckMate(Table, OrderPlate);
                    else
                        A.CheckMate(Table, OrderPlate);
                    AA.Pat(Table, OrderPlate, a);
                    bool Exitting = false;
                    if (OrderPlate == 1 && (A.CheckMateGray || AA.PatBrown))
                        Exitting = true;
                    else
                        if (OrderPlate == -1 && (A.CheckMateBrown || AA.PatkGray))
                        Exitting = true;
                    if (Exitting || RemoveUncomStock)
                    {
                        try
                        {
                            File.Delete("Run.txt");
                        }
                        catch (Exception t) { Log(t); }
                        {
                            //UpdateConfigurationTableVal = true;
                            //UpdateConfigurationTable();
                            try
                            {
                                if (AllOperate != null)
                                    AllOperate.Abort();
                                if (t1 != null)
                                    t1.Abort();
                                if (t2 != null)
                                    t2.Abort();
                                if (t3 != null)
                                    t3.Abort();
                                if (t4 != null)
                                    t4.Abort();
                                //if (AllOperate != null)
                                //    AllOperate.Abort();
                                //if (tttt != null)
                                //    tttt.Abort();
                                // if (ttt != null)
                                //     ttt.Abort();
                                GrayTimer.StopTime();
                                BrownTimer.StopTime();
                                TimerText.StopTime();

                                StateCC = false;
                                StateCP = false;
                                StateGe = false;
                                Person = false;
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                            if (!Directory.Exists(Root + "\\DataBase\\Games"))
                                Directory.CreateDirectory(Root + "\\DataBase\\Games");
                            int i = 0;
                            do { i++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                AllDrawKind = 4;
                            else
                                                 if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();
                            (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            Application.Exit();
                            return;
                        }
                    }
                }
                else
                {
                    QuantumRefrigiz.ChessRules A = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    QuantumRefrigiz.ChessRules AA = new QuantumRefrigiz.ChessRules(0, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged, -1, Table, OrderPlate, -1, -1);
                    Color a = Color.Gray;
                    if (OrderPlate == -1)
                        a = Color.Brown;
                    if (OrderPlate == 1)
                        A.CheckMate(Table, OrderPlate);
                    else
                        A.CheckMate(Table, OrderPlate);
                    AA.Pat(Table, OrderPlate, a);
                    bool Exitting = false;
                    if (OrderPlate == 1 && (A.CheckMateGray || AA.PatBrown))
                        Exitting = true;
                    else
                        if (OrderPlate == -1 && (A.CheckMateBrown || AA.PatkGray))
                        Exitting = true;
                    if (Exitting || RemoveUncomStock)
                    {
                        try
                        {
                            File.Delete("Run.txt");
                        }
                        catch (Exception t) { Log(t); }
                        {
                            //UpdateConfigurationTableVal = true;
                            //UpdateConfigurationTable();
                            try
                            {
                                if (AllOperate != null)
                                    AllOperate.Abort();
                                if (t1 != null)
                                    t1.Abort();
                                if (t2 != null)
                                    t2.Abort();
                                if (t3 != null)
                                    t3.Abort();
                                if (t4 != null)
                                    t4.Abort();
                                //if (AllOperate != null)
                                //    AllOperate.Abort();
                                //if (tttt != null)
                                //    tttt.Abort();
                                //if (ttt != null)
                                //    ttt.Abort();
                                GrayTimer.StopTime();
                                BrownTimer.StopTime();
                                TimerText.StopTime();

                                StateCC = false;
                                StateCP = false;
                                StateGe = false;
                                Person = false;
                            }
                            catch (Exception t)
                            {
                                Log(t);
                            }
                            if (!Directory.Exists(Root + "\\DataBase\\Games"))
                                Directory.CreateDirectory(Root + "\\DataBase\\Games");
                            int i = 0;
                            do { i++; } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb"));
                            System.IO.File.Copy(Root + "\\Database\\CurrentBank.accdb", Root + "\\Database\\Games\\CurrentBank" + i.ToString() + ".accdb");
                            System.IO.File.Delete(Root + "\\Database\\CurrentBank.accdb");
                            if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                                AllDrawKind = 4;
                            else
                                                if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                                AllDrawKind = 3;
                            if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                                AllDrawKind = 2;
                            if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                                AllDrawKind = 1;
                            //Set Configuration To True for some unknown reason!.
                            //UpdateConfigurationTableVal = true;                             
                            SetAllDrawKindString();
                            (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            Application.Exit();
                            return;
                        }
                    }
                }
                if (Quantum)
                {
                    String SFile = "QBN.aqs";
                    if (File.Exists(SFile))
                        File.Delete(SFile);
                    for (int i = 0; i < 2; i++)
                        for (int jj = 0; jj < 8; jj++)
                            for (int kk = 0; kk < 8; kk++)
                            {
                                System.IO.File.AppendAllText(SFile, QuantumRefrigiz.AllDraw.QuntumTable[i, jj, kk].ToString() + ",");
                            }
                }
               if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                    AllDrawKind = 4;
                else
                                 if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                    AllDrawKind = 3;
                if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                    AllDrawKind = 2;
                if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                    AllDrawKind = 1;
                //Set Configuration To True for some unknown reason!.
                //UpdateConfigurationTableVal = true;                             
                SetAllDrawKindString();

                bool A1=(new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                while (!A1) { }
                ExitM = true;
               Application.Exit();
            }
            catch (Exception t) { Log(t); }
        }
        public RefrigtzDLL.AllDraw RootFound()
        {
            try
            {
                if (Draw != null)
                {
                    while (Draw.AStarGreedyString != null)
                    {
                        Draw = Draw.AStarGreedyString;
                    }
                }

            }
            catch (Exception t) { Log(t); }
            return Draw;
        }
        public QuantumRefrigiz.AllDraw RootFoundQ()
        {
            try
            {
                if (DrawQ != null)
                {
                    while (DrawQ.AStarGreedyString != null)
                    {
                        DrawQ = DrawQ.AStarGreedyString;
                    }
                }

            }
            catch (Exception t) { Log(t); }
            return DrawQ;
        }
        //AStarGreedy Huristic Checkbox Checked Event Handling.
        private void checkBoxAStarGreedyHuristic_CheckedChanged(object sender, EventArgs e)
        {
            if (!Quantum)
            {
                RefrigtzDLL.AllDraw.DrawTable = false;
                //if (!DisableTemporarlyTimerUpdate)
                {
                    //RunInBackGround();
                    if (checkBoxAStarGreedyHuristic.Checked)
                        AStarGreedyHuristic = true;
                    else
                        AStarGreedyHuristic = false;
                    if (MovmentsNumber == 1)
                    {
                        Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        Draw.TableList.Clear();
                        Draw.TableList.Add(Table);
                        Draw.SetRowColumn(0);
                    }
                    //UpdateConfigurationTable();
                    //RunInFront();
                }
            }
            else
            {
                QuantumRefrigiz.AllDraw.DrawTable = false;
                //if (!DisableTemporarlyTimerUpdate)
                {
                    //RunInBackGround();
                    if (checkBoxAStarGreedyHuristic.Checked)
                        AStarGreedyHuristic = true;
                    else
                        AStarGreedyHuristic = false;
                    if (MovmentsNumber == 1)
                    {
                        DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                        DrawQ.TableList.Clear();
                        DrawQ.TableList.Add(Table);
                        DrawQ.SetRowColumn(0);
                    }
                    //UpdateConfigurationTable();
                    //RunInFront();
                }
            }

        }
        //radio Button Checked Box Checked Event Handling.
        private void radioButton1_CheckedChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                try
                {
                    if (!Quantum)
                    {
                        //RunInBackGround();
                        if (radioButtonOriginalImages.Checked)
                            RefrigtzDLL.AllDraw.ImagesSubRoot = RefrigtzDLL.AllDraw.ImageRoot + "\\Original\\";
                    }
                    else
                    { //RunInBackGround();
                        if (radioButtonOriginalImages.Checked)
                            QuantumRefrigiz.AllDraw.ImagesSubRoot = QuantumRefrigiz.AllDraw.ImageRoot + "\\Original\\";
                    }
                    //UpdateConfigurationTable();
                    //RunInFront();
                }
                catch (Exception t) { Log(t); }
            }
        }
        //Big Fitting Checked Box Checked Event Handling.
        private void radioButtonBigFittingImages_CheckedChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                try
                {
                    if (!Quantum)
                    {
                        //RunInBackGround();
                        if (radioButtonBigFittingImages.Checked)
                            RefrigtzDLL.AllDraw.ImagesSubRoot = RefrigtzDLL.AllDraw.ImageRoot + "\\Fit\\Big\\";
                    }
                    else
                    {//RunInBackGround();
                        if (radioButtonBigFittingImages.Checked)
                            QuantumRefrigiz.AllDraw.ImagesSubRoot = QuantumRefrigiz.AllDraw.ImageRoot + "\\Fit\\Big\\";
                    }
                    //UpdateConfigurationTable();
                    //RunInFront();
                }
                catch (Exception t) { Log(t); }
            }
        }
        //Samll Fitting Radio Button Checked Event Handling.
        private void radioButtonSmallFittingImages_CheckedChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                try
                {
                    if (!Quantum)
                    {                     //RunInBackGround();
                        if (radioButtonSmallFittingImages.Checked)
                            RefrigtzDLL.AllDraw.ImagesSubRoot = RefrigtzDLL.AllDraw.ImageRoot + "\\Fit\\Small\\";
                    }
                    else
                    {
                        if (radioButtonSmallFittingImages.Checked)
                            QuantumRefrigiz.AllDraw.ImagesSubRoot = QuantumRefrigiz.AllDraw.ImageRoot + "\\Fit\\Small\\";
                    }
                    //UpdateConfigurationTable();
                    //RunInFront();
                }
                catch (Exception t) { Log(t); }
            }
        }
        //Genetic Algorithm Game tool Strip Event Handling. 
        private void toolStripMenuItem3_Click(object sender, EventArgs e)
        {
            AllDo = false;
            StateGe = true;
            //UpdateConfigurationTableVal = true;
            //UpdateConfigurationTable();

        }
        //Stop Button Click Event Handling.
        private void buttonStop_Click(object sender, EventArgs e)
        {
            //RunInBackGround();
            SetBoxText("\r\nAll Stop!.");

        }
        //AStarGreedy First Search Checked BOX Checked Event Handling.
        private void checkBoxAStarGreadyFirstSearch_CheckedChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                /*try
                {
                    RefrigtzDLL.AllDraw.AStarGreadyFirstSearch = true;
                    if (checkBoxAStarGreadyFirstSearch.Checked)
                        checkBoxUseDoubleTime.Visible = true;
                    else checkBoxUseDoubleTime.Visible = false;
                }
                catch (Exception t) { Log(t); }

                 */
            }

        }
        //Hardes Games tool Strip Event Handling.
        private void hardestToolStripMenuItem_Click(object sender, EventArgs e)
        {
            checkBoxAStarGreedyHuristic.Checked = true;
            checkBoxPredictHuristci.Checked = true;
            checkBoxAStarGreadyFirstSearch.Checked = true;
            checkBoxBestMovments.Checked = false;
            checkBoxOnlySelf.Checked = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = true;
            //RunInBackGround();
            //UpdateConfigurationTable();
            //RunInFront();
        }
        //Medum Game tool Strip Event Handling .
        private void medumToolStripMenuItem_Click(object sender, EventArgs e)
        {
            checkBoxAStarGreedyHuristic.Checked = true;
            checkBoxPredictHuristci.Checked = true;
            checkBoxAStarGreadyFirstSearch.Checked = false;
            checkBoxBestMovments.Checked = false;
            checkBoxOnlySelf.Checked = false;
            //RunInBackGround();
            //UpdateConfigurationTable();
            //RunInFront();

        }
        //Easest tool Strip Event Handling .
        private void easestToolStripMenuItem_Click(object sender, EventArgs e)
        {
            checkBoxAStarGreedyHuristic.Checked = false;

            checkBoxPredictHuristci.Checked = false;
            checkBoxAStarGreadyFirstSearch.Checked = false;
            if (!Quantum)
                RefrigtzDLL.AllDraw.AStarGreadyFirstSearch = false;
            else
                QuantumRefrigiz.AllDraw.AStarGreadyFirstSearch = false;
            checkBoxBestMovments.Checked = false;
            checkBoxOnlySelf.Checked = true;
            //RunInBackGround();
            //UpdateConfigurationTable();
            //RunInFront();

        }
        //Maximum Size Form Refregitz Evemnt Handling Operation.
        private void FormRefrigtz_MaximumSizeChanged(object sender, EventArgs e)
        {


            if (t1.IsAlive)
                new Syncronization(t1, 1);
            if (t2.IsAlive)
                new Syncronization(t2, 1);
            if (t3.IsAlive)
                new Syncronization(t3, 1);
            if (t4.IsAlive)
                new Syncronization(t4, 1);








            System.Threading.Thread.Sleep(10);

            if (t1.IsBackground)
                new Syncronization(t1, 3);
            if (t2.IsBackground)
                new Syncronization(t2, 3);
            if (t3.IsBackground)
                new Syncronization(t3, 3);
            if (t4.IsBackground)
                new Syncronization(t4, 3);
        }
        //Leave toll Strips Event Handling Operation.
        private void menuStripChessRefrigitz_Leave(object sender, EventArgs e)
        {
            if (t1 != null)
                t1.Abort();
            if (t2 != null)
                t2.Abort();
            if (t3 != null)
                t3.Abort();
            if (t4 != null)
                t4.Abort();


        }
        //Puased Click Event Handling
        private void buttonPause_Click(object sender, EventArgs e)
        {
            if (PaintingPaused)
            {
                try
                {
                    PaintingPaused = true;
                    //RunInBackGround();

                    buttonPauseStart.Text = "Start";
                }
                catch (Exception t) { Log(t); }
            }
            else
            {
                try
                {
                    //RunInFront();
                    PaintingPaused = false;
                    buttonPauseStart.Text = "Stop";
                }
                catch (Exception t) { Log(t); }
            }
        }
        //Run In Backgroud Thread Handling Method.
        void RunInBackGround()
        {

            if (t1.IsAlive)
                new Syncronization(t1, 1);
            if (t2.IsAlive)
                new Syncronization(t2, 1);
            if (t3.IsAlive)
                new Syncronization(t3, 1);
            if (t4.IsAlive)
                new Syncronization(t4, 1);

        }
        //Run In Front Thread Handling Method.
        void RunInFront()
        {
            if (StateCC && AliceSection && t3.IsBackground)
                new Syncronization(t3, 3);
            if (StateCC && BobSection && t2.IsBackground)
                new Syncronization(t2, 3);
            if (((StateCP && !Person) || Blitz) && t1.IsBackground)
                new Syncronization(t1, 3);
            if (t4.IsAlive && t4.IsBackground)
                new Syncronization(t4, 3);

        }

        private void continueAGameToolStripMenuItem_Click(object sender, EventArgs e)
        {
            try
            {
                try
                {
                    File.Delete(Root + "\\Run.txt");
                }
                catch (Exception t) { Log(t); }
                FormKindOfGameContinue R = new FormKindOfGameContinue();
                R.ShowDialog();
                try
                {
                    File.Delete(Root + "\\DataBase\\CurrentBank.accdb");
                }
                catch (Exception tt)
                {
                    Log(tt);
                }
                File.Copy(Root + "\\Database\\Games\\" + R.comboBoxDatabase.Text, Root + "\\Database\\CurrentBank.accdb");
                try
                {
                    File.Delete(Root + "\\DataBase\\Games\\" + R.comboBoxDatabase.Text);
                }
                catch (Exception ttt)
                {
                    Log(ttt);
                }
                _1 = R.radioButtonComputerByComputer.Checked;
                _2 = R.radioButtonComputerByPerson.Checked;
                _3 = R.radioButtonGeneticGame.Checked;
                _4 = R.radioButtonBlitz.Checked;
                String a = "";
                if (_1) a += 1; else a += 0;
                if (_2) a += 1; else a += 0;
                if (_3) a += 1; else a += 0;
                if (_4) a += 1; else a += 0;
                File.WriteAllText(Root + "\\Run.txt", a);
                String FolderLocation = Root;
                int exitCode = 0;

                // Prepare the process to run

                ProcessStartInfo start = new ProcessStartInfo();
                // Prepare the process to run
                // Enter in the command line arguments, everything you would enter after the executable name itself
                start.Arguments = "";
                // Enter the executable to run, including the complete path
                start.FileName = "\"" + FolderLocation + "\\" + "Run.exe" + "\"";
                // Do you want to show a console window?
                start.WindowStyle = ProcessWindowStyle.Hidden;
                start.CreateNoWindow = true;
                start.UseShellExecute = true;// Do not 'Run the external process & wait for it to finish'

                using (Process proc = Process.Start(start))
                {
                    proc.WaitForExit();
                    // Retrieve the app's exit code
                    exitCode = proc.ExitCode;
                }
                Application.Exit();


            }
            catch (Exception p)
            {
                Log(p);
            }
        }

        private void startGameToolStripMenuItem_Click(object sender, EventArgs e)
        {

        }

        private void progressBarVerify_CursorChanged(object sender, EventArgs e)
        {
            if (PreviousTime != null)
            {
                DateTime Remaining = (new RefregitzReader.RefregitzReader(null)).ConvertRefregitzStringToDateTime(((1 - ((float)progressBarVerify.Value / (float)progressBarVerify.Maximum)) * (DateTime.Now.Ticks / 1000 - PreviousTime.Ticks / 1000)).ToString());
                labelTimesRemaining.Text = (Remaining.Day.ToString() + ":" + Remaining.Minute.ToString() + ":" + Remaining.Second.ToString()) + " Remaining";
                labelTimesRemaining.Update();
                labelTimesRemaining.Invalidate();
            }
            else
                PreviousTime = DateTime.Now;
            Thread.Sleep(100);
        }



        private void progressBarVerify_Click(object sender, EventArgs e)
        {
            progressBarVerify_CursorChanged(sender, e);
        }

        private void progressBarVerify_Validated(object sender, EventArgs e)
        {
            progressBarVerify_Click(sender, e);
        }

        private void toolStripMenuItem6_Click(object sender, EventArgs e)
        {
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;

            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            //TimerIniataite = true;
            //BobSection = false;
            //AliceSection = false;
            StateCP = true;
            StateCC = false;
            StateGe = false;

            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount).ToString();
            if (OrderPlate == 1)
            {
                GrayTimer.StartTime("GrayTimer");

                Blitz = true;
            }
            else if (OrderPlate == -1)
            {
                BrownTimer.StartTime("BrownTimer");
                Blitz = true;
            }
            else
            {
                Blitz = false;
            }
            if (Sec.radioButtonGrayOrder.Checked && OrderPlate == 1)
                Person = true;
            else
                if (Sec.radioButtonBrownOrder.Checked && OrderPlate == -1)
                Person = true;
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "You";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "You";
            }
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
        }


        private void pictureBoxRefrigtz_MouseLeave(object sender, EventArgs e)
        {
            MouseClicked = false;
        }

        private void checkBoxIgnoreSelf_CheckedChanged(object sender, EventArgs e)
        {
            /*if (checkBoxIgnoreSelf.Checked)
                RefrigtzDLL.ThinkingChess.IInoreSelfObjects = true;
            else
                RefrigtzDLL.ThinkingChess.IInoreSelfObjects = false;
             */
        }

        //AStarGreedy Movments Event Handl;ing Operations Method.
        private void checkBoxAStarGreedyMovement_Enter(object sender, EventArgs e)
        {
            if (checkBoxAStarGreedyMovement.Checked)
            {
                if (!Quantum)
                {
                    RefrigtzDLL.AllDraw.SodierMovments = 4;
                    RefrigtzDLL.AllDraw.ElefantMovments = 16;
                    RefrigtzDLL.AllDraw.HourseMovments = 8;
                    RefrigtzDLL.AllDraw.CastleMovments = 16;
                    RefrigtzDLL.AllDraw.MinisterMovments = 32;
                    RefrigtzDLL.AllDraw.KingMovments = 8;
                }
                else
                {
                    QuantumRefrigiz.AllDraw.SodierMovments = 4;
                    QuantumRefrigiz.AllDraw.ElefantMovments = 16;
                    QuantumRefrigiz.AllDraw.HourseMovments = 8;
                    QuantumRefrigiz.AllDraw.CastleMovments = 16;
                    QuantumRefrigiz.AllDraw.MinisterMovments = 32;
                    QuantumRefrigiz.AllDraw.KingMovments = 8;
                }

            }
            else
            {
                if (!Quantum)
                {
                    RefrigtzDLL.AllDraw.SodierMovments = 1;
                    RefrigtzDLL.AllDraw.ElefantMovments = 1;
                    RefrigtzDLL.AllDraw.HourseMovments = 1;
                    RefrigtzDLL.AllDraw.CastleMovments = 1;
                    RefrigtzDLL.AllDraw.MinisterMovments = 1;
                    RefrigtzDLL.AllDraw.KingMovments = 1;
                }
                else
                {
                    QuantumRefrigiz.AllDraw.SodierMovments = 1;
                    QuantumRefrigiz.AllDraw.ElefantMovments = 1;
                    QuantumRefrigiz.AllDraw.HourseMovments = 1;
                    QuantumRefrigiz.AllDraw.CastleMovments = 1;
                    QuantumRefrigiz.AllDraw.MinisterMovments = 1;
                    QuantumRefrigiz.AllDraw.KingMovments = 1;
                }
            }

        }
        //Double Time Checked Box Checked Event Handling.
        private void checkBoxUseDoubleTime_CheckedChanged(object sender, EventArgs e)
        {
            try
            {
                //RunInBackGround();
                /*if (RefrigtzDLL.AllDraw.AStarGreadyFirstSearch)
                {
                    checkBoxUseDoubleTime.Visible = true;

                    if (checkBoxUseDoubleTime.Checked)
                    {
                        RefrigtzDLL.AllDraw.UseDoubleTime = true;
                    }
                }
                else
                {
                    checkBoxUseDoubleTime.Visible = false;
                    RefrigtzDLL.AllDraw.UseDoubleTime = false;
                }

                 */
                //UpdateConfigurationTable();
                //RunInFront();
            }
            catch (Exception t) { Log(t); }

        }
        //Penalty Regrad Mechansiam Checed Box Event Handling Operation Method.
        private void checkBoxUsePenaltyRegradMechnisam_CheckedChanged(object sender, EventArgs e)
        {
            if (!Quantum)
                RefrigtzDLL.AllDraw.DrawTable = false;
            else
                QuantumRefrigiz.AllDraw.DrawTable = false;

            {
                try
                {
                    //RunInBackGround();
                    if (checkBoxUsePenaltyRegradMechnisam.Checked)
                        UsePenaltyRegardMechnisam = true;
                    else
                        UsePenaltyRegardMechnisam = false;
                    if (MovmentsNumber == 1)
                    {
                        if (!Quantum)
                        {
                            Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            Draw.TableList.Clear();
                            Draw.TableList.Add(Table);
                            Draw.SetRowColumn(0);
                        }
                        else
                        {
                            DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                            DrawQ.TableList.Clear();
                            DrawQ.TableList.Add(Table);
                            DrawQ.SetRowColumn(0);
                        }
                    }
                    //UpdateConfigurationTable();
                    //RunInFront();
                }
                catch (Exception t) { Log(t); }
            }

        }
        //Dynamic Programming AStarGreedy First checked Event Handling.
        private void checkBoxDynamicProgrammingAStarGreedyt_CheckedChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                try
                {
                    /*        //RunInBackGround();
                            if (checkBoxDynamicProgrammingAStarGreedyt.Checked)
                                RefrigtzDLL.AllDraw.DynamicAStarGreedytPrograming = true;
                            else
                                RefrigtzDLL.AllDraw.DynamicAStarGreedytPrograming = false;
                            //UpdateConfigurationTable();
                            //RunInFront();
                     */
                }
                catch (Exception t) { Log(t); }
            }
        }
        //Help Event Handling Show Method.
        private void toolStripMenuItem3_Click_1(object sender, EventArgs e)
        {
            Help.ShowHelp(this, "Help.chm");

        }
        object sender;
        EventArgs e;
        void Veryfi()
        {
            int Max = 0;
            do
            {
                Max++;
            } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + Max.ToString() + ".accdb"));
            int iii = 0;
            do
            {
                progressBarVerify_Validated(sender, e);

                progressBarVerify.Value = (int)(((double)iii / (double)Max) * 100.0);
                iii++;
                String FileName = Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb";
                //Read Last Table and Set MovementNumber
                int Move = MovmentsNumber;
                MovmentsNumber = 0;
                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 8; j++)
                    {
                        if (!Quantum)
                            RefrigtzDLL.AllDraw.TableVeryfy[i, j] = RefrigtzDLL.AllDraw.TableVeryfyConst[i, j];
                        else
                            QuantumRefrigiz.AllDraw.TableVeryfy[i, j] = QuantumRefrigiz.AllDraw.TableVeryfyConst[i, j];
                    }
                }

                try
                {
                    VerifyTable(FileName, 0, ref MovmentsNumber);
                }
                catch (Exception t)
                { Log(t); }
                MovmentsNumber = Move;
            } while (System.IO.File.Exists(Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"));
            //MovmentsNumber = 0;

        }
        //Verify tool Srtip Games Folder Databases Event Handling Operation.
        private void verifyToolStripMenuItem_Click(object sender, EventArgs e)
        {
            this.sender = sender;
            this.e = e;
            //Thread t = new Thread(new ThreadStart(Veryfi));
            // t.Start();
        }

        private void clearToolStripMenuItem_Click(object sender, EventArgs e)
        {
            if (File.Exists(Root + "ErrorProgramRun.txt") || File.Exists(Root + "\\Run.txt"))
            {
                this.SetBoxText("Clearing...\n\n\n");
                if (File.Exists(Root + "ErrorProgramRun.txt"))
                    File.Delete(Root + "\\ErrorProgramRun.txt");
                if (File.Exists(Root + "\\Run.txt"))
                    File.Delete(Root + "\\Run.txt");
                this.SetBoxText("Finished.");

            }
        }

        private void checkBoxPredictHuristci_CheckedChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                //RunInBackGround();
                /*     if (checkBoxPredictHuristci.Checked)
                         RefrigtzDLL.ThinkingChess.PredictHuristic = true;
                     else
                         RefrigtzDLL.ThinkingChess.PredictHuristic = false;
                 */
                //UpdateConfigurationTable();
                //RunInFront();
            }
        }

        private void comboBoxMaxTree_SelectedIndexChanged(object sender, EventArgs e)
        {
            comboBoxMaxLevelText = comboBoxMaxLevel.Text;
            //if (!DisableTemporarlyTimerUpdate)
            {
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }

        }

        private void repairToolStripMenuItem_Click(object sender, EventArgs e)
        {
            int iii = 1, Max = 1;
            int t = DateTime.Now.Second * 1000 + DateTime.Now.Millisecond;

            do
            {

                System.Threading.Thread.Sleep(10);
                if (System.IO.File.Exists(FormRefrigtz.Root + "\\Database\\Games\\CurrentBank" + Max.ToString() + ".accdb"))
                    Max++;

                if (DateTime.Now.Second * 1000 + DateTime.Now.Millisecond - t > 2000) break;
            } while (true);
            progressBarVerify.Maximum = Max;
            do
            {
                iii++;
                try
                {
                    progressBarVerify.Value = iii;
                    progressBarVerify.Update();
                }
                catch (Exception t6)
                {
                    Log(t6);
                    progressBarVerify.Value = Max;
                    progressBarVerify.Update();

                }
                if (System.IO.File.Exists(FormRefrigtz.Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb"))
                {
                    try
                    {
                        File.Copy(FormRefrigtz.Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb", Root + "\\CurrentBank.accdb");
                    }
                    catch (Exception t1)
                    {
                        Log(t1);
                    }
                    try
                    {
                        File.Delete(FormRefrigtz.Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                    }
                    catch (Exception t2)
                    {
                        Log(t2);
                    }
                    try
                    {
                        CreateConfigurationTable();

                    }
                    catch (Exception t3)
                    {
                        Log(t3);
                    }
                    try
                    {
                        File.Copy(Root + "\\CurrentBank.accdb", FormRefrigtz.Root + "\\Database\\Games\\CurrentBank" + iii.ToString() + ".accdb");
                    }
                    catch (Exception t4)
                    {
                        Log(t4);
                    }
                    try
                    {
                        File.Delete(Root + "\\CurrentBank.accdb");
                    }
                    catch (Exception t5)
                    {
                        Log(t5);
                    }
                }

            } while (iii < Max);


        }

        private void comboBoxAttack_SelectedIndexChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.SignAttack = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                else
                    QuantumRefrigiz.AllDraw.SignAttack = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }

        }

        private void comboBoxObjectDangour_SelectedIndexChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.SignObjectDangour = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                else
                    QuantumRefrigiz.AllDraw.SignObjectDangour = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }
        }

        private void comboBoxReducedAttacked_SelectedIndexChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.SignReducedAttacked = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                else
                    QuantumRefrigiz.AllDraw.SignReducedAttacked = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }
        }

        private void comboBoxSupport_SelectedIndexChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.SignSupport = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                else
                    QuantumRefrigiz.AllDraw.SignSupport = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }
        }

        private void comboBoxHitting_SelectedIndexChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.SignKiller = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                else
                    QuantumRefrigiz.AllDraw.SignKiller = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }
        }

        private void comboBoxMovments_SelectedIndexChanged(object sender, EventArgs e)
        {
            //if (!DisableTemporarlyTimerUpdate)
            {
                if (!Quantum)
                    RefrigtzDLL.AllDraw.SignMovments = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                else
                    QuantumRefrigiz.AllDraw.SignMovments = System.Convert.ToInt32(((ComboBox)(sender)).Text);
                //RunInBackGround();
                //UpdateConfigurationTable();
                //RunInFront();
            }
        }

        private void errorOpenToolStripMenuItem_Click(object sender, EventArgs e)
        {
            ErrorTrueMonitorFalse = true;
            (new FormTXT()).Show();
        }

        private void monitorOpenToolStripMenuItem_Click(object sender, EventArgs e)
        {
            ErrorTrueMonitorFalse = false;
            (new FormTXT()).Show();

        }

        private void toolStripMenuItem7_Click(object sender, EventArgs e)
        {


        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {
                folderBrowserDialogBackup.ShowDialog();
                File.Copy(FormRefrigtz.Root + "\\Database\\CurrentBank.accdb", folderBrowserDialogBackup.SelectedPath + "\\CurrentBank.accdb");
                File.Copy(FormRefrigtz.Root + "\\Database\\Monitor.html", folderBrowserDialogBackup.SelectedPath + "\\Monitor.html");
                MessageBox.Show("Backup Finished.");
            }
            catch (Exception t)
            {
                Log(t);
                MessageBox.Show(t.ToString());
            }
        }

        private void toolStripMenuItem7_Click_1(object sender, EventArgs e)
        {
            GrayTimer = new Refrigtz.Timer(true);
            BrownTimer = new Refrigtz.Timer(true);
            GrayTimer.TimerInitiate("GrayTimer");
            BrownTimer.TimerInitiate("BrownTimer");
            BobSection = false;
            AliceSection = false;
            StateCP = true;
            StateCC = false;
            StateGe = false;
            comboBoxMaxLevel.Text = "2";
            if (OrderPlate == 1 && Sec.radioButtonGrayOrder.Checked)
            {
                Person = true;
                StateCP = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (Sec.radioButtonBrownOrder.Checked && OrderPlate == -1)
            {
                Person = false;
                StateCP = true;
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                StateCP = true;
                Person = false;
            }
            //UpdateConfigurationTableVal = true;
            //UpdateConfigurationTable();
            AllDo = false;
        }

        private void pictureBoxRefrigtz_Click(object sender, EventArgs e)
        {

        }

        private void toolStripMenuItem8_Click(object sender, EventArgs e)
        {
            GrayTimer = new Refrigtz.Timer(true);
            BrownTimer = new Refrigtz.Timer(true);
            GrayTimer.TimerInitiate("GrayTimer");
            BrownTimer.TimerInitiate("BrownTimer");
            StateCC = true;
            if (OrderPlate == 1)
            {
                BobSection = true;
                AliceSection = false;
                GrayTimer.StartTime("GrayTimer");
            }
            else
            {
                BobSection = false;
                AliceSection = true;
                BrownTimer.StartTime("BrownTimer");
            }
            //UpdateConfigurationTableVal = true;
            //UpdateConfigurationTable();
            AllDo = false;
        }

        private void buttonChangeArrangment_Click(object sender, EventArgs e)
        {
            if (!Quantum)
                RefrigtzDLL.AllDraw.DrawTable = false;
            else
                QuantumRefrigiz.AllDraw.DrawTable = false;

            /*if (MovmentsNumber == 1)
            {
                for (int i = 0; i < 8; i++)
                {
                    for (int j = 0; j < 8; j++)
                    {
                        Table[i, j] *= -1;
                    }
                }


                RefrigtzDLL.AllDraw.TableListAction.Clear();
                RefrigtzDLL.AllDraw.TableListAction.Add(Table);
                ArrangmentsChanged = !ArrangmentsChanged;
                Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                Draw.TableList.Clear();
                Draw.TableList.Add(Table);
                Draw.SetRowColumn(0);
                UpdateConfigurationTableVal = true;
                //UpdateConfigurationTable();

                try
                {
                    UpdateTable(Table, "Table00000000");
                }
                catch (Exception t)
                {
                    Log(t);
                    InsertTableAtDataBase(Table);
                }
            }


            SetPrictureBoxRefregitzUpdate(pictureBoxTimerBrown);
            SetPrictureBoxRefregitzInvalidate(pictureBoxTimerBrown);
            */
            //DisableTemporarlyTimerUpdate = false;

        }

        private void pictureBoxTimerGray_Paint(object sender, PaintEventArgs e)
        {
            Object o = new Object();
            lock (o)
            {
                //UpadatTimer();
                if (GrayTimer.TextChanged)
                {
                    try
                    {
                        Image TimerImageGray = (Image)new Bitmap(pictureBoxTimerGray.Width, pictureBoxTimerGray.Height);
                        g1 = Graphics.FromImage(TimerImageGray);
                        g1.FillRectangle(new SolidBrush(Color.Gray), new Rectangle(new Point(0, 0), new Size(pictureBoxTimerGray.Width, pictureBoxTimerGray.Height)));
                        g1.DrawString(GrayTimer.ReturnTime(), new Font("Times New Roman", 30), new SolidBrush(Color.Black), new PointF(5, 5));
                        pictureBoxTimerGray.Image = TimerImageGray;
                        g1.Dispose();

                        //Thread.Sleep(20);
                    }
                    catch (Exception t)
                    {
                        //pictureBoxTimerGray.Update();
                        // pictureBoxTimerGray.Invalidate();
                        //RunInFront();
                        Log(t);
                    }
                }
                System.Threading.Thread.Sleep(5);

                pictureBoxTimerBrown.Invalidate();
                pictureBoxTimerBrown.Update();

                //pictureBoxRefrigtz.Invalidate();
                //pictureBoxRefrigtz.Update();

                //Thread.Sleep(5);
            }
        }
        void UpadatTimer()
        {

            //Thread.Sleep(1000);
            //while (DisableTemporarlyTimerUpdate) ;
            {
                try
                {
                    // while (!TimersSet) ;

                    UpdateConfigurationTable();

                }
                catch (Exception t)
                {
                    Log(t);
                }
            }

        }
        private void pictureBoxTimerBrown_Paint(object sender, PaintEventArgs e)
        {
            Object o = new Object();
            lock (o)
            {
                //UpadatTimer();

                if (BrownTimer.TextChanged)
                {
                    try
                    {
                        Image TimerImageBrown = (Image)new Bitmap(pictureBoxTimerBrown.Width, pictureBoxTimerBrown.Height);
                        g2 = Graphics.FromImage(TimerImageBrown);
                        g2.FillRectangle(new SolidBrush(Color.Brown), new Rectangle(new Point(0, 0), new Size(pictureBoxTimerBrown.Width, pictureBoxTimerBrown.Height)));
                        g2.DrawString(BrownTimer.ReturnTime(), new Font("Times New Roman", 30), new SolidBrush(Color.Black), new PointF(5, 5));
                        pictureBoxTimerBrown.Image = TimerImageBrown;
                        g2.Dispose();

                        //Thread.Sleep(20);
                    }
                    catch (Exception t)
                    {
                        Log(t);
                        //pictureBoxTimerBrown.Update();
                        //pictureBoxTimerBrown.Invalidate();
                        //RunInFront();
                    }
                }
                System.Threading.Thread.Sleep(5);
                //pictureBoxTimerGray.Invalidate();
                //pictureBoxTimerGray.Update();

                pictureBoxRefrigtz.Invalidate();
                pictureBoxRefrigtz.Update();


            }

        }

        private void checkBoxBestMovments_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void checkBoxOnlySelf_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void checkBoxAStarGreedyMovement_CheckedChanged(object sender, EventArgs e)
        {

        }

        private void toolStripMenuItem9_Click(object sender, EventArgs e)
        {
            ProfesionalWithComputer = true;
            comboBoxMaxLevel.Text = "1";
            comboBoxMaxLevel.Enabled = false;
            GrayTimer = new Refrigtz.Timer(true);
            BrownTimer = new Refrigtz.Timer(true);
            GrayTimer.TimerInitiate("GrayTimer");
            BrownTimer.TimerInitiate("BrownTimer");
            BobSection = false;
            AliceSection = false;
            StateCP = false;
            StateCC = false;
            StateGe = false;
            if (OrderPlate == 1)
            {
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                Blitz = false;
            }
            Blitz = true;
            ///UpdateConfigurationTableVal = true;
            AllDo = false;
        }

        private void toolStripMenuItem10_Click(object sender, EventArgs e)
        {
            Quantum = false;
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }//AStarGreedyHuristic = false;
            if (OrderPlate == 1)
            {
                FullGame = true;
                GrayTimer.StartTime("GrayTimer");

            }
            else if (OrderPlate == -1)
            {
                FullGame = true;
                BrownTimer.StartTime("BrownTimer");
            }
            //UsePenaltyRegardMechnisam = false;
            PredictHuristic = false;
            //TimerIniataite = true;
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "Refregitz";
                label2.Text = "stockfish-8";

            }
            else
            {
                label2.Text = "Refregitz";
                label1.Text = "stockfish-8";
            }
            Stockfish = true;
            FullGame = true;
            Blitz = false;
            StateCC = true;
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
            //BobSection = true;
            //RefregitzisCurrent = false;
        }

        private void toolStripMenuItem1_Click(object sender, EventArgs e)
        {

        }

        private void toolStripMenuItem11_Click(object sender, EventArgs e)
        {
            UsePenaltyRegardMechnisam = false;
            UpdateConfigurationTable();
            GrayTimer = new Refrigtz.Timer(true);
            BrownTimer = new Refrigtz.Timer(true);
            GrayTimer.TimerInitiate("GrayTimer");
            BrownTimer.TimerInitiate("BrownTimer");
            BobSection = false;
            AliceSection = false;
            StateCP = false;
            StateCC = false;
            StateGe = false;
            comboBoxMaxLevel.Text = "4";
            if (OrderPlate == 1)
            {
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                Blitz = false;
            }
            Blitz = true;
            ///UpdateConfigurationTableVal = true;

            AllDo = false;
        }

        private void toolStripMenuItem12_Click(object sender, EventArgs e)
        {
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;

            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            //BobSection = false;
            //AliceSection = false;
            StateCP = true;
            StateCC = false;
            StateGe = false;
            FullGame = false;
            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount * 2 + 1).ToString();
            if (OrderPlate == 1)
            {
                Blitz = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                Blitz = true;
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                Blitz = false;
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "You";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "You";
            }
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
        }

        private void toolStripMenuItem13_Click(object sender, EventArgs e)
        {
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;

            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            //BobSection = false;
            //AliceSection = false;
            StateCP = true;
            StateCC = false;
            StateGe = false;
            Blitz = false;
            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount * 2 + 1).ToString();
            if (OrderPlate == 1)
            {
                FullGame = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                FullGame = true;
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                FullGame = false;
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "You";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "You";
            }
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);

            //UpdateConfigurationTableVal = true;

            MenueSelecte = true;
            UpdateConfigurationTable();

            AllDo = false;
        }

        private void opneToolStripMenuItem_Click(object sender, EventArgs e)
        {

        }

        private void pictureBoxTimerBrown_Click(object sender, EventArgs e)
        {

        }

        private void pictureBoxTimerGray_Click(object sender, EventArgs e)
        {

        }

        private void FormRefrigtz_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (!ExitM)
            {
                if (UsePenaltyRegardMechnisam && AStarGreedyHuristic)
                    AllDrawKind = 4;
                else
                                                         if ((!UsePenaltyRegardMechnisam) && AStarGreedyHuristic)
                    AllDrawKind = 3;
                if (UsePenaltyRegardMechnisam && (!AStarGreedyHuristic))
                    AllDrawKind = 2;
                if ((!UsePenaltyRegardMechnisam) && (!AStarGreedyHuristic))
                    AllDrawKind = 1;
                //Set Configuration To True for some unknown reason!.
                //UpdateConfigurationTableVal = true;                             
                SetAllDrawKindString();
                (new TakeRoot()).Save(Quantum, this, ref LoadTree, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            }
        }

        private void backgroundWorkerRefregitz_DoWork(object sender, DoWorkEventArgs e)
        {
            AllOp();
        }

        private void toolStripMenuItem21_Click(object sender, EventArgs e)
        {
            Quantum = true;
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;

            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            //TimerIniataite = true;
            //BobSection = false;
            //AliceSection = false;
            StateCP = true;
            StateCC = false;
            StateGe = false;

            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount).ToString();
            if (OrderPlate == 1)
            {
                GrayTimer.StartTime("GrayTimer");

                Blitz = true;
            }
            else if (OrderPlate == -1)
            {
                BrownTimer.StartTime("BrownTimer");
                Blitz = true;
            }
            else
            {
                Blitz = false;
            }
            if (Sec.radioButtonGrayOrder.Checked && OrderPlate == 1)
                Person = true;
            else
                if (Sec.radioButtonBrownOrder.Checked && OrderPlate == -1)
                Person = true;
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "You";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "You";
            }
            if (MovmentsNumber == 1)
            {
                DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                DrawQ.TableList.Clear();
                DrawQ.TableList.Add(Table);
                DrawQ.SetRowColumn(0);
            }
            else
            {
                QuantumRefrigiz.AllDraw THIS = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                bool FOUND = false;

                SetDrawFounding(ref FOUND, ref THIS, false);
            }
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
            //MessageBox.Show("Reload Project For Quntum Rifrigitz!");
            exitToolStripMenuItem_Click(new object(), new EventArgs());
        }

        private void textBoxText_TextChanged(object sender, EventArgs e)
        {
            ((TextBox)sender).Refresh();
        }

        private void backgroundWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            //timer.Start();
            do
            {
                try
                {
                    //System.Threading.Thread.Sleep(2);
                    //tttt.Start();
                    //ttt.Start();
                    AllOp();
                    System.Threading.Thread.Sleep(10);
                    // AllOperate.Start();
                }
                catch (Exception t) { Log(t); }
            } while (true);
        }

        private void timer_Tick(object sender, EventArgs e)
        {
            try
            {
                //System.Threading.Thread.Sleep(2);
                //tttt.Start();
                //ttt.Start();
                SetRefregitzDLL();
                SetNodesCount();
                AllOp();
                // AllOperate.Start();
            }
            catch (Exception t) { Log(t); }

        }

        private void timerAllOperation_Tick(object sender, EventArgs e)
        {
            try
            {
                AllOperations();
            }
            catch (Exception t)
            {
                Log(t);
            }
        }

        private void backgroundWorkerSetNode_DoWork(object sender, DoWorkEventArgs e)
        {
            do
            {
                try
                {
                    //System.Threading.Thread.Sleep(2);
                    //tttt.Start();
                    //ttt.Start();
                    SetNodesCount();
                    System.Threading.Thread.Sleep(10);
                    // AllOperate.Start();
                }
                catch (Exception t) { Log(t); }
            } while (true);
        }

        private void backgroundWorkerSetRefD_DoWork(object sender, DoWorkEventArgs e)
        {
            do
            {
                try
                {
                    //System.Threading.Thread.Sleep(2);
                    
                    //tttt.Start();
                    //ttt.Start();
                    SetRefregitzDLL();
                    System.Threading.Thread.Sleep(1);
                    // AllOperate.Start();
                }
                catch (Exception t) { Log(t); }
            } while (true);
        }

        private void backgroundWorkerGrayTimer_DoWork(object sender, DoWorkEventArgs e)
        {
            try
            {
                GrayTimer = new Refrigtz.Timer(false);

                GrayTimer.TimerInitiate("GrayTimer");

                do
                {



                } while (true);

            }
            catch (Exception t) { Log(t); }
        }

        private void backgroundWorkerBrownTimer_DoWork(object sender, DoWorkEventArgs e)
        {
            try
            {
                BrownTimer = new Refrigtz.Timer(false);

                BrownTimer.TimerInitiate("BrownTimer");


                do
                {



                } while (true);

            }
            catch (Exception t) { Log(t); }
        }

        private void backgroundWorkerTimerText_DoWork(object sender, DoWorkEventArgs e)
        {
            try
            {
                TimerText = new Refrigtz.Timer(true);
                TimerText.TimerInitiate("TimerText");
                TimerText.StartTime("TimerText");



                do
                {



                } while (true);

            }
            catch (Exception t) { Log(t); }
        }

        private void toolStripMenuItem22_Click(object sender, EventArgs e)
        {
            Quantum = false;
            UsePenaltyRegardMechnisam = false;
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");

            }
            PredictHuristic = false;
            //TimerIniataite = true;
            if (OrderPlate == 1)
            {
                Blitz = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                Blitz = true;
                BrownTimer.StartTime("BrownTimer");
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "Refregitz";
                label2.Text = "SugR";

            }
            else
            {
                label2.Text = "Refregitz";
                label1.Text = "SugR";
            }

            Stockfish = true;
            Sugar = true;
            Blitz = true;
            StateCC = true;
            StateCP = false;
            StateGe = false;
            BobSection = true;
            if (!LoadTree)
            {
                RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                bool FOUND = false;
                if (!Quantum)
                    SetDrawFounding(ref FOUND, ref THIS, false);
                else
                    SetDrawFounding(ref FOUND, ref THISQ, false);

            }
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
            //Application.Exit();
        }

        private void toolStripMenuItem23_Click(object sender, EventArgs e)
        {
            Quantum = false;
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }//AStarGreedyHuristic = false;
            if (OrderPlate == 1)
            {
                FullGame = true;
                GrayTimer.StartTime("GrayTimer");

            }
            else if (OrderPlate == -1)
            {
                FullGame = true;
                BrownTimer.StartTime("BrownTimer");
            }
            //UsePenaltyRegardMechnisam = false;
            PredictHuristic = false;
            //TimerIniataite = true;
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "Refregitz";
                label2.Text = "SugR";

            }
            else
            {
                label2.Text = "Refregitz";
                label1.Text = "SugR";
            }
            Stockfish = true;
            Sugar = true;
            FullGame = true;
            Blitz = false;
            StateCC = true;
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
            //Application.Exit();
            //BobSection = true;
            //RefregitzisCurrent = false;
        }

        private void toolStripMenuItem14_Click(object sender, EventArgs e)
        {

            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;

            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            //BobSection = false;
            //AliceSection = false;
            StateCP = true;
            StateCC = false;
            StateGe = false;
            Blitz = false;
            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount).ToString();
            if (OrderPlate == 1)
            {
                FullGame = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                FullGame = true;
                BrownTimer.StartTime("BrownTimer");
            }
            else
            {
                FullGame = false;
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "You";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "You";
            }
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
        }

        private void buttonCalculateRootGray_Click(object sender, EventArgs e)
        {

        }

        private void pictureBox3_Click(object sender, EventArgs e)
        {

        }

        private void toolStripMenuItem15_Click(object sender, EventArgs e)
        {
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            StateCP = false;
            StateGe = false;
            Blitz = false;
            StateCC = true;
            FullGame = true;
            GrayTimer = new Refrigtz.Timer(true);
            BrownTimer = new Refrigtz.Timer(true);
            GrayTimer.TimerInitiate("GrayTimer");
            BrownTimer.TimerInitiate("BrownTimer");
            comboBoxMaxLevel.Text = (PlatformHelper.ProcessorCount * 2 + 1).ToString();
            if (OrderPlate == 1)
            {
                //BobSection = true;
                //AliceSection = false;
                GrayTimer.StartTime("GrayTimer");
            }
            else
            {
                //BobSection = false;
                //AliceSection = true;
                BrownTimer.StartTime("BrownTimer");
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "Refregiz";
                label2.Text = "Refregiz";

            }
            else
            {
                label1.Text = "Refregiz";
                label2.Text = "Refregiz";
            }
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            AllDo = false;
        }

        private void toolStripMenuItem16_Click(object sender, EventArgs e)
        {
            //UsePenaltyRegardMechnisam = false;
            //TimerIniataite = true;
            label1.Text = "Refregitz";
            label2.Text = "stockfish-8";
            Stockfish = true;
            Blitz = true;
            StateCP = true;
            //BobSection = true;
            AllDo = false;
        }

        private void toolStripMenuItem17_Click(object sender, EventArgs e)
        {
            UsePenaltyRegardMechnisam = true;
            checkBoxUsePenaltyRegradMechnisam.Checked = true;
            //TimerIniataite = true;
            label1.Text = "You";
            label2.Text = "stockfish-8";
            Stockfish = true;
            Person = true;
            StateCP = true;
            //BobSection = true;
            //PersonWithStockfish = true;
            if (!Quantum)
            {
                Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                Draw.TableList.Clear();
                Draw.TableList.Add(Table);
                Draw.SetRowColumn(0);
            }
            else
            {
                DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                DrawQ.TableList.Clear();
                DrawQ.TableList.Add(Table);
                DrawQ.SetRowColumn(0);
            }
            AllDo = false;
        }

        private void toolStripMenuItem18_Click(object sender, EventArgs e)
        {
            //AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            PredictHuristic = false;
            //TimerIniataite = true;
            label1.Text = "Refregitz";
            label2.Text = "stockfish-8";
            Stockfish = true;
            FullGame = true;
            Blitz = false;
            StateCC = true;
            //BobSection = true;
            UsePenaltyRegardMechnisam = false;
            RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
            bool FOUND = false;
            if (!Quantum)
                SetDrawFounding(ref FOUND, ref THIS, false);
            else
                SetDrawFounding(ref FOUND, ref THISQ, false);
            AllDo = false;
        }

        private void toolStripMenuItem19_Click(object sender, EventArgs e)
        {
            Quantum = false;
            UsePenaltyRegardMechnisam = false;
            AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");

            }
            PredictHuristic = false;
            //TimerIniataite = true;
            if (OrderPlate == 1)
            {
                Blitz = true;
                GrayTimer.StartTime("GrayTimer");
            }
            else if (OrderPlate == -1)
            {
                Blitz = true;
                BrownTimer.StartTime("BrownTimer");
            }
            if (Sec.radioButtonGrayOrder.Checked)
            {
                label1.Text = "Refregitz";
                label2.Text = "stockfish-8";

            }
            else
            {
                label2.Text = "Refregitz";
                label1.Text = "stockfish-8";
            }

            Stockfish = true;
            Blitz = true;
            StateCC = true;
            StateCP = false;
            StateGe = false;
            BobSection = true;
            if (!LoadTree)
            {
                RefrigtzDLL.AllDraw THIS = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                QuantumRefrigiz.AllDraw THISQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                bool FOUND = false;
                if (!Quantum)
                    SetDrawFounding(ref FOUND, ref THIS, false);
                else
                    SetDrawFounding(ref FOUND, ref THISQ, false);

            }
            MenueSelecte = true;
            //UpdateConfigurationTableVal = true;
            UpdateConfigurationTable();
            AllDo = false;
        }

        private void toolStripMenuItem20_Click(object sender, EventArgs e)
        {
            //AStarGreedyHuristic = false;
            checkBoxAStarGreedyHuristic.Checked = false;
            UsePenaltyRegardMechnisam = false;
            checkBoxUsePenaltyRegradMechnisam.Checked = false;
            if (MovmentsNumber == 1)
            {
                GrayTimer = new Refrigtz.Timer(true);
                BrownTimer = new Refrigtz.Timer(true);
                GrayTimer.TimerInitiate("GrayTimer");
                BrownTimer.TimerInitiate("BrownTimer");
            }
            PredictHuristic = false;
            //TimerIniataite = true;
            label1.Text = "Refregitz";
            label2.Text = "stockfish-8";
            Stockfish = true;
            Blitz = true;
            StateCC = true;
            //BobSection = true;
            UsePenaltyRegardMechnisam = false;
            if (!AllDrawLoad)
            {
                if (!Quantum)
                {
                    Draw = new RefrigtzDLL.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    Draw.TableList.Clear();
                    Draw.TableList.Add(Table);
                    Draw.SetRowColumn(0);
                }
                else
                {
                    DrawQ = new QuantumRefrigiz.AllDraw(OrderPlate, MovementsAStarGreedyHuristicFound, IInoreSelfObjects, UsePenaltyRegardMechnisam, BestMovments, PredictHuristic, OnlySelf, AStarGreedyHuristic, ArrangmentsChanged);
                    DrawQ.TableList.Clear();
                    DrawQ.TableList.Add(Table);
                    DrawQ.SetRowColumn(0);
                }
            }
            AllDo = false;
        }
    }
}
//End of Documentation.




